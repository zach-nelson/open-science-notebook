[
  {
    "objectID": "posts/lpt-stats/index.html",
    "href": "posts/lpt-stats/index.html",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "",
    "text": "codesource(here(\"code\",\"R\",\"functions.R\"))\n# (\"https://services.arcgis.com/0jRlQ17Qmni5zEMr/arcgis/rest/services/lpt2022-public-view/FeatureServer/2/1678/attachments/1685\")\n\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(species))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(n_parcels_sampled))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(cYear))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(n_transects_sampled))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(n_parcels_all_years))\n# tar_load(parcel_test_sums))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcel_test_sums))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(monsites_shp))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(icwd_ladwp_bind))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(lpt_updated_master))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(transects))\n\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcels_shp))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcels_deltas))#parc)l-year-deltas\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcels_shp_ttest))\n\n# tar_load(parcel_year_meta_2samp_results)\n# tar_load(parcel_year_meta_1samp_results)\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcel_year_meta_combined_results))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(deltas_ttest_att))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(wellcont_means))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(wellcont_means_rarefied))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(plot_wellcontrol))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(boxplot.w.c))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(trends.w.c))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(plot_1sample_timeseries))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(plot_2sample_timeseries))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcel_datatable))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcel_datatable_chronic))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcel_datatable_significant))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(attributes_reinv))\n\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcels))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(attributes_pfix))\na <- attributes_pfix %>% select(Parcel,Type,wellfield,wellfield_area, GB_TYPE, Holland)\n\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(panel_map_lw))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(panel_map_bp))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(panel_map_ta))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(panel_map_ts))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(panel_map_io))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(panel_map_ss))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(panel_map_bg))\n# tar_load(panel_map_lp)\n# tar_load(monsites_shp)\n\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcel_year_meta_2samp_results_grass))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcel_year_meta_1samp_results_grass))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcel_year_meta_2samp_results))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcel_year_meta_1samp_results))\n\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcels_shp))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(canals_shp))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(monsites_shp))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(or_shp))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(laa_shp))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(lakes_shp))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(streams_shp))"
  },
  {
    "objectID": "posts/lpt-stats/index.html#purpose",
    "href": "posts/lpt-stats/index.html#purpose",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "Purpose",
    "text": "Purpose\nThe purpose of this research website is to provide the Inyo-LA Technical Group with an annual summary of the groundwater-dependent vegetation parcels on LA-owned lands in Owens Valley that show measurably different vegetation characteristics from the 1984-87 vegetation baseline, and in a format that is transparent and reproducible.\nGreen Book Box I.C.1.a.ii., “Transects for monitoring vegetation response to pumping”, was revised by the Technical Group and Standing Committee in 2017 to reflect agreement on how to jointly manage the vegetation monitoring program, including management of a shared database and which statistical procedures would be used to determine a measurable vegetation change from baseline conditions.\nGreen Book Section I.C.1, Determination of Significant Impacts reads “A significant decrease or change or other significant effect on the environment will be mitigated if it is 1. measurable [statistical significance described in Green Book Box I.C.1.a.ii.], 2. attributable to groundwater pumping or surface water management practices, and 3. significant[what is the overall ecological and economic significance of the change?].\nThis research website provides this annual measurability analysis of Green Book Section I.C.1.a. The procedures described in Green Book Box I.C.1.a.ii. are translated here into a data pipeline written in the R computing language so that the implementation of the procedures are transparent, reproducible, and can be expediently applied to quantify where and when the vegetation goals of the Agreement are being met, and where they are not.\nAny parcel or group of parcels exhibiting a persistent deviation from baseline vegetation goals determined by these statistical procedures is evaluated by the Technical Group to determine whether or not the apparent change would have occurred in the absence of pumping stress and/or in the absence of changes in past surface water management practices using the procedures in Green Book Section I.C.1.b., Determining Attributability."
  },
  {
    "objectID": "posts/lpt-stats/index.html#relevant-green-book-sections",
    "href": "posts/lpt-stats/index.html#relevant-green-book-sections",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "Relevant Green Book Sections",
    "text": "Relevant Green Book Sections\nGreen Book Section I.C, Impact Determination and Mitigation\n“Among the primary goals of the Agreement are to manage groundwater pumping and surface water management practices as follows: 1) to avoid causing significant decreases in live vegetation cover; 2) to avoid changing a significant amount of vegetation from one classification to a lower (alphabetically) classification; 3) to avoid causing other significant effects on the environment; and 4) in a manner consistent with State and Federal laws pertaining to rare and endangered species. If any of these goals are not achieved, feasible mitigation of the affected area will be implemented. However, mitigation is not considered a primary management tool, but rather a secondary tool that will be employed should impacts occur that are inconsistent with the goals of the Agreement.”\n“This section outlines a procedure for determining whether decreases and/or changes in vegetation or other significant effects on the environment have occurred or are occurring in a given management area. It describes the process the Technical Group will follow to ascertain whether a change is significant, and thus, whether it requires mitigation. It also describes how the Technical Group will develop and implement a mitigation plan and monitoring and reporting program.”\nSection I.C.1, Determination of Significant Impacts\n“A significant decrease or change or other significant effect on the environment will be mitigated if it is measurable, attributable to groundwater pumping or surface water management practices, and significant. The Agreement provides that the determination of significance of an impact, and thus, whether it must be mitigated, will be made on a case by case basis. The steps in the case by case analysis are described below.”\nSection I.C.1.a (Determining Measurability)\n“In determining whether a change in vegetation cover or composition is measurable, the Technical Group will consider all relevant factors, including:\ncomparison of current vegetation cover and composition in the affected area with similar data taken during other time periods, including the 1984-87 vegetation inventory data;\nComparison of vegetation cover and composition at the affected area with vegetation data from one or more control sites located in areas which have similar vegetation, soil, and precipitation conditions;\ncomparison of the ratio of recently deceased vegetation to live vegetation in the affected area with other areas not affected by pumping and with similar vegetation cover and composition, soil, and precipitation conditions;\nuse of air photo and remote sensing techniques to assist in making comparisons of conditions during different time periods and in mapping the affected area;\ncomparison of data from randomly selected transects with similar data taken during other time periods, including the 1984-87 vegetation inventory data. This method will be employed in areas where monitoring site data does not exist, or where data covers an insufficient time period. Such transects will be performed as described in Box I.C.1.a.ii.”\nIn determining measurability, Section I.C.1 describes, “A determination of measurability will be made if any of the relevant factors considered indicate even a small documentable change in vegetation cover or composition has occurred.”\nThe updated Green Book BOX I.C.I.a.ii. outlines a set of procedures to assess measurability based on the transect-level monitoring data’s statistical deviation from baseline."
  },
  {
    "objectID": "posts/lpt-stats/index.html#green-book-box-i.c.1.a.ii",
    "href": "posts/lpt-stats/index.html#green-book-box-i.c.1.a.ii",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "Green Book Box I.C.1.a.ii",
    "text": "Green Book Box I.C.1.a.ii\nTRANSECTS FOR MONITORING VEGETATION RESPONSE TO PUMPING\nVegetation transects are included within the Green Book to serve two purposes: 1) to estimate transpiration from a monitoring site, and 2) for use in determining whether vegetation has decreased or changed significantly from the previous cover.\n\nDetailed measurements of leaf area index shall be made at each of the monitoring sites using the techniques described in Section III.C. These measurements will be used to estimate evapotranspiration from the vegetation at the monitoring site for comparison to available soil water and, ultimately, to project plant-soil water balance and the need for water table recovery. Vegetation transects shall also be used in cases of suspected vegetation changes due to groundwater pumping. However, rather than using the intensive sampling technique of Section III.D for calculating evapotranspiration, plant cover shall be measured by the line-point technique described below.\nDuring the 1984-87 inventory, most parcels were sampled with line-point transects of 100 feet in length, with sampling points at one-foot intervals, providing a two-dimensional representation of vegetation within the parcel. At each one-foot marker, the first contact with the uppermost layer of live plant cover was recorded. Cover and species composition were calculated from all sampling points along the transect.\n\nThe 1984-87 inventory shall be used as a “baseline” to determine whether vegetation cover and/or species composition has changed. This inventory is the only one of sufficient accuracy to permit comparison of species composition and cover.\nA subset of the vegetation parcels mapped during the 1984-87 baseline inventory shall be annually monitored to accommodate statistical comparison with data collected during the baseline inventory. Such monitoring may rely on repeat measurement of georeferenced locations using the line-point-intercept method to track live cover and species composition over time. The baseline inventory was summarized at the parcel scale, thus for statistical comparison, transect locations derived from a set of random locations and azimuths provide a valid statistical comparison.\nParcels to be monitored were initially selected based on meeting one or more of the following criteria: (1) parcel contained a permanent monitoring site; (2) baseline inventory data were collected for the parcel; (3) parcel was in close proximity to a pumping well; (4) information of past and current land use for parcel was available; (5) parcel was representative of one of the groundwater-dependent plant communities originally mapped during the baseline inventory; (6) soil characterization was available for the parcel; (7) characterization of the landscape position was available for the parcel. In 2015, Inyo County and Los Angeles began a joint monitoring program utilizing a combination of parcels and transects evaluated and agreed upon by the staffs of both parties. As of 2016, 1,688 transects across 141 parcels are jointly monitored by both parties.\nApproximately 100 of the 141 parcels monitored in 2016 will be jointly selected and monitored each year by Inyo County and Los Angeles. Prior to the field season, staff from both parties will determine which parcels of the 141 will be monitored. Existing permanent transects will be used for those parcels selected unless the staffs of both parties agree that a change in transect location is justified and necessary. Transects will be evenly split between ICWD and LADWP. Either party may independently conduct monitoring of additional parcels or transects; however, any data so collected shall be provided to the other party.\nThe field protocol and calibration for field observations for the joint line-point monitoring program largely follows Herrick et al.(2016). At the onset of the monitoring season, staff from both parties shall meet in the field to discuss methods and to calibrate all field personnel. In summary the field protocol is as follows:\n\nnavigate to the transect start point with a handheld GPS device;\nverify presence of an aluminum tag which has been previously attached to a nearby object (i.e. shrub, debris, etc.);\nuse a photo taken from the previous year to precisely locate the transect start point and to examine the accuracy of the azimuth used during the previous year;\nif the start point on the photo is off by more than 6 meters from the point indicated by a GPS reading, or a start point cannot be positively identified, a start point will be placed at the point indicated by the GPS device;\nif the designated transect azimuth is off by more than ±5 degrees from the azimuth depicted within the previous year’s transect photo, the designated transect azimuth will be used. If not, the azimuth depicted within the previous year’s photo will be upheld;\nstretch a tape measure to the direction of the pre-established azimuth;\nfor each transect, notes shall be taken on whether an aluminum tag is present, and whether or not the current year’s start point and compass azimuth matches those depicted within the previous year’s transect photo;\nrecord species identity at each half meter starting at 0.5 m and ending at 50 m yielding 100 possible hits;\nplace a dry erase board with the parcel name, transect number, azimuth and date at the base on the transect line and take a picture from the start point toward the end point that captures the entire transect.\n\nAll live cover is tallied for each species for each transect. Data are exchanged at the end of the field season after each party digitally enters and proofs field data.\nThe field technique and sampling design may be modified to permit detailed statistical comparison if deemed necessary in the future. Statistical analysis will be used to determine the measurability (statistical significance) of vegetation changes from the 1984-87 baseline inventory maps. Such an analysis may include, but is not limited to, Welch’s test (t-test with unequal variance), Wilcox test (Mann-Whitney test), Analysis of Variance (ANOVA) and Generalized Linear Model (GLM) for vegetation cover and permutational Multivariate Analysis of Variance (PERMANOVA) and Nonmetric Multidimensional Scaling (NMDS) for vegetation composition. For parcels with small baseline inventory sample sizes (e.g. 1-4 transects), a one-sample t-test may be performed using the baseline inventory sample mean as the null hypothesis for the test. Determination of measurability will be made by the Technical Group on case by case basis in accordance with Water Agreement IV.B and Green Book Section I.C.\nBox I.C.1.a.ii shall be modified as necessary in the future to incorporate new or modified field techniques, technology, and/or analytical methods. Such changes will be jointly developed by the staffs from both Inyo County and Los Angeles and will be presented to the Technical Group for consideration."
  },
  {
    "objectID": "posts/lpt-stats/index.html#targets",
    "href": "posts/lpt-stats/index.html#targets",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n2.7 targets",
    "text": "2.7 targets\n\nThe targets R package is a Make-like pipeline toolkit for statistics and data science in R. With targets, you can maintain a reproducible workflow without repeating yourself. targets skips costly runtime for tasks that are already up to date, runs the necessary computation with implicit parallel computing, and abstracts files as R objects. A fully up-to-date targets pipeline is tangible evidence that the output aligns with the code and data, which substantiates trust in the results. targets github\n\nA single _targets.R script was constructed to pipe in datasets through a chain of functions to determine where monitoring data suggests vegetation goals of the water agreement are possibly not being met.\nFunctions are located in code/R/functions.R and the _targets.R script is located in the root directory with the .Rproj file.\nThe targets package tar_visnetwork() function output shows the data pipeline in an interactive format. Links are dependencies between functions and targets (input files, intermediate data transformations, model objects, plots and tables etc) specifying which targets are upstream from others and which are out of date and which downstream dependencies need to be rerun for the output to stay current. In the interactive viewer, functions are shown as triangles and targets are shown as circles. Fill color indicates whether or not upstream dependencies are ‘Up to date’ (green) or ‘Outdated’ (blue). Only the downstream dependencies of updated targets or functions will be re-evaluated when the pipeline is rerun using tar_make().\n\ncodewithr::with_dir(rprojroot::find_root('_targets.R'),tar_visnetwork())\n\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.1     ✔ purrr   1.0.1\n✔ tibble  3.1.8     ✔ dplyr   1.1.0\n✔ tidyr   1.3.0     ✔ stringr 1.5.0\n✔ readr   2.1.3     ✔ forcats 0.5.2\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nhere() starts at /Users/zac/Documents/projects/open-science-notebook\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\nLoading required package: ggpp\n\nAttaching package: ‘ggpp’\n\nThe following object is masked from ‘package:ggplot2’:\n\n    annotate\n\n\n\nFigure 1: Dependency-aware data pipeline created with the Targets R package."
  },
  {
    "objectID": "posts/lpt-stats/index.html#workflowr",
    "href": "posts/lpt-stats/index.html#workflowr",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "workflowr",
    "text": "workflowr\nOnce the targets are defined in the _targets.R script, running tar_make() stores the targets in the _targets subdirectory under the root of the project, where the .Rproj is located. Now any .Rmd anywhere within the project directory can access these targets that were made from the dependency-aware pipeline. The default workflowr project directory defaults .Rmd files to be located in the analysis directory and these analysis/file.Rmd can access the targets. The workflowr::wflow_build() will render the .Rmd to an html website in the docs directory that can be version controlled on github and hosted on github-pages.\nworkflowr research websites include seven reproducibility checks including that the output was derived from a ‘committed’ file to version control, the R environment was empty, the seed was set, session information was recorded, no cache, file paths were relative, and which repository version created the website view.\n\n\nShow the code\n# Engineering this reproducible data pipeline from raw data to report metrics that are specified in the Green Book is the first attempt at bringing open science and reproducibility to the implementation of the Inyo-LA Long-Term Water Agreement. \n# \n# *Increasing opportunities for collaboration while promoting scientific innovation, transparency, and reproducibility* is a primary objective of NASA's Open-Source Science Initiative, TOPS (Transform to OPen Science). Within the TOPS mission, NASA is designating **2023 as the Year Of Open Science**, a community initiative to spark change and inspire open science engagement through events and activities that will accelerate adoption of open science practices. TOPS is only the starting point; **the science community needs agencies and organizations to make a long-term commitment to support building an inclusive open science community over the next decade.**\n# at the national level the need for open science is being recognized increasingly more which is good to see. The value of reproducibility at the County level will hopefully be recognized over time.\n\n\n\nThe workflowr R package helps researchers organize their analyses in a way that promotes effective project management, reproducibility, collaboration, and sharing of results. Workflowr combines literate programming (knitr and rmarkdown) and version control (Git, via git2r) to generate a website containing time-stamped, versioned, and documented results. workflowr github\n\n\nThe targets R package is a Make-like pipeline toolkit for statistics and data science in R. With targets, you can maintain a reproducible workflow without repeating yourself. targets skips costly runtime for tasks that are already up to date, runs the necessary computation with implicit parallel computing, and abstracts files as R objects. A fully up-to-date targets pipeline is tangible evidence that the output aligns with the code and data, which substantiates trust in the results. targets github\n\nTo reproduce the results, the github repository can be cloned or downloaded, the _targets.R script is run in Rstudio or other IDE using tar_make() which sources the functions.R script. Once the targets are created, the report.rmd is run to reproduce the report.html (this webpage)."
  },
  {
    "objectID": "posts/lpt-stats/index.html#governing-document-links",
    "href": "posts/lpt-stats/index.html#governing-document-links",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "Governing Document Links",
    "text": "Governing Document Links\nGoverning documents are currently hosted at inyowater.org) as of 2023-01-30.\n\nInyo/LA Long Term Water Agreement(LTWA)\nLTWA Technical Appendix (Green Book)\nGreen Book Box I.C.1.a.ii.TRANSECTS FOR MONITORING VEGETATION RESPONSE TO PUMPING"
  },
  {
    "objectID": "posts/lpt-stats/index.html#baseline",
    "href": "posts/lpt-stats/index.html#baseline",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n2.2 Baseline",
    "text": "2.2 Baseline\nFrom September 1984 to Nov 1987, LADWP inventoried and mapped vegetation on LA-owned lands in Owens Valley into 2126 polygons of similar vegetation type (223,168 acres). The Green Book vegetation monitoring program focuses on a subset of these groundwater-dependent parcels (Green Book types B, C, D and some E) that are affected by groundwater pumping within the unconfined shallow aquifer when pumping causes water table and it’s capillary fringe to decline below the reach of obligate groundwater-dependent species within Owens Valley."
  },
  {
    "objectID": "posts/lpt-stats/index.html#control-wellfield-designation",
    "href": "posts/lpt-stats/index.html#control-wellfield-designation",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n2.6 Control Wellfield Designation",
    "text": "2.6 Control Wellfield Designation\nParcels were classified as either belonging to a wellfield group or control group based on criteria derived from groundwater drawdown during the period of maximum pumping rate that occurred between 1987 and 1993. Parcels were assigned to the wellfield group if (1) kriged DTW estimates exceeded 1-m water-table drawdown during 1987-1993 or (2) they were located at sites corresponding to modeled drawdown contours greater than 10 ft. Parcels were assigned to the control group if (1) kriged DTW estimates were less than 1 m and (2) they were located at sites corresponding to modeled drawdown contours less than 10 ft. If the kriged DTW estimates were not reliable owing an inadequate test-well network near the vegetation parcel, then the groundwater-flow model estimate of the 10-ft drawdown contour was used as the sole criteria to designate parcels as either wellfield or control.\nAn exception to the above criteria was applied to parcels associated with drawdown contours greater than 10-ft yet located near a surface water source (specifically, a canal, sewer pond, creek, river, or a ground water seepage source) that would lessen local drawdown effects—these parcels were classified as control.\nSome parcels currently in the wellfield group have higher water tables than during the 1987 to 1993 period, but remain in the wellfield group because of their close proximity to pumping wells and potential for pumping-induced drawdown. Each parcel is also classified by its Green Book management type, Holland plant community type and by its status as either wellfield or control."
  },
  {
    "objectID": "posts/lpt-stats/index.html#sample-size",
    "href": "posts/lpt-stats/index.html#sample-size",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "Sample size",
    "text": "Sample size\nMost parcels were sampled in 1984-1987 using line-point-intercept sampling. Some parcels were not directly sampled but rather assigned cover and composition values from parcels with similar vegetation conditions. Welch’s t-test for unequal variance was used to evaluate in which parcels and in which year(s) total perennial cover and perennial grass cover has significantly differed from baseline. Since the sample standard deviation is used to construct 95% confidence interval, this method can be used for parcels in which baseline data contained more than one transect or nonzero sample variance. Where unmeasured parcels during baseline subsequently inherited a single baseline value from nearby parcels, a one-sample t-test is used to determine significance from baseline. For parcels with low baseline sample sizes, procedures in Green Book Box I.C.1.a.ii were followed: “For parcels with small baseline inventory sample sizes (e.g. 1-4 transects), a one-sample t-test may be performed using the baseline inventory sample mean as the null hypothesis for the test”."
  },
  {
    "objectID": "posts/lpt-stats/index.html#data",
    "href": "posts/lpt-stats/index.html#data",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n2.4 Data",
    "text": "2.4 Data\n\n2.4.1 Field Data (line-point-intercept)\nThe number of parcels sampled each year as well as the number of transects sampled per parcel has varied due to fluctuations in annual staffing. Thus, some parcels have varying numbers of transects sampled across time. Other parcels have not been sampled continuously during the entire monitoring period. In 2022, 136 were sampled.\nPerennial species cover is considered in this report, because annual species are not dependent on groundwater. Perennial cover was further aggregated into grass, non-gramminoid herbaceous (herb), and shrub. In order to analyze the changes in the composition of total perennial cover, the proportion of shrub, herb and grass cover as a fraction of total perennial cover was calculated. Transect data are summarized for each parcel and year using the arithmetic average, creating a history of cover over time for each parcel.\n\n2.4.2 Remote Sensing\nNormalized difference vegetation index (NDVI) derived from Landsat 5/7/8/9 was extracted from google earth engine using the python API and an open source python toolbox ee-tools. Pixels were zonally averaged to the parcel polygons over July 15-Sep 15, creating a full history of remotely-sensed vegetation change starting during the baseline period in 1985. The Landsat dataset is produced by NASA/USGS, and hosted on Google Earth Engine.\n\n2.4.3 Precipitation\nPrecipitation dataset was acquired using the gridMET/METDATA dataset produced at the University of Idaho. It is a daily dataset of historically observed meteorological variables from Jan 1, 1979 to 2-days lag from the current date. It is produced over the contiguous United States (CONUS). GridMet is produced by bias correcting the daily NLDAS2 dataset to monthly PRISM values producing values on a 4-km (1/24-deg) grid."
  },
  {
    "objectID": "posts/lpt-stats/index.html#wellfield-control-group-comparison",
    "href": "posts/lpt-stats/index.html#wellfield-control-group-comparison",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n2.5 Wellfield Control Group Comparison",
    "text": "2.5 Wellfield Control Group Comparison\n\n\n\nFor an overview of the pumping effect on GDEs in Owens Valley, parcels were classified in the early 1990s as either within a wellfield group potentially affected by pumping or a control group where the pumping effect was determined to be negligible on water table drawdown. In the 2000s, a rarefied subset of these parcels that had been sampled every year since 1992 was selected and this set has continued to be sampled each year to 2022. This particular set is small with 13 control and 31 wellfield parcels. For this rarefied subset, averages are plotted below for comparison of the groups over time and linear trends are reported for total cover, perennial herbaceous cover and woody shrub cover separately. In 2022, 4341 control and 9193 wellfield parcels were sampled. Thus this rarefied set is limited to 34% of wellfield parcels and 32% of control parcels in the current year sample."
  },
  {
    "objectID": "posts/lpt-stats/index.html#wellfield-control-linear-trend",
    "href": "posts/lpt-stats/index.html#wellfield-control-linear-trend",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n4.1 Wellfield Control Linear Trend",
    "text": "4.1 Wellfield Control Linear Trend\n\ncodetrends.w.c\n\n\n\nFigure 3: Mean total perennial cover (Cover), perennial grass (Grass), shrub (Shrub) aggregated to parcel groups (wellfield and control) and plotted over the baseline and reinventory period. The baseline year is plotted at the nominal year 1986 for brevity. P-values less than 0.05 denote slopes statistically different from zero."
  },
  {
    "objectID": "posts/lpt-stats/index.html#wellfield-control-baseline-vs-current-year",
    "href": "posts/lpt-stats/index.html#wellfield-control-baseline-vs-current-year",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n4.2 Wellfield Control Baseline vs Current Year",
    "text": "4.2 Wellfield Control Baseline vs Current Year\nBaseline vs 2022 in wellfield and control groups.\n\ncode# move this to functions file\n\n\nboxplot_wc_pft_year_statcompare1 <- function(attributes, parcels, comparison_year, reference_year){\n\na <- attributes %>% select(Parcel,Type) %>% unique()\n\nparcels2 <- parcels %>% unique() %>% left_join(a, by = \"Parcel\")\n\n# parcels %>% write_csv('parcels2022.csv')\n# get the parcels with both baseline and current year data\n# spreading separate years into columns provides NA in parcel rows without data\n# in that year.\n\n# select columns and filter to comparison years\nparcels.select.compare <- parcels2 %>%\n  select(Parcel,NominalYear,Cover) %>%\n  filter(NominalYear %in% c(reference_year,comparison_year))\n\n# pivot wide with years as columns so we can keep rows with data in both current year and baseline.\nparcels.spread <- parcels.select.compare %>%\n  pivot_wider(names_from = NominalYear,\n              values_from = Cover,\n              names_prefix = \"y\")\n\n# select only rows with baseline and current year data\nPairwise <- parcels.spread %>%\n  rowwise()%>%\n  filter(!any(is.na(c_across(starts_with(\"y\")))))\n\n# select parcel attributes to join\natt <- attributes %>% select(Parcel, Type, wellfield, GB_TYPE, Holland)\n\n# join attributes\npa <- Pairwise %>% left_join(att, by = \"Parcel\")\n\n# split into wellfield and control dataframes\n# in 2022, 132 total, 91 wellfield, 41 control\nwpa <- pa %>% filter(Type == 'W') %>% nrow()# 91\ncpa <- pa %>% filter(Type == 'C') %>% nrow()# 41\n# write to disk for excel users\n# pa %>% write_csv(\"output/wellfield_control_cover_2022_c41_w91.csv\")\n#-------------------------------------------------------------\n#-------------------------------------------------------------\n# now filter the data\ntitle.construct <- paste0(\"Control (n=\", cpa,\") and Wellfield (n=\", wpa,\") Parcels sampled in both \",\n      reference_year,\" and \",comparison_year)\n\np <-  parcels2 %>% unique() %>%\n  filter(Parcel %in% Pairwise$Parcel,NominalYear %in% c(reference_year,comparison_year)) %>%\n  select(Parcel,NominalYear,Year,Type,Cover,Shrub,Grass) %>%\n  gather(Cover.Type,Cover,Cover:Grass)%>%\n  filter(!is.na(Type)) %>% mutate(NomYear = as.factor(NominalYear))\n\nggpaired_component <-ggpaired(p,\n                              x = \"NomYear\",\n                              y = \"Cover\",\n                              id = 'Parcel',\n                              color = \"Type\",\n                              notch = TRUE,\n                              label = \"Parcel\",\n                              label.select = list(top.up = 2),\n                              # label.select = list(criteria = \"`y` > 2 & `y` < 5 & `x` %in% c('A', 'B')\")\n                              repel = TRUE,\n                              font.label = list(size = 9, face = \"plain\"),\n                              palette = \"jco\",\n                              line.color = \"lightgray\",\n                              line.size = 0.1,\n                              # add = \"jitter\",\n                              facet.by = c('Type','Cover.Type'),\n                              # short.panel.labs = FALSE,\n                              title = title.construct,\n                              ylab = \"Perennial Cover\",\n                              xlab = \"Time Period Statistical Comparison\",\n                              panel.labs = list(Type = c(\"Control\", \"Wellfield\"))\n               )\n\nggpaired_stat_compare_plot <- ggpaired_component +\n  stat_compare_means(method='t.test',\n                     paired = TRUE,\n                     label = \"p.signif\"\n                     # label = \"p.format\"\n                     )\n# ggpaired_stat_compare_plot %>%\n  # ggsave(paste0(\"output/wc-plots/wc_\",reference_year,\"v\",comparison_year,\".pdf\"))\n# default is wilcoxon signed rank test\n# statcompare+ stat_compare_means(\n#                    paired = TRUE\n#     )\n# plot\nreturn(ggpaired_stat_compare_plot)\n}\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = cYear - 1)\n\n\n\nFigure 4: Year over year group comparison between control and wellfield parcels.\n\n\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = \"2015\")\n\n\n\nFigure 5: Group comparison between control and wellfield parcels between 2015 drought year and the current year.\n\n\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = \"1992\")\n\n\n\nFigure 6: Group comparison between control and wellfield parcels between baseline and 1992 after overpumping and drought effects.\n\n\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = \"1992\",\n                                reference_year = \"1986\")\n\n\n\nFigure 7: Group comparison between control and wellfield parcels between baseline and 1992 after overpumping and drought effects.\n\n\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = \"1986\")\n\n\n\nFigure 8: Group comparison between control and wellfield parcels between baseline and current year.\n\n\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = \"1993\")\n\n\n\nFigure 9: Group comparison between control and wellfield parcels between 1993 drought year and the current year."
  },
  {
    "objectID": "posts/lpt-stats/index.html#parcel-cover",
    "href": "posts/lpt-stats/index.html#parcel-cover",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n4.3 Parcel Cover",
    "text": "4.3 Parcel Cover\nIn the 2022 growing season, ICWD and LADWP monitored 136 vegetation parcels with 1667 vegetation transects using the line-point-intercept method described in Green Book Box I.C.1.a.ii."
  },
  {
    "objectID": "posts/lpt-stats/index.html#grass-cover-change",
    "href": "posts/lpt-stats/index.html#grass-cover-change",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "Grass Cover Change",
    "text": "Grass Cover Change\nThe baseline perennial vegetation cover and subset of grass cover statistically compared to 2022 data using either Welch Two Sample t-test or One Sample t-test - depending on the baseline sample size following Box I.C.1.a.ii.\n\n\nShow the code\nparcel_year_meta_combined_results %>% \n  filter(Year.x == cYear) %>% \n  select(Parcel,cover_type,significance,  estimate, estimate1, estimate2, method,n.x, n.y, statistic, p.value) %>%  \n  mutate(across(estimate:estimate2, round, 0)) %>%\n  mutate(across(statistic:p.value, round, 3)) %>% \n  datatable(extensions = c('Buttons','FixedColumns'),\n            filter = c(\"top\"),\n            options = list(\n              dom = 'Blfrtip',\n              buttons = c('copy', 'csv', 'excel', 'pdf', 'print'),\n              scrollX = TRUE,\n              fixedColumns = list(leftColumns = 2, rightColumns = 0),\n              pageLength = 5, \n              autoWidth = TRUE)\n            )"
  },
  {
    "objectID": "posts/lpt-stats/index.html#effect-size-and-persistence",
    "href": "posts/lpt-stats/index.html#effect-size-and-persistence",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n4.1 Effect size and persistence",
    "text": "4.1 Effect size and persistence\nStatistical deviation from baseline - effect size vegetation change since baseline (Cover.Delta, Grass.Delta, Shrub.Delta) through 2022, and 2022 parcel-average perennial grass (pGrass) and shrub (pShrub) as a proportion of the total perennial cover\n2022 parcel average total perennial cover (Cover) subtypes perennial Grass and Shrub cover.\nThe number of years in a row, counting back from the current year, a given parcel has been statistically (measurably) below baseline is indicated by Cover_sig.counter and Grass_sig.counter.\nColumn Descriptions\n\n\nCover.Delta and Grass.Delta is the difference from baseline compared to the current year.\n\nCover_sig.counter and Grass_sig.counter number of years the parcel has been below baseline in a row counting back from current year.\n\nn total number of years sampled out of 30 since 1992.\n\nCover_prop.sig and Grass_prop.sig is the number of total years significantly below baseline out of n years sampled\n\nGB_TYPE greenbook vegetation management type (A,B,C,D,E).\n\nHolland vegetation classification greenbook assignment.\n\npGrass parcel-average perennial grass proportion of total perennial cover.\n\npShrub parcel-average shrub proportion of total perennial cover.\n\nCover total perennial cover in 2022.\n\nGrass total perennial grass cover in 2022.\n\nShrub total perennial shrub cover in 2022.\n\n\ncodedeltas_ttest_att %>%\n      filter(Cover_sig.counter > 5 | Grass_sig.counter > 5,  Type == 'W') %>%\n      # mutate(p.value = round(p.value,3)) %>%\n      # filter(!Parcel %in% c(\"FSL044\")) %>%\n      select(Parcel,wellfield,GB_TYPE, Holland,Cover.Delta, Grass.Delta,Cover_sig.counter,Grass_sig.counter, n, \n             Cover,Grass,Shrub) %>% \n  gt(groupname_col = \"wellfield\") %>%\n  summary_rows(\n    groups = TRUE,\n    columns = Cover.Delta,\n    fns = list(\n      total = \"sum\"),\n    decimals = 1\n  )\n\n\n\n\n\n\nTable 1:  Wellfield parcels statistically below baseline for the past five years or more. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nBig Pine\n    \n\n\nBGP154\nC\nNevada Saltbush Meadow\n-1.6\n-4.8\n0\n11\n32\n22.6\n3.6\n18.8\n\n\n\nFSP006\nAC\nAlkali Meadow\n-8.0\n-19.5\n1\n32\n32\n15.8\n1.8\n14.0\n\n\ntotal\n—\n—\n—\n−9.6\n—\n—\n—\n—\n—\n—\n—\n\n\nTaboose-Aberdeen\n    \n\n\nBLK021\nB\nNevada Saltbush Scrub\n-15.1\n-9.8\n2\n24\n28\n15.5\n0.7\n14.8\n\n\n\nBLK142\nC\nAlkali Meadow\n-7.8\n-12.4\n2\n12\n29\n18.2\n4.8\n13.4\n\n\n\nTIN050\nC\nAlkali Meadow\n-6.6\n-25.4\n0\n14\n24\n29.7\n8.9\n20.8\n\n\n\nTIN053\nA\nAlkali Meadow\n-4.8\n-18.8\n0\n11\n20\n30.2\n11.4\n18.9\n\n\n\nTIN064\nC\nAlkali Meadow\n-18.1\n-17.8\n3\n25\n25\n13.1\n3.0\n10.1\n\n\ntotal\n—\n—\n—\n−52.4\n—\n—\n—\n—\n—\n—\n—\n\n\nThibaut-Sawmill\n    \n\n\nBLK094\nC\nAlkali Meadow\n-20.8\n-22.5\n22\n22\n32\n20.0\n6.5\n12.3\n\n\n\nBLK099\nC\nAlkali Meadow\n-16.4\n-21.0\n1\n6\n32\n31.6\n19.1\n7.8\n\n\n\nIND026\nC\nAlkali Meadow\n-30.4\n-47.6\n18\n18\n18\n18.6\n1.4\n16.2\n\n\n\nIND029\nC\nAlkali Meadow\n-3.6\n-14.0\n0\n22\n22\n18.4\n0.0\n17.9\n\n\ntotal\n—\n—\n—\n−71.2\n—\n—\n—\n—\n—\n—\n—\n\n\nLaws\n    \n\n\nFSL044\nC\nAlkali Meadow\n-41.5\n-48.8\n11\n12\n19\n27.7\n19.5\n4.3\n\n\n\nFSL054\nD\nModoc Gr Basin Riparian Scrub\n-59.7\n11.9\n17\n0\n17\n30.3\n21.8\n3.2\n\n\n\nLAW035\nC\nAlkali Meadow\n-30.2\n-25.7\n20\n3\n20\n3.0\n1.6\n0.9\n\n\n\nLAW043\nE\nRush Sedge Meadow\n-51.7\n-59.4\n20\n20\n20\n9.4\n0.6\n8.1\n\n\n\nLAW052\nC\nAlkali Meadow\n-20.8\n-22.3\n27\n27\n27\n7.0\n0.0\n7.0\n\n\n\nLAW062\nC\nRabbitbrush Meadow\n-12.0\n-5.6\n5\n14\n29\n9.4\n2.3\n5.3\n\n\n\nLAW065\nA\nAlkali Meadow\n-1.3\n-7.6\n0\n14\n31\n8.4\n0.8\n7.5\n\n\n\nLAW072\nC\nAlkali Meadow\n-36.9\n-51.2\n2\n16\n16\n27.3\n13.0\n11.8\n\n\n\nLAW082\nC\nRabbitbrush Meadow\n-8.7\n-5.7\n2\n27\n27\n7.6\n0.0\n7.5\n\n\n\nLAW085\nC\nAlkali Meadow\n-12.2\n-17.7\n3\n32\n32\n17.9\n12.4\n5.5\n\n\n\nLAW137\nC\nRabbitbrush Meadow\n-3.0\n-8.4\n0\n16\n29\n18.6\n2.6\n15.7\n\n\ntotal\n—\n—\n—\n−278.0\n—\n—\n—\n—\n—\n—\n—\n\n\nIndependence-Oak\n    \n\n\nIND019\nC\nAlkali Meadow\n-48.0\n-33.4\n13\n4\n30\n27.0\n13.6\n9.2\n\n\n\nIND021\nC\nRabbitbrush Meadow\n-39.6\n-21.9\n11\n9\n13\n28.4\n6.1\n21.7\n\n\ntotal\n—\n—\n—\n−87.6\n—\n—\n—\n—\n—\n—\n—\n\n\nSymmes-Shepherd\n    \n\n\nIND139\nC\nNevada Saltbush Meadow\n-27.4\n-13.4\n5\n32\n32\n21.1\n4.6\n16.3\n\n\ntotal\n—\n—\n—\n−27.4\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n\n\ncode# parcel_datatable_chronic"
  },
  {
    "objectID": "posts/lpt-stats/index.html#wellfield-parcels-below-baseline",
    "href": "posts/lpt-stats/index.html#wellfield-parcels-below-baseline",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "5.1 Wellfield Parcels Below Baseline",
    "text": "5.1 Wellfield Parcels Below Baseline\nThese methods automatically flagged parcel in table () that have been statistically below baseline for past 5 consecutive years or more.For the parcels listed here, the measurability of the effect has been determined. The following Green Book procedures concerning Green Book Section IC1b Determining Attributability are provided below.\n“A significant decrease or change or other significant effect on the environment will be mitigated if it is measurable, attributable to groundwater pumping or surface water management practices, and significant” (Greenbook Section I.C.1, Determination of Significant Impacts.)”\nThis is an automated report providing statistics on the annual vegetation monitoring program including statistics described in Green Book BOX I.C.I.a.ii.\nThe Agreement provides that the determination of significance of an impact, and thus, whether it must be mitigated, will be made on a case by case basis."
  },
  {
    "objectID": "posts/lpt-stats/index.html#wellfield-maps",
    "href": "posts/lpt-stats/index.html#wellfield-maps",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n3.4 Wellfield Maps",
    "text": "3.4 Wellfield Maps\n\n3.4.1 Laws\n\ncodepanel_map_lw\n\n\n\nFigure 10: Laws wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right. Parcels statistically deviating from baseline in the current year are boardered in red.\n\n\n\n\n\ncodemake_wellfield_table <- function(data, wf){\ndata %>%\n    filter(Cover_sig.counter > 0 | Grass_sig.counter > 0,  Type == 'W') %>% \n    filter(wellfield == wf) %>%\n      select(Parcel,wellfield,GB_TYPE, Holland,Cover.Delta, Grass.Delta,Cover_sig.counter,Grass_sig.counter, n, \n             Cover,Grass,Shrub) %>% \n  gt(groupname_col = \"wellfield\") %>%\n  summary_rows(\n    groups = TRUE,\n    columns = Cover.Delta,\n    fns = list(\n      Average = \"mean\"),\n    decimals = 1\n  )%>%\n  tab_footnote(\n    footnote = \"Perennial grass cover below baseline for five years or more.\",\n    locations = cells_body(\n      columns = Grass_sig.counter,\n      rows = Grass_sig.counter > 4\n    )\n  )%>%\n  tab_footnote(\n    footnote = \"Total perennial cover below baseline for five years or more.\",\n    locations = cells_body(\n      columns = Cover_sig.counter,\n      rows = Cover_sig.counter > 4\n    )\n  )\n}\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Laws')\n\n\n\n\n\n\nTable 2:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nLaws\n    \n\n\nFSL044\nC\nAlkali Meadow\n-41.5\n-48.8\n\n1 11\n\n2 12\n19\n27.7\n19.5\n4.3\n\n\n\nFSL051\nC\nAlkali Meadow\n-24.0\n-22.7\n2\n2\n25\n34.1\n27.1\n5.6\n\n\n\nFSL053\nC\nAlkali Meadow\n-25.3\n-21.5\n2\n1\n19\n35.4\n30.5\n3.2\n\n\n\nFSL054\nD\nModoc Gr Basin Riparian Scrub\n-59.7\n11.9\n\n1 17\n0\n17\n30.3\n21.8\n3.2\n\n\n\nLAW035\nC\nAlkali Meadow\n-30.2\n-25.7\n\n1 20\n3\n20\n3.0\n1.6\n0.9\n\n\n\nLAW043\nE\nRush Sedge Meadow\n-51.7\n-59.4\n\n1 20\n\n2 20\n20\n9.4\n0.6\n8.1\n\n\n\nLAW052\nC\nAlkali Meadow\n-20.8\n-22.3\n\n1 27\n\n2 27\n27\n7.0\n0.0\n7.0\n\n\n\nLAW062\nC\nRabbitbrush Meadow\n-12.0\n-5.6\n\n1 5\n\n2 14\n29\n9.4\n2.3\n5.3\n\n\n\nLAW065\nA\nAlkali Meadow\n-1.3\n-7.6\n0\n\n2 14\n31\n8.4\n0.8\n7.5\n\n\n\nLAW070\nE\nRush Sedge Meadow\n-52.3\n-58.0\n3\n3\n20\n7.0\n0.0\n4.4\n\n\n\nLAW072\nC\nAlkali Meadow\n-36.9\n-51.2\n2\n\n2 16\n16\n27.3\n13.0\n11.8\n\n\n\nLAW078\nC\nAlkali Meadow\n-23.2\n-23.2\n2\n2\n27\n28.5\n17.8\n5.6\n\n\n\nLAW082\nC\nRabbitbrush Meadow\n-8.7\n-5.7\n2\n\n2 27\n27\n7.6\n0.0\n7.5\n\n\n\nLAW085\nC\nAlkali Meadow\n-12.2\n-17.7\n3\n\n2 32\n32\n17.9\n12.4\n5.5\n\n\n\nLAW105\nC\nAlkali Meadow\n-5.3\n-7.3\n0\n1\n19\n21.1\n9.7\n9.9\n\n\n\nLAW108\nC\nAlkali Meadow\n-19.9\n-30.4\n2\n2\n19\n33.6\n21.9\n5.7\n\n\n\nLAW122\nC\nAlkali Meadow\n-26.4\n-30.4\n1\n2\n31\n33.2\n26.9\n3.8\n\n\n\nLAW137\nC\nRabbitbrush Meadow\n-3.0\n-8.4\n0\n\n2 16\n29\n18.6\n2.6\n15.7\n\n\nAverage\n—\n—\n—\n−25.2\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n\n1 Total perennial cover below baseline for five years or more.\n    \n\n\n2 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n\n3.4.2 Big Pine\n\ncodepanel_map_bp\n\n\n\nFigure 11: Big Pine wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Big Pine')\n\n\n\n\n\n\nTable 3:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nBig Pine\n    \n\n\nBGP088\nB\nNevada Saltbush Scrub\n-1.8\n-3.4\n0\n1\n23\n16.8\n2.1\n14.3\n\n\n\nBGP154\nC\nNevada Saltbush Meadow\n-1.6\n-4.8\n0\n\n1 11\n32\n22.6\n3.6\n18.8\n\n\n\nBGP162\nB\nNevada Saltbush Scrub\n-15.8\n-3.8\n3\n0\n32\n14.6\n1.4\n13.1\n\n\n\nFSP006\nAC\nAlkali Meadow\n-8.0\n-19.5\n1\n\n1 32\n32\n15.8\n1.8\n14.0\n\n\n\nFSP015\nC\nAlkali Meadow\n-15.5\n-9.7\n3\n3\n9\n8.3\n2.8\n5.5\n\n\n\nFSP020\nB\nNevada Saltbush Scrub\n-11.4\n-2.5\n3\n0\n9\n5.6\n0.0\n5.6\n\n\nAverage\n—\n—\n—\n−9.0\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n1 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n3.4.3 Taboose-Aberdeen\n\ncodepanel_map_ta\n\n\n\nFigure 12: Taboose-Aberdeen wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Taboose-Aberdeen')\n\n\n\n\n\n\nTable 4:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nTaboose-Aberdeen\n    \n\n\nBLK006\nA\nDesert Sink Scrub\n-2.7\n-2.5\n0\n1\n6\n13.8\n4.5\n8.9\n\n\n\nBLK008\nC\nAlkali Meadow\n-17.9\n-19.8\n2\n2\n5\n31.7\n12.9\n2.3\n\n\n\nBLK009\nC\nAlkali Meadow\n-13.6\n-11.3\n2\n4\n32\n15.2\n6.7\n8.3\n\n\n\nBLK021\nB\nNevada Saltbush Scrub\n-15.1\n-9.8\n2\n\n1 24\n28\n15.5\n0.7\n14.8\n\n\n\nBLK033\nC\nAlkali Meadow\n1.2\n-5.5\n0\n2\n31\n14.9\n2.5\n11.1\n\n\n\nBLK039\nC\nAlkali Meadow\n-5.0\n-7.7\n0\n2\n31\n16.7\n8.1\n7.8\n\n\n\nBLK044\nC\nRabbitbrush Meadow\n0.8\n-6.1\n0\n2\n32\n23.2\n2.6\n19.1\n\n\n\nBLK142\nC\nAlkali Meadow\n-7.8\n-12.4\n2\n\n1 12\n29\n18.2\n4.8\n13.4\n\n\n\nTIN050\nC\nAlkali Meadow\n-6.6\n-25.4\n0\n\n1 14\n24\n29.7\n8.9\n20.8\n\n\n\nTIN053\nA\nAlkali Meadow\n-4.8\n-18.8\n0\n\n1 11\n20\n30.2\n11.4\n18.9\n\n\n\nTIN064\nC\nAlkali Meadow\n-18.1\n-17.8\n3\n\n1 25\n25\n13.1\n3.0\n10.1\n\n\n\nTIN068\nA\nAlkali Meadow\n-4.1\n-7.7\n0\n\n1 5\n31\n9.2\n1.4\n7.8\n\n\nAverage\n—\n—\n—\n−7.8\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n1 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n3.4.4 Thibaut-Sawmill\n\ncodepanel_map_ts\n\n\n\nFigure 13: Thibaut-Sawmill wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Thibaut-Sawmill')\n\n\n\n\n\n\nTable 5:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nThibaut-Sawmill\n    \n\n\nBLK069\nA\nDesert Sink Scrub\n-4.3\n-2.7\n1\n0\n32\n14.1\n7.7\n6.0\n\n\n\nBLK074\nB\nNevada Saltbush Scrub\n-7.9\n1.8\n2\n0\n31\n23.4\n13.6\n9.5\n\n\n\nBLK075\nC\nAlkali Meadow\n-3.7\n-25.6\n0\n4\n31\n35.1\n10.2\n21.7\n\n\n\nBLK094\nC\nAlkali Meadow\n-20.8\n-22.5\n\n1 22\n\n2 22\n32\n20.0\n6.5\n12.3\n\n\n\nBLK095\nA\nAlkali Meadow\n-3.7\n-7.3\n0\n1\n20\n12.8\n7.0\n5.8\n\n\n\nBLK096\nA\nDesert Sink Scrub\n-11.7\n-3.7\n\n1 5\n0\n19\n9.1\n5.3\n3.9\n\n\n\nBLK099\nC\nAlkali Meadow\n-16.4\n-21.0\n1\n\n2 6\n32\n31.6\n19.1\n7.8\n\n\n\nIND026\nC\nAlkali Meadow\n-30.4\n-47.6\n\n1 18\n\n2 18\n18\n18.6\n1.4\n16.2\n\n\n\nIND029\nC\nAlkali Meadow\n-3.6\n-14.0\n0\n\n2 22\n22\n18.4\n0.0\n17.9\n\n\nAverage\n—\n—\n—\n−11.4\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n\n1 Total perennial cover below baseline for five years or more.\n    \n\n\n2 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n\n3.4.5 Independence-Oak\n\ncodepanel_map_io\n\n\n\nFigure 14: Independence-Oak wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Independence-Oak')\n\n\n\n\n\n\nTable 6:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nIndependence-Oak\n    \n\n\nIND011\nC\nAlkali Meadow\n-2.7\n-13.5\n0\n3\n31\n27.7\n14.5\n11.0\n\n\n\nIND019\nC\nAlkali Meadow\n-48.0\n-33.4\n\n1 13\n4\n30\n27.0\n13.6\n9.2\n\n\n\nIND021\nC\nRabbitbrush Meadow\n-39.6\n-21.9\n\n1 11\n\n2 9\n13\n28.4\n6.1\n21.7\n\n\n\nIND035\nC\nAlkali Meadow\n-13.9\n-22.2\n2\n2\n31\n35.6\n23.8\n7.1\n\n\n\nIND111\nC\nNevada Saltbush Meadow\n-17.7\n0.4\n2\n0\n32\n23.5\n10.5\n11.8\n\n\n\nIND132\nB\nNevada Saltbush Scrub\n-18.8\n-0.3\n2\n3\n32\n14.1\n0.0\n14.1\n\n\n\nIND133\nA\nNevada Saltbush Scrub\n-6.5\n0.0\n1\nNA\n23\n7.0\n0.0\n7.0\n\n\nAverage\n—\n—\n—\n−21.0\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n\n1 Total perennial cover below baseline for five years or more.\n    \n\n\n2 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n\n3.4.6 Symmes-Shepherd\n\ncodepanel_map_ss\n\n\n\nFigure 15: Symmes-Shepherd wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Symmes-Shepherd')\n\n\n\n\n\n\nTable 7:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nSymmes-Shepherd\n    \n\n\nIND124\nB\nNevada Saltbush Scrub\n-22.6\n2.8\n2\n0\n19\n18.4\n2.8\n15.5\n\n\n\nIND139\nC\nNevada Saltbush Meadow\n-27.4\n-13.4\n\n1 5\n\n2 32\n32\n21.1\n4.6\n16.3\n\n\n\nMAN006\nC\nAlkali Meadow\n-7.8\n-5.5\n2\n2\n31\n14.9\n9.7\n5.0\n\n\n\nMAN007\nB\nNevada Saltbush Scrub\n-13.0\n2.0\n2\n0\n32\n15.0\n3.0\n11.0\n\n\nAverage\n—\n—\n—\n−17.7\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n\n1 Total perennial cover below baseline for five years or more.\n    \n\n\n2 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n\n3.4.7 Bairs-George\n\ncodepanel_map_bg\n\n\n\nFigure 16: Symmes-Shepherd wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Bairs-George')\n\n\n\n\n\n\nTable 8:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nBairs-George\n    \n\n\nMAN034\nA\nDesert Sink Scrub\n-6.7\n-3.8\n2\n0\n20\n8.7\n5.6\n3.1\n\n\n\nMAN037\nB\nNevada Saltbush Scrub\n-25.1\n-2.8\n2\n2\n32\n16.9\n0.9\n13.5\n\n\n\nMAN038\nC\nNevada Saltbush Meadow\n-23.5\n-15.0\n1\n1\n5\n25.7\n12.5\n12.1\n\n\n\nMAN042\nA\nRabbitbrush Scrub\n-3.4\n-1.0\n0\n1\n21\n14.6\n0.5\n12.6\n\n\nAverage\n—\n—\n—\n−14.7\n—\n—\n—\n—\n—\n—\n—"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "open-science-notebook",
    "section": "",
    "text": "Blackrock Waterfowl Management Area Flooded Acreage\n\n\n\n\n\n\n\nSentinel2\n\n\nflooded extents\n\n\nwater indices\n\n\nsatellite\n\n\nBlackrock Waterfowl Mangement Area\n\n\nLower Owens River Project\n\n\n\n\nReplacing manual GPS tracklogs with Sentinel 2 multispectral imagery analysis including NIR and SWIR-based Water Indices\n\n\n\n\n\n\nFeb 23, 2023\n\n\nZach Nelson\n\n\n\n\n\n\n  \n\n\n\n\nSeasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9\n\n\n\n\n\n\n\nR\n\n\npython\n\n\nremote sensing\n\n\nEarth Engine\n\n\nGDE\n\n\nNDVI\n\n\nECDF\n\n\ntime series\n\n\nArcGIS Online\n\n\n\n\nApply empirical cumulative distribution function to the 37-year NDVI time series and label years with annual percentile relative the historical range of variability.\n\n\n\n\n\n\nFeb 14, 2023\n\n\nZach Nelson\n\n\n\n\n\n\n  \n\n\n\n\nEvaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094\n\n\n\n\n\n\n\nmitigation\n\n\ncode\n\n\nanalysis\n\n\nrevegetation\n\n\nrestoration\n\n\n\n\n\n\n\n\n\n\n\nJan 27, 2023\n\n\nZach Nelson\n\n\n\n\n\n\n  \n\n\n\n\nVegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022\n\n\n\n\n\n\n\nGreen Book - Box I.C.1.a.ii\n\n\nICWD Annual Report\n\n\n2022\n\n\nvegetation condition\n\n\n\n\nApply automated statistical methods described in Green Book Section I.C.1.a, Determining Measurability and Box I.C.1.a.ii Transects for monitoring vegetation response to pumping to the line point data each year after the field data is digitally entered - producing a list of parcels below baseline that are to be further evaluated under Green Book Section I.C.1.a, Determining measurability using remote sensing methods and then Green Book Section I.C.1.b, Determining Attributability to elucidate the cause of apparent changes.\n\n\n\n\n\n\nDec 14, 2022\n\n\nZach Nelson\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSteps to update ICWD’s monthly volumetric flow (pumping, surface water, valley totals and means) database from LADWP water-year data ransfer\n\n\n\n\n\n\n\nR\n\n\nhydrology\n\n\ntotals and means\n\n\npumping\n\n\nmonthly flows\n\n\nLADWP data\n\n\nOVGA\n\n\ntime series\n\n\n\n\nProcedure in R to process monthly volumetric flow data provided by LADWP to ICWD each December to January. Output options include formatting required for OVGA volumetric flow data imports\n\n\n\n\n\n\nDec 9, 2022\n\n\nZach Nelson\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nGreenbook section III.A.1. Calculation of Vegetation Water Requirement\n\n\n\n\n\n\n\nR\n\n\nOn/Off Pumping Management\n\n\nGreen Book\n\n\nVegetation Water Requirement\n\n\npoint frame\n\n\nLAI\n\n\n\n\nMethods recorded in code to make future improvements accessible\n\n\n\n\n\n\nDec 5, 2022\n\n\nZach Nelson\n\n\n\n\n\n\n  \n\n\n\n\nSteps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer\n\n\n\n\n\n\n\nR\n\n\nhydrology\n\n\nmonitoring wells\n\n\nLADWP data\n\n\nOVGA\n\n\ntime series\n\n\n\n\nProcedure in R to process monitoring well data provided by LADWP to ICWD each January. Manual reads by ICWD are also incorporated into the master database. Output options include formatting required for OVGA monitoring well data imports\n\n\n\n\n\n\nDec 5, 2022\n\n\nZach Nelson\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About this notebook",
    "section": "",
    "text": "I created this repository to make it easy and fast to share data analyses with coworkers at the Inyo County Water Department, to make it easy on my future self to remember what I’ve done, and in general to promote some key practices leading to reproducible research, and open science. Those include:\n\ninteractive development environment Rstudio IDE\nreproducible analysis targets R package\nreproducible and parameterized reports quarto\nquick and easy sharing of results through github pages\ncollaboration through the github version control.\n\nInyo County Water Department’s official reporting is hosted at inyowater.org in pdf report format. These posts in html format will be primarily intermediate data products and analytics output in the form of a short communication1. Posts, or notebook entries will be typically limited to just code, analytics, visualizations, summaries and models, informational metadata on data updates, tutorials on commonly asked questions relating to data queries, GIS, and statistical and process-based models. Most of these posts will be derived from a targets pipeline and a quarto document. One hope is that they may be generally useful in the future as posts addressing frequently asked questions (FAQs) build in number.\nThe html format opens up the realm of interactive tables and figures and maps, and dispenses with the necessity of worrying about typesetting (i.e. figures floating to the wrong sections, tables cut in half etc). Most importantly, the code and data live with this html output, as in -if the data changes the html document is dynamically updated- but only if specified to do so. This github pages website from the ‘open-science-notebook’ github repository has a blog structure, allowing the dates from the posts/analyses to be aggregated into the listings page, where keywords from individual posts can be used to filter the posts according to topic (project name, search term) to help navigate to a filtered set of posts in lieu of scrolling chronologically.\n\n\n\nFootnotes\n\n\nThis is public github repository which allows the free hosting of this website on the github pages web hosting platform - associated with every github repository↩︎"
  },
  {
    "objectID": "posts/lpt-stats/index.html#targets-data-pipeline",
    "href": "posts/lpt-stats/index.html#targets-data-pipeline",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "targets data pipeline",
    "text": "targets data pipeline\nThe Targets R package is a data pipeline toolkit allowing dependency awareness and automatic rerunning of code that is downstream from dependency changes. A single _targets.R script was constructed linking datasets to the pipeline. The functions to process and analyze the data of this pipeline are maintained in a single file from code/R/functions.R and the _targets.R script sources these functions to make the pipeline.\nThe targets package tar_visnetwork() function output shows the data pipeline in an interactive format. Links are dependencies between functions and targets (input files, intermediate data transformations, model objects, plots and tables etc) specifying which targets are upstream from others and which are out of date and which downstream dependencies need to be rerun for the output to stay current. In the interactive viewer, functions are shown as triangles and targets are shown as circles. Fill color indicates whether or not upstream dependencies are ‘Up to date’ (green) or ‘Outdated’ (blue). Only the downstream dependencies of updated targets or functions will be re-evaluated when the pipeline is rerun using tar_make().\n\n\nShow the code\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_visnetwork())\n\n\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.0      ✔ purrr   0.3.5 \n✔ tibble  3.1.8      ✔ dplyr   1.0.10\n✔ tidyr   1.2.1      ✔ stringr 1.5.0 \n✔ readr   2.1.3      ✔ forcats 0.5.2 \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nhere() starts at /Users/zac/Documents/projects/open-science-notebook\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\nLoading required package: ggpp\n\nAttaching package: ‘ggpp’\n\nThe following object is masked from ‘package:ggplot2’:\n\n    annotate\n\n\n\n\n\n\n\n_targets.R View functions.R\n\n\nShow the code\n# *Increasing opportunities for collaboration while promoting scientific innovation, transparency, and reproducibility* is a primary objective of NASA's Open-Source Science Initiative, TOPS (Transform to OPen Science). Within the TOPS mission, NASA is designating **2023 as the Year Of Open Science**, a community initiative to spark change and inspire open science engagement through events and activities that will accelerate adoption of open science practices. TOPS is only the starting point; **the science community needs agencies and organizations to make a long-term commitment to support building an inclusive open science community over the next decade.**\n\n\n\nThe targets R package is a Make-like pipeline toolkit for statistics and data science in R. With targets, you can maintain a reproducible workflow without repeating yourself. targets skips costly runtime for tasks that are already up to date, runs the necessary computation with implicit parallel computing, and abstracts files as R objects. A fully up-to-date targets pipeline is tangible evidence that the output aligns with the code and data, which substantiates trust in the results. targets github"
  },
  {
    "objectID": "posts/lpt-stats/index.html#baseline-parcels",
    "href": "posts/lpt-stats/index.html#baseline-parcels",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "Baseline Parcels",
    "text": "Baseline Parcels\nFrom September 1984 to Nov 1987, LADWP inventoried and mapped vegetation on LA-owned lands in Owens Valley into 2126 polygons of similar vegetation type (223,168 acres). The Green Book vegetation monitoring program focuses on a subset of these groundwater-dependent parcels (Green Book types B, C, D and some E) that are affected by groundwater pumping from the unconfined shallow aquifer."
  },
  {
    "objectID": "posts/lpt-stats/index.html#monitoring-parcels",
    "href": "posts/lpt-stats/index.html#monitoring-parcels",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "Monitoring Parcels",
    "text": "Monitoring Parcels\nParcels were initially selected based on meeting one or more of the following criteria: (1) the parcel contained a permanent monitoring site where soil/vegetation water balance is calculated; (2) baseline data was collected for the parcel; (3) the parcel was in close proximity to a pumping well; (4) information of past and current land use for the parcel was available.\nThe number of parcels sampled as part of the monitoring program has varied over the years in response to staffing availability but has ranged from 30-150 with 192 in total sampled at least one year since 1992.\n\n\nShow the code\n# Parcel Attributes\nn_parcels_all_years  %>% \n  datatable(extensions = c('Buttons','FixedColumns'),\n            filter = c(\"top\"),\n            options = list(\n              dom = 'Bfrtip',\n              buttons = c('copy', 'csv', 'excel', 'pdf', 'print'),\n              scrollX = TRUE,\n              fixedColumns = list(leftColumns = 2, rightColumns = 0),\n              pageLength = 5, \n              autoWidth = TRUE)\n            )"
  },
  {
    "objectID": "posts/lpt-stats/index.html#cover-change",
    "href": "posts/lpt-stats/index.html#cover-change",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n4.3 Cover Change",
    "text": "4.3 Cover Change\nFor each parcel, - one row each for total perennial cover change and grass cover change. - statistical significance ‘significant’ or not significant ‘ns’ - effect size (estimate) in units of cover (0-100) current cover - 2022 (estimate1) and baseline cover (estimate2) - statistical method (method - Welch Two Sample t-test or One Sample t-test - depending on the baseline sample size following Box I.C.1.a.ii) - current year sample size (n.x) - baseline sample size (n.y) - test statistic (statistic) - p-value (p.value).\n\ncodeparcel_year_meta_combined_results %>% \n  filter(Year.x == cYear) %>% \n  select(Parcel,cover_type,significance,  estimate, estimate1, estimate2, method,n.x, n.y, statistic, p.value) %>%  \n  mutate(across(estimate:estimate2, round, 0)) %>%\n  mutate(across(statistic:p.value, round, 3)) %>% \n  datatable(extensions = c('Buttons','FixedColumns'),\n            filter = c(\"top\"),\n            options = list(\n              dom = 'Blfrtip',\n              buttons = c('copy', 'csv', 'excel', 'pdf', 'print'),\n              scrollX = TRUE,\n              fixedColumns = list(leftColumns = 2, rightColumns = 0),\n              pageLength = 5, \n              autoWidth = TRUE)\n            )"
  },
  {
    "objectID": "posts/lpt-stats/index.html#gb-section-i.c.1.b.-determining-attributability",
    "href": "posts/lpt-stats/index.html#gb-section-i.c.1.b.-determining-attributability",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "GB Section I.C.1.b. Determining Attributability",
    "text": "GB Section I.C.1.b. Determining Attributability\nOnce it has been determined that there has been a measurable vegetation decrease or change, it must be determined whether the impact is attributable to groundwater pumping or to changes in surface water management practices.\nA determination of whether the impact is attributable to groundwater pumping or changes in surface water management practices will be based on evaluation and consideration of relevant factors, which may include:\nRecent and historic water table changes and response to pumping as measured at the monitoring site(s) closest to the affected area.\nComparison of soil water, depth to water, and degree of vegetation decrease or change at the affected area and at the control site(s) determined to have similar soil type and vegetation composition and cover.\nComparison of water table depths in the affected area with water table depths in the general region with soils, vegetation cover, and vegetation composition comparable to the affected site. New shallow piezometers may be installed and monitored, if necessary, to obtain relevant water table data.\nRainfall differences that may exist between the control site(s) and the affected area.\nEvaluation of the extent to which other factors unrelated to the effects of groundwater pumping may have contributed to the vegetation change or decrease. Such factors include drought, wet/dry climatic cycles, flooding, fungal blight, range management practices, wildfire, and off road vehicles.\nChange in soil water within the root zone caused by a pumping induced change in the water table.\nReview of surface water operations to determine if changes from past practices contributed to vegetation changes.\nA decrease in flow from a spring or flowing well.\nIf a decrease in flow from a spring or flowing well occurs, the Technical Group shall determine whether the decrease corresponds to changes in groundwater pumping and runoff. If, on the basis of qualitatively evaluating the data, it appears that the decreased flow corresponds with increased pumping and decreased runoff, the Technical Group shall conduct a quantitative analysis of the data, using one or both of the methods described below, or any other method developed by the Technical Group:\nThe Technical Group shall perform a regression analysis of the relevant groundwater level, spring flow, runoff/recharge, and pumping data associated with the site (an example of applying this technique is found in the Technical Group’s analysis of the water flow decrease at Reinhackel Spring).\nThe Technical Group shall use the groundwater model of the area in question as a supplement to the regression analysis, or as a substitute for the regression analysis if the data are inadequate to develop a regression model. The model would be applied by evaluating groundwater level and spring flow changes in the area under the relevant runoff/recharge conditions that existed under pumping and nonpumping scenarios. For example, the runoff/recharge conditions that existed during the period that the suspected impact occurred would be quantified and entered into the model. The pumping that occurred at that time would also be entered. Results of this run would be compared to a run with the identical runoff/recharge conditions and no pumping. Evaluation of the results would include an analysis of the difference in water levels and/or spring flow in the area to determine if the change that is calculated by the model is sufficient to conclude a pumping related impact, given the assumptions and limitations of the model.\n1.3.1.3 (I.C.1.c.) Determining Degree of Significance Following a determination that there has been a measurable decrease in vegetation cover, and that the decrease or change was attributable to either groundwater pumping or surface water management practices, the following analysis shall be conducted to determine whether the measurable decrease or change is significant. Each of the following factors shall be evaluated and a determination made as to whether or not the impact is significant:\nThe size, location, and use of the area that has been affected.\nThe degree of the decrease, change or effect within the affected area.\nThe permanency of the decrease, change, or effect.\nWhether the decrease, change, or effect causes a violation of air quality standards.\nThe cumulative effect of the impact when judged in relation to all such areas of the Owens Valley.\nThe value of existing enhancement and mitigation projects addressing the environmental consequences of similar impacts.\nThe impact, if any, on rare or endangered species and on other vegetation of concern.\nWhether the decrease, change, or effect affects human health.\n1.3.1.4 (I.C.1.d.) Determining Significance of Other Effects on the Environment Any other impacts, including decreases in recreational opportunities and decreases in wildlife habitats, shall be examined by the Technical Group in a similar manner to the procedures set forth above or by other appropriate procedures to determine whether a significant effect on the environment has occurred that is attributable to groundwater pumping or changes in surface water management practices.\n1.3.2 (I.C.2.) Development and Implementation of a Mitigation Plan If it is established that there has been a significant decrease in live vegetation cover, or a significant amount of vegetation has changed from one vegetation classification to a lower classification, or any other significant effect on the environment has occurred, then any such significant impact will be mitigated as soon as a reasonable and feasible mitigation plan is developed. The Technical Group is responsible for developing a mitigation plan for the affected area, and the Department will commence implementation of the plan within 12 months after the significant impact has been established. A written mitigation plan will be prepared by the Technical Group and submitted to the Standing Committee during this 12 month period; however, the Technical Group is not precluded from implementing any necessary interim mitigation measures during this period.\n1.3.2.1 (I.C.2.a.) Mitigation plan goals In developing a mitigation plan, the Technical Group shall first establish a goal for the plan in conformance with the goals and principles of the Agreement. Thus, if there has been a significant decrease in live perennial vegetation cover or a change in a significant amount of vegetation from one classification to another, a primary goal of the plan would be to avoid causing further decreases or changes.\nGenerally, if there has been a significant decrease in vegetation live cover, the preferred goal of the plan would be to restore the same type of perennial vegetation cover in the affected area; and, if there has been a significant change in vegetation type, the preferred goal of the plan would be to restore vegetation to a vegetation community that falls within the type classification depicted on the vegetation management map. If any other significant effect on the environment occurs, the goal of the plan would be to reduce the impact to a level that is no longer significant.\nGenerally, compensatory mitigation (compensating for an impact to the environment by improving or enhancing an area located away from the affect area) would not be a preferred goal of a mitigation plan.\n1.3.2.2 (I.C.2.b.) Mitigation strategy In selecting the means of achieving the goals of the mitigation plan, the Technical Group will consider the feasible alternatives. When it is determined that the expertise of a consultant would be beneficial, such consulting services may be retained.\nAlternative means of achieving the mitigation goal that will be considered include: If the impact is attributable to groundwater pumping, cessation of groundwater pumping from wells that affect the impacted area would be the first consideration for mitigation. Also considered will be a change in the future management of groundwater pumping from the well to avoid F repetition of the impact.\nSurface water application to repair, rehabilitate, and/or restore the impacts will be considered as an alternative. Any water supply needed for the proposed mitigation shall be evaluated as to its potential for inducing further adverse environmental impacts.\nRevegetation of the affected environment shall be considered as an alternative. Generally, the preferred goal of revegetation would be to restore vegetation cover to the ecological viability which existed prior to the impact. A primary consideration in revegetation would be to use native species which grow in Owens Valley. Revegetation efforts will incorporate procedures to control weeds and fugitive dust. Full restoration may require a long period of time.\n1.3.2.3 (I.C.2.c.) Mitigation reporting/monitoring program As part of each mitigation plan, the Technical Group shall develop a reporting and monitoring program. At least once per year, the Technical Group shall report, in writing to the Standing Committee, on the effectiveness of the mitigation plan in achieving its goal.\nShould a mitigation plan fail to substantially achieve its goals, the Technical Group shall implement alternative, feasible mitigation, if any exists, that will achieve the goals. If no such alternative exists, a new mitigation goal will be developed and implemented for the afflicted area. The Technical Group shall report the change in writing to the Standing Committee, together with reasons for the change, and a new mitigation monitoring and reporting program will be adopted by the Technical Group.\n1.3.2.4 (I.C.2.d.) Forecasting impacts and avoidance If, through seasonal water balance calculations or through other means, the Technical Group projects that significant decreases or changes in vegetation could occur, the Technical Group will take such action as it deems feasible and necessary to avoid the projected impact. Such action would be in addition to the provisions for automatic well turn off."
  },
  {
    "objectID": "posts/laws-reveg/index.html",
    "href": "posts/laws-reveg/index.html",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "",
    "text": "code\ngba_controls = c(\"LAW012\",\n\"LAW024\",\n\"LAW028\",\n\"LAW048\",\n\"LAW049\",\n\"LAW091\",\n\"LAW093\",\n\"LAW117\",\n\"LAW130\",\n\"LAW134\",\n\"PLC211\",\n\"LAW029\",\n\"LAW039\",\n\"LAW069\",\n\"LAW104\",\n\"LAW119\",\n\"PLC202\",\n\"PLC219\",\n\"PLC227\",\n\"PLC230\"\n)\n\n\nInyo County Water Departmemnt (ICWD) received Los Angeles Department of Water and Power’s (LADWP) report entitled “Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094” in November, 2022. The content of that report informs that in summer of 2022, LADWP and consultants measured transects in Laws 90, 94, 95, and 129 and determined 2003 revegetation goals met - which in turn started the two-year period of irrigation cessation - after which transects will be remeasured in 2024 to either declare project completion if goals have been sustained or continue monitoring until goals have been sustained for two years.\n\n“If a parcel meets the goals after the two year rest, no further revegetation activities will be necessary and the parcel will be considered complete”. - LADWP 2022\n\nData supporting the report collected by LADWP in summer 2022 was received by ICWD staff in a digital excel file January 27th 2023.\nThe purpose of this report is to:\n\nevaluate the data provided by LADWP in reference to the 2003 plan1\ngraphically present species composition by transect\nmap the spatial distribution of species\npropose repeatable uav monitoring to document successional patterns\n\n\n\n\nAfter examining the data provided to ICWD against the 2003 MND Revegetation Plan revegetation goals, LADWP’s reporting comports with ICWD’s independent data summaries in that cover goals and species richness was satisified in 2022 based on LADWP’s data collection see Table 1 for an overview of cover values for all parcels. Species level tables, charts and spatial maps are located in parcel sections below: Laws 90 (Table 2, Figure 1, Figure 2), Laws 95 (Table 3, Figure 3, Figure 4), Laws 94 (Table 4, Figure 5, Figure 6), and Laws 129 (Table 5, Figure 7, Figure 8 ).\ngraphical representation of species composition by transect shows dominance of one or two species in each parcel.\n\nRecommendations\nICWD requests to take part in the field sampling in 2024. In addition to this, ICWD will acquire annual UAV-aerial imagery to document vegetation changes in 2023, 2024 and 2025. A subset of sampling will be conducted in 2025 by ICWD to verify cover goals have been met after two full growing seasons without irrigation."
  },
  {
    "objectID": "posts/laws-reveg/index.html#laws-90-94-94",
    "href": "posts/laws-reveg/index.html#laws-90-94-94",
    "title": "Laws Revegetation",
    "section": "Laws 90, 94, 94",
    "text": "Laws 90, 94, 94\n\n\ncode\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(species))\nreveg_data <- read_csv(here('data','laws_reveg','laws_reveg_data_2022.csv'))\nreveg_xy <- read_csv(here('data','laws_reveg','laws_reveg_transects.csv'))\n\nreveg_sp_count_xy <- reveg_data %>% left_join(reveg_xy, by = c(\"parcel\",\"transect\"))\n\n\n\n# str(rscxy)\n# st_crs(rscxy)\nreveg_crs <- st_crs(parcels_shp)\nrscxy <- st_as_sf(reveg_sp_count_xy, coords = c(\"x\", \"y\"), crs =reveg_crs)\n\nr1 <- rscxy %>% left_join(species, by = c(\"species\" = \"Code\"))\n\n# r2 <- r1 %>% select(Species, CommonName, Order, Family, Genus, Lifecycle, Lifeform, Veg_Type, source, source.abr, Phreatophyte)\n\n\nr_n <- r1 %>% filter(parcel %in% c(\"LAW090\",\"LAW095\",\"LAW094\"))\n\nrlaw90<- r1 %>% filter(parcel %in% c(\"LAW090\"))\nrlaw95<- r1 %>% filter(parcel %in% c(\"LAW095\"))\nrlaw94<- r1 %>% filter(parcel %in% c(\"LAW094\"))\n\nrlaw118_129<- r1 %>% filter(parcel %in% c(\"LAW118\",\"LAW129\"))\n\n\nr_s <- r1 %>% filter(!parcel %in% c(\"LAW090\",\"LAW095\",\"LAW094\"))\n# library(leaflet)\n# pal = colorNumeric(\"RdYlBu\", domain = rscxy$cover)\n# leaflet(data = rscxy) |> \n#   addProviderTiles(providers$CartoDB.Positron) |>\n#   addCircles(col = ~pal(cover), opacity = 0.9) |> \n#   # addPolygons(data = lnd, fill = FALSE) |> \n#   addLegend(pal = pal, values = ~cover) |> \n#   # setView(lng = -0.1, 51.5, zoom = 12) |> \n#   addMiniMap()"
  },
  {
    "objectID": "posts/laws-reveg/index.html#law090",
    "href": "posts/laws-reveg/index.html#law090",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "LAW090",
    "text": "LAW090\n\n\n\nTransect photo taken July 25 2022.\n\n\n\nThe goal is a native perennial vegetation cover of at least 10% by the year 2013 composed of at least ten different native species (including a native grass). For parcel 90, there should be at least three “hits” for at least six different native perennial species out of the total of all the readings of all the permanent transects in the parcel. The other four native perennial species should be observed as present on the parcel, but do not have to be “hit” on any transect.-2003 Plan\n\n\n2003 Cover Goal: 10% cover – Actual in 2022: - 16% cover\n2003 Species Goal: 10 species – Actual on transect 2022: 134\n2003 Composition Goal: 6 species with three hits – Actual in 2022: 10 species with three hits (0.075% cover each)\n\n\n\n\n\n\n\nTable 2:  Species detected on transects in Laws 90 -(common name and taxonomic name). The parcel average for each species (Percent_Cover) is summed to annual and perennial groups(total) and the number of species (n) in each group is computed. Percent cover values are color-coded if they are above the parcel goal of 0.075% cover - Ranges from Orange >= 0.075% to Green at 10% cover. Values are rounded for brevity to focus on the dominant cover of the parcel.Gray indicates below the 3 hit threshold and these species are not counted toward the ‘6 species with three hits criteria’ but are counted toward the ‘10 species goal’. \n  \n  \n    \n      \n      CommonName\n      Species\n      Percent_Cover\n    \n  \n  \n    \n      Perennial\n    \n    \nsaltbush, Allscale\nAtriplex polycarpa\n\n  \n    \n    6\n  \n\n    \nsaltbush, Fourwing\nAtriplex canescens\n\n  \n    \n    4\n  \n\n    \nsaltbush, Nevada/Torrey's\nAtriplex torreyi\n\n  \n    \n    2\n  \n\n    \nrabbitbrush, Common\nEricameria nauseosa\n\n  \n    \n    2\n  \n\n    \nWinterfat\nKrascheninnikovia lanata\n\n  \n    \n    0\n  \n\n    \nGreasewood\nSarcobatus vermiculatus\n\n  \n    \n    0\n  \n\n    \nsacaton, Alkali\nSporobolus airoides\n\n  \n    \n    0\n  \n\n    \ncottonwood, Fremont's /Alamo\nPopulus fremontii\n\n  \n    \n    0\n  \n\n    \nsagebrush, Big\nArtemisia tridentata\n\n  \n    \n    0\n  \n\n    \nheliotrope, Salt\nHeliotropium curassavicum\n\n  \n    \n    0\n  \n\n    \nricegrass, Indian\nAchnatherum hymenoides\n\n  \n    \n    0\n  \n\n    \naster, Shrubby alkali\nMachaeranthera carnosa\n\n  \n    \n    0\n  \n\n    \nindigo bush, Northern Mojave\nPsorothamnus arborescens var. minutifolius\n\n  \n    \n    0\n  \n\n    total\n—\n—\n15.7\n    n\n—\n—\n13.0\n    \n      Annual\n    \n    \nTumbleweed /thistle, Russian\nSalsola tragus\n\n  \n    \n    4\n  \n\n    \nbassia, Fivehook\nBassia hyssopifolia\n\n  \n    \n    0\n  \n\n    total\n—\n—\n4.2\n    n\n—\n—\n2.0\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nFigure 1: LAW090 species composition by transect\n\n\n\n\n\n\n\n\n\nFigure 2: Laws 90 transect locations, symbol size is scaled to species % cover and the overall map is faceted by species to view the spatial distribution of each species detected in the revegetation project."
  },
  {
    "objectID": "posts/laws-reveg/index.html#law095",
    "href": "posts/laws-reveg/index.html#law095",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "LAW095",
    "text": "LAW095\n\n\n\nTransect photo taken July 20 2022.\n\n\n\nThe goal is a native perennial vegetation cover of at least 10% by the year 2013 composed of at least ten different native species (including a native grass). For parcels 94 and 95, there should be at least two “hits” for at least six different native perennial species out of the total of all the readings of all the permanent transects in the parcel. The other four native perennial species should be present on the parcel, but do not have to be “hit” on any transect.-2003 Plan\n\n\n2003 Cover Goal: 10% cover – Actual in 2022: - 12% cover\n2003 Species Goal: 10 species – Actual on transect 2022: 105\n2003 Composition Goal: 6 species with two hits – Actual in 2022: 8 species > two hits (0.05% cover each)\n\n\n\n\n\n\n\nTable 3:  Laws 95 species cover average totaled by lifeform (annual, perennial) and color coded from orange <1% cover but above 0.05% cover to green above 10%. Gray indicates below the 2 hit threshold. \n  \n  \n    \n      \n      CommonName\n      Species\n      Percent_Cover\n    \n  \n  \n    \n      Perennial\n    \n    \nsaltbush, Allscale\nAtriplex polycarpa\n\n  \n    \n    4\n  \n\n    \nsaltbush, Fourwing\nAtriplex canescens\n\n  \n    \n    3\n  \n\n    \nrabbitbrush, Common\nEricameria nauseosa\n\n  \n    \n    2\n  \n\n    \nsaltbush, Nevada/Torrey's\nAtriplex torreyi\n\n  \n    \n    1\n  \n\n    \nsacaton, Alkali\nSporobolus airoides\n\n  \n    \n    1\n  \n\n    \nSaltgrass\nDistichlis spicata\n\n  \n    \n    0\n  \n\n    \nBurrow-bush\nAmbrosia dumosa\n\n  \n    \n    0\n  \n\n    \nwildrye, Beardless/Creeping\nLeymus triticoides\n\n  \n    \n    0\n  \n\n    \nalyssum, Desert\nLepidium fremontii\n\n  \n    \n    0\n  \n\n    \nwildrye, Great Basin\nLeymus cinereus\n\n  \n    \n    0\n  \n\n    total\n—\n—\n12.2\n    n\n—\n—\n10.0\n    \n      Annual\n    \n    \nTumbleweed /thistle, Russian\nSalsola tragus\n\n  \n    \n    3\n  \n\n    total\n—\n—\n2.8\n    n\n—\n—\n1.0\n    \n      NA\n    \n    \nNA\nNA\n\n  \n    \n    0\n  \n\n    total\n—\n—\n0.0\n    n\n—\n—\n1.0\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nFigure 3: LAW095 species composition by transect\n\n\n\n\n\n\n\n\n\nFigure 4: Laws 95 transect locations, symbol size is scaled to species % cover and the overall map is faceted by species to view the spatial distribution of each species detected in the revegetation project."
  },
  {
    "objectID": "posts/laws-reveg/index.html#law094",
    "href": "posts/laws-reveg/index.html#law094",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "LAW094",
    "text": "LAW094\n\n\n\nTransect photo taken July 26 2022.\n\n\n\nThe goal is a native perennial vegetation cover of at least 10% by the year 2013 composed of at least ten different native species (including a native grass). For parcels 94 and 95, there should be at least two “hits” for at least six different native perennial species out of the total of all the readings of all the permanent transects in the parcel. The other four native perennial species should be present on the parcel, but do not have to be “hit” on any transect.-2003 Plan\n\n\n2003 Cover Goal: 10% cover – Actual in 2022: - 11% cover\n2003 Species Goal: 10 species – Actual on transect 2022: 96\n2003 Composition Goal: 6 species with two hits – Actual in 2022: 9 species > two hits (0.05% cover each)\n\n\n\n\n\n\n\nTable 4:  Laws 94 species cover average totaled by lifeform (annual, perennial) and color coded from orange <1% cover but above 0.05% cover to green above 10%. Gray indicates below the 2 hit threshold. \n  \n  \n    \n      \n      CommonName\n      Species\n      Percent_Cover\n    \n  \n  \n    \n      Annual\n    \n    \nTumbleweed /thistle, Russian\nSalsola tragus\n\n  \n    \n    6\n  \n\n    total\n—\n—\n6.0\n    n\n—\n—\n1.0\n    \n      Perennial\n    \n    \nsaltbush, Fourwing\nAtriplex canescens\n\n  \n    \n    5\n  \n\n    \nsaltbush, Allscale\nAtriplex polycarpa\n\n  \n    \n    3\n  \n\n    \nrabbitbrush, Common\nEricameria nauseosa\n\n  \n    \n    2\n  \n\n    \nsacaton, Alkali\nSporobolus airoides\n\n  \n    \n    1\n  \n\n    \nsaltbush, Nevada/Torrey's\nAtriplex torreyi\n\n  \n    \n    1\n  \n\n    \nWinterfat\nKrascheninnikovia lanata\n\n  \n    \n    0\n  \n\n    \nindigo bush, Northern Mojave\nPsorothamnus arborescens var. minutifolius\n\n  \n    \n    0\n  \n\n    \nwildrye, Beardless/Creeping\nLeymus triticoides\n\n  \n    \n    0\n  \n\n    \nSaltgrass\nDistichlis spicata\n\n  \n    \n    0\n  \n\n    total\n—\n—\n10.7\n    n\n—\n—\n9.0\n    \n      NA\n    \n    \nNA\nNA\n\n  \n    \n    0\n  \n\n    total\n—\n—\n0.2\n    n\n—\n—\n1.0\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\nFigure 5: LAW094 species composition by transect\n\n\n\n\n\n\n\n\n\nFigure 6: Laws 94 transect locations, symbol size is scaled to species % cover and the overall map is faceted by species to view the spatial distribution of each species detected in the revegetation project."
  },
  {
    "objectID": "posts/laws-reveg/index.html#law118law129",
    "href": "posts/laws-reveg/index.html#law118law129",
    "title": "Laws Revegetation",
    "section": "LAW118/LAW129",
    "text": "LAW118/LAW129\n\n\ncode\n#| column: screen\n#| fig-column: screen\n#| fig-height: 12\n#| fig-width: 12\nggplot()+\n  geom_sf(data=rlaw118_129, aes(size=cover,colour = 'red'))+\n  coord_sf()+\n  facet_wrap(Provenance~Veg_Type+CommonName+Species)\n\n\n\n\n\nLaws 129 and one transect from 118, symbol size is scaled to species % cover and the overall map is faceted by species to view the spatial distribution of each species detected in the revegetation project."
  },
  {
    "objectID": "posts/laws-reveg/index.html#data-import-and-processing",
    "href": "posts/laws-reveg/index.html#data-import-and-processing",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Data Import and Processing",
    "text": "Data Import and Processing\nThe xy coordinates of the transects provided were joined to the field data consisting of parcel-transect-species-count row combinations allowing the spatial distribution of the plant species across the transect network to be plotted.\n\n\ncode\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(species))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcels_shp))\n# withr::with_dir(rprojroot::find_root('_targets.R'),tar_load(species))\n\n# grab the crs from another shapefile in NAD83 z11 to apply to the xy coordinates.\nreveg_crs <- st_crs(parcels_shp)\n\n\nreveg_data <- read_csv(here('data','laws_reveg','laws_reveg_data_2022a.csv'))\nreveg_xy <- read_csv(here('data','laws_reveg','laws_reveg_transects.csv'))\n\nreveg_sp_count_xy <- reveg_data %>% left_join(reveg_xy, by = c(\"parcel\",\"transect\"))\n\nr2 <- reveg_sp_count_xy %>% left_join(species, by = c(\"species\" = \"Code\"))\n\n\n# with spatial points for projecting on lat long map\nrscxy <- st_as_sf(reveg_sp_count_xy, coords = c(\"x\", \"y\"), crs =reveg_crs)\n\nr1 <- rscxy %>% left_join(species, by = c(\"species\" = \"Code\")) %>% mutate(percent_cover = cover*.5)\n\n\nrlaw90<- r1 %>% filter(parcel %in% c(\"LAW090\"))\nrlaw95<- r1 %>% filter(parcel %in% c(\"LAW095\"))\nrlaw94<- r1 %>% filter(parcel %in% c(\"LAW094\"))\nrlaw118_129<- r1 %>% filter(parcel %in% c(\"LAW118\",\"LAW129\"))\n\nr_n <- r1 %>% filter(parcel %in% c(\"LAW090\",\"LAW095\",\"LAW094\"))\nr_s <- r1 %>% filter(!parcel %in% c(\"LAW090\",\"LAW095\",\"LAW094\"))"
  },
  {
    "objectID": "posts/laws-reveg/index.html#law118-and-law129",
    "href": "posts/laws-reveg/index.html#law118-and-law129",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "LAW118 and LAW129",
    "text": "LAW118 and LAW129\n\n\n\nTransect Photo taken July 20th 2022\n\n\n\nFor parcel 129/118, there should be at least two “hits” for at least five different native perennial species out of the total of all the readings of all the permanent transects in the parcels. The other three native perennial species should be present on the parcel, but do not have to be “hit” on any transect. – 2003 Plan\n\n\n2003 Cover Goal: 10% cover – Actual in 2022: - 17% cover\n2003 Species Goal: 8 species – Actual on transect 2022: 97\n2003 Composition Goal: 5 species with two hits – Actual in 2022: 8 species > two hits (0.05% cover each)\n\n\n\n\n\n\n\n\nTable 5:  Laws 129 species species cover average totaled by lifeform (annual, perennial) and color coded from orange <1% cover but above 0.05% cover to green above 10%. Gray indicates below the 2 hit threshold. \n  \n  \n    \n      \n      CommonName\n      Species\n      Percent_Cover\n    \n  \n  \n    \n      Perennial\n    \n    \nrabbitbrush, Common\nEricameria nauseosa\n\n  \n    \n    11\n  \n\n    \nsaltbush, Fourwing\nAtriplex canescens\n\n  \n    \n    3\n  \n\n    \nsaltbush, Allscale\nAtriplex polycarpa\n\n  \n    \n    2\n  \n\n    \nbindweed, Field\nConvolvulus arvensis\n\n  \n    \n    0\n  \n\n    \nWinterfat\nKrascheninnikovia lanata\n\n  \n    \n    0\n  \n\n    \nweed, Poverty\nIva axillaris\n\n  \n    \n    0\n  \n\n    \nsacaton, Alkali\nSporobolus airoides\n\n  \n    \n    0\n  \n\n    \nsaltbush, Nevada/Torrey's\nAtriplex torreyi\n\n  \n    \n    0\n  \n\n    \nSaltgrass\nDistichlis spicata\n\n  \n    \n    0\n  \n\n    total\n—\n—\n16.6\n    n\n—\n—\n9.0\n    \n      Annual\n    \n    \nTumbleweed /thistle, Russian\nSalsola tragus\n\n  \n    \n    2\n  \n\n    \nhorseweed, Canada\nConyza canadensis\n\n  \n    \n    0\n  \n\n    \nbee plant, Yellow\nCleome lutea\n\n  \n    \n    0\n  \n\n    total\n—\n—\n2.4\n    n\n—\n—\n3.0\n    \n      Annual/Biennial\n    \n    \nsweetclover, Yellow\nMelilotus officinalis\n\n  \n    \n    0\n  \n\n    total\n—\n—\n0.0\n    n\n—\n—\n1.0\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\n\nFigure 7: LAW129 species composition by transect\n\n\n\n\n\n\n\n\n\n\nFigure 8: Laws 129 and one transect from 118, symbol size is scaled to species % cover and the overall map is faceted by species to view the spatial distribution of each species detected in the revegetation project."
  },
  {
    "objectID": "posts/laws-reveg/index.html#laws-mnd",
    "href": "posts/laws-reveg/index.html#laws-mnd",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Laws MND",
    "text": "Laws MND\n\n\nThere are three parcels in the Laws Ranch lease that were previously irrigated and will not be irrigated in the future under the plan for re-irrigation of the ranch. These parcels are Laws 90, 95 and 129. A portion of Laws 118 surrounds parcel 129. This area will be fenced and revegetation will be augmented, as needed, in conjunction with parcel 129. Laws parcel 94, which was mapped as abandoned agricultural land, will also be revegetated. These parcels are located northeast of the town of Laws and east of the Upper McNally Canal on the Laws 7.5’ USGS quad (Figure 1.) Under these plans, the parcels will be revegetated with the goal of restoring native vegetation that is similar in cover, and species composition to nearby sites. The prescribed conditions are to be established on each parcel by 2013, and must be present two years after established with no on-site revegetation activities. In preparing this plan, vegetation cover, composition, and species lists were determined by reviewing the LADWP 1984-87 vegetation inventory data for parcels in the vicinity (Appendix II) and located in the same ecological (range) site class in the Draft Benton-Owens Valley Soil Survey, hereafter referred to as the NRCS (Natural Resources Conservation Service 1994). In addition, species lists and other information from the NRCS descriptions were incorporated (Appendix I).\n\nRevegetation Plans for Lands Removed from Irrigation Laws Parcels 90, 95, 129 and Abandoned Agricultural Land Parcel 94. https://www.inyowater.org/wp-content/uploads/2021/10/Laws-Neg-Dec-Reveg-plan-FINAL-3-17-03-copy.pdf\n\nThe revegetation goals for Laws parcels 90, 94, and 95 are the same. The goal is a native perennial vegetation cover of at least 10% by the year 2013 composed of at least ten different native species (including a native grass). Further, after two years with no on-site revegetation activities, monitoring must show that these goals have been sustained on each parcel. The overall cover value for these parcels is comparable to the cover measured during the LADWP vegetation inventory for adjacent undisturbed parcels inventoried in 1987, and is noted as the low-end cover value in the NRCS Soil Survey.-p2\n\n\nFor parcel 90, there should be at least three “hits” for at least six different native perennial species out of the total of all the readings of all the permanent transects in the parcel. The other four native perennial species should be observed as present on the parcel, but do not have to be “hit” on any transect. For parcels 94 and 95, there should be at least two “hits” for at least six different native perennial species out of the total of all the readings of all the permanent transects in the parcel. The other four native perennial species should be present on the parcel, but do not have to be “hit” on any transect. For parcel 129/118, there should be at least two “hits” for at least five different native perennial species out of the total of all the readings of all the permanent transects in the parcels. The other three native perennial species should be present on the parcel, but do not have to be “hit” on any transect."
  },
  {
    "objectID": "posts/laws-reveg/index.html#revegetation-plans-for-lands-removed-from-irrigation-laws-parcels-90-95-129-and-abandoned-agricultural-land-parcel-94.-httpswww.inyowater.orgwp-contentuploads202110laws-neg-dec-reveg-plan-final-3-17-03-copy.pdf",
    "href": "posts/laws-reveg/index.html#revegetation-plans-for-lands-removed-from-irrigation-laws-parcels-90-95-129-and-abandoned-agricultural-land-parcel-94.-httpswww.inyowater.orgwp-contentuploads202110laws-neg-dec-reveg-plan-final-3-17-03-copy.pdf",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Revegetation Plans for Lands Removed from Irrigation Laws Parcels 90, 95, 129 and Abandoned Agricultural Land Parcel 94. https://www.inyowater.org/wp-content/uploads/2021/10/Laws-Neg-Dec-Reveg-plan-FINAL-3-17-03-copy.pdf",
    "text": "Revegetation Plans for Lands Removed from Irrigation Laws Parcels 90, 95, 129 and Abandoned Agricultural Land Parcel 94. https://www.inyowater.org/wp-content/uploads/2021/10/Laws-Neg-Dec-Reveg-plan-FINAL-3-17-03-copy.pdf\n\nFor parcel 90, there should be at least three “hits” for at least six different native perennial species out of the total of all the readings of all the permanent transects in the parcel. The other four native perennial species should be observed as present on the parcel, but do not have to be “hit” on any transect. For parcels 94 and 95, there should be at least two “hits” for at least six different native perennial species out of the total of all the readings of all the permanent transects in the parcel. The other four native perennial species should be present on the parcel, but do not have to be “hit” on any transect. For parcel 129/118, there should be at least two “hits” for at least five different native perennial species out of the total of all the readings of all the permanent transects in the parcels. The other three native perennial species should be present on the parcel, but do not have to be “hit” on any transect."
  },
  {
    "objectID": "posts/laws-reveg/index.html#revegetation-monitoring-report-for-land-removed-from-irrigation-laws-parcels-090-095129-and-abandoned-land-parcel-094",
    "href": "posts/laws-reveg/index.html#revegetation-monitoring-report-for-land-removed-from-irrigation-laws-parcels-090-095129-and-abandoned-land-parcel-094",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "2022 Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "text": "2022 Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094"
  },
  {
    "objectID": "posts/laws-reveg/index.html#libraries",
    "href": "posts/laws-reveg/index.html#libraries",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Libraries",
    "text": "Libraries\n\n\ncode\nlibrary(targets)\nlibrary(tidyverse)\nlibrary(rmarkdown)\nlibrary(DT)\nlibrary(htmlwidgets)\nlibrary(sf)\nlibrary(tmap)\nlibrary(tmaptools)\n# library(here)\nlibrary(ggpmisc)\nlibrary(ggpubr)\nlibrary(gt)\nlibrary(glue)\nlibrary(here)\nknitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)\noptions(tidyverse.quiet = TRUE)"
  },
  {
    "objectID": "posts/laws-reveg/index.html#summarise-to-transect-and-parcel",
    "href": "posts/laws-reveg/index.html#summarise-to-transect-and-parcel",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "summarise to transect and parcel",
    "text": "summarise to transect and parcel\n\n\ncode\nsummarise_reveg_to_transect <- function(x){\n  tran.sums <- x %>% group_by(parcel,transect,Lifecycle,Lifeform)%>%\n    summarise(Cover=sum(cover)*.5)# summarise for each e.g. lifecycle/lifeform annual/perennial grass\n\n  tran.tlc <- tran.sums %>%\n    group_by(parcel,transect) %>% # sum all cover across all lifecycle/lifeform\n    summarise(tot.live.cover = sum(Cover))\n\n  pft.wide<-tran.sums %>% filter(Lifecycle == 'Perennial') %>% select(-Lifecycle) %>%  spread(Lifeform,Cover) \n  pft.wide[is.na(pft.wide)] <- 0\n\n  # create total cover variable\n  pft.wide <- pft.wide%>%\n    mutate(Cover= Grass + Herb + Shrub  + Tree)\n\n  pft.wide.wtot.cov <- pft.wide %>% \n    left_join(tran.tlc, by = c(\"parcel\",'transect'))\n\n full <- pft.wide.wtot.cov %>%\n    mutate(pShrubTran = Shrub / Cover,\n           pGrassTran = Grass / Cover,\n           pHerbTran = Herb / Cover) %>%\n    mutate_if(is.numeric, ~replace_na(., 0))\n\n  return(full)\n}\n\n\nfull <- summarise_reveg_to_transect(r2)\n\n\n\n\ncode\nsummarise_to_parcel <- function(x){\n  p <- x %>% group_by(parcel)%>% summarise(\n    PerHits=sum(Cover),\n    ShrubHits=sum(Shrub),\n    HerbHits=sum(Herb),\n    GrassHits=sum(Grass),\n    Cover=mean(Cover),\n    Shrub=mean(Shrub),\n    Herb=mean(Herb),\n    Grass=mean(Grass),\n    TLC=mean(tot.live.cover),\n\n    pShrub=mean(pShrubTran),\n    pGrass=mean(pGrassTran),\n    pHerb=mean(pHerbTran),\n    n.transects = n())\n\nreturn(p)\n}\n\nparcel_sum <- summarise_to_parcel(full)\n\n\n\n\ncode\nparcel_sum %>% select(parcel,Cover,Shrub,Herb,Grass,n.transects) %>% gt()\n\n\n\n\n\n\n  \n  \n    \n      parcel\n      Cover\n      Shrub\n      Herb\n      Grass\n      n.transects\n    \n  \n  \n    LAW090\n15.725\n15.300\n0.075\n0.225\n20\n    LAW094\n10.650\n9.925\n0.000\n0.725\n20\n    LAW095\n12.200\n11.000\n0.000\n1.200\n20\n    LAW129\n16.625\n16.225\n0.325\n0.075\n20"
  },
  {
    "objectID": "laws_reveg.html",
    "href": "laws_reveg.html",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "",
    "text": "Inyo County Water Departmemnt (ICWD) received Los Angeles Department of Water and Power’s (LADWP) report entitled “Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094” in November, 2022.\nData supporting the report collected by LADWP in summer 2022 was received by ICWD staff in a digital excel file January 27th 2023. This data is evaluated here to verify data summaries in LADWP’s report and to provide feedback on the proposed timeline of the final two-year stage through 2024, when irrigation to the established plants is turned off to assess whether or not the stand can persist on valley-floor precipitation alone. The report informs that after irrigation support is removed for the 2023 and 2024 growing season, transects will be sampled again in 2024 to assess whether the 2003 revegetation plan goals are still satisfied.\n\n“If a parcel meets the goals after the two year rest, no further revegetation activities will be necessary and the parcel will be considered complete”.\n\nAfter examining the data provided to ICWD against the 2003 MND Revegetation Plan revegetation goals, LADWP’s reporting comports with ICWD’s independent data summaries in that cover goals and species richness was satisified in 2022. However, ICWD’s reading of the 2003 plan is that persistence without irrigation over two growing seasons is required before the project is considered complete. If irrigation ceased after the 2022 growing season, two years would be after the 2024 growing season not during the 2024 growing season. The most stressful period will be in August when soil moisture is at a low. In the spirit of the 2003 plan ICWD believes two years of late summer water stress after goals were initially met should be considered rather than just one late summer period of stress. Given the above average valley floor precipitation in 2022-23 winter, the water stress caused by the first year of no irrigation will be alleviated to some degree by soil moisture recharge from infiltrating precipitation. Surviving two or three drought years in a row would be a more legitimate test of sustainability compared to one wet year and just the beginning of the growing season in 2024.\nLikely common rabbitbrush, which is the dominant cover in LAW129/118, and big saltbush, which makes up a few percentage points in each parcel, will not fair well on precipitation alone as these specie are typically associated with a groundwater in Owens Valley."
  },
  {
    "objectID": "laws_reveg.html#libraries",
    "href": "laws_reveg.html#libraries",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Libraries",
    "text": "Libraries\n\n\ncode\nlibrary(targets)\nlibrary(tidyverse)\nlibrary(rmarkdown)\nlibrary(DT)\nlibrary(htmlwidgets)\nlibrary(sf)\nlibrary(tmap)\nlibrary(tmaptools)\n# library(here)\nlibrary(ggpmisc)\nlibrary(ggpubr)\nlibrary(gt)\nlibrary(glue)\nlibrary(here)\nknitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)\noptions(tidyverse.quiet = TRUE)"
  },
  {
    "objectID": "laws_reveg.html#data-import-and-processing",
    "href": "laws_reveg.html#data-import-and-processing",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Data Import and Processing",
    "text": "Data Import and Processing\nThe xy coordinates of the transects provided were joined to the field data consisting of parcel-transect-species-count row combinations allowing the spatial distribution of the plant species across the transect network to be plotted.\n\n\ncode\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(species))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(parcels_shp))\n# withr::with_dir(rprojroot::find_root('_targets.R'),tar_load(species))\n\n# grab the crs from another shapefile in NAD83 z11 to apply to the xy coordinates.\nreveg_crs <- st_crs(parcels_shp)\n\n\nreveg_data <- read_csv(here('data','laws_reveg','laws_reveg_data_2022a.csv'))\nreveg_xy <- read_csv(here('data','laws_reveg','laws_reveg_transects.csv'))\n\nreveg_sp_count_xy <- reveg_data %>% left_join(reveg_xy, by = c(\"parcel\",\"transect\"))\n\nr2 <- reveg_sp_count_xy %>% left_join(species, by = c(\"species\" = \"Code\"))\n\n\n# with spatial points for projecting on lat long map\nrscxy <- st_as_sf(reveg_sp_count_xy, coords = c(\"x\", \"y\"), crs =reveg_crs)\n\nr1 <- rscxy %>% left_join(species, by = c(\"species\" = \"Code\")) %>% mutate(percent_cover = cover*.5)\n\n\nrlaw90<- r1 %>% filter(parcel %in% c(\"LAW090\"))\nrlaw95<- r1 %>% filter(parcel %in% c(\"LAW095\"))\nrlaw94<- r1 %>% filter(parcel %in% c(\"LAW094\"))\nrlaw118_129<- r1 %>% filter(parcel %in% c(\"LAW118\",\"LAW129\"))\n\nr_n <- r1 %>% filter(parcel %in% c(\"LAW090\",\"LAW095\",\"LAW094\"))\nr_s <- r1 %>% filter(!parcel %in% c(\"LAW090\",\"LAW095\",\"LAW094\"))"
  },
  {
    "objectID": "laws_reveg.html#summarise-to-transect-and-parcel",
    "href": "laws_reveg.html#summarise-to-transect-and-parcel",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "summarise to transect and parcel",
    "text": "summarise to transect and parcel\n\n\ncode\nsummarise_reveg_to_transect <- function(x){\n  tran.sums <- x %>% group_by(parcel,transect,Lifecycle,Lifeform)%>%\n    summarise(Cover=sum(cover)*.5)# summarise for each e.g. lifecycle/lifeform annual/perennial grass\n\n  tran.tlc <- tran.sums %>%\n    group_by(parcel,transect) %>% # sum all cover across all lifecycle/lifeform\n    summarise(tot.live.cover = sum(Cover))\n\n  pft.wide<-tran.sums %>% filter(Lifecycle == 'Perennial') %>% select(-Lifecycle) %>%  spread(Lifeform,Cover) \n  pft.wide[is.na(pft.wide)] <- 0\n\n  # create total cover variable\n  pft.wide <- pft.wide%>%\n    mutate(Cover= Grass + Herb + Shrub  + Tree)\n\n  pft.wide.wtot.cov <- pft.wide %>% \n    left_join(tran.tlc, by = c(\"parcel\",'transect'))\n\n full <- pft.wide.wtot.cov %>%\n    mutate(pShrubTran = Shrub / Cover,\n           pGrassTran = Grass / Cover,\n           pHerbTran = Herb / Cover) %>%\n    mutate_if(is.numeric, ~replace_na(., 0))\n\n  return(full)\n}\n\n\nfull <- summarise_reveg_to_transect(r2)\n\n\n\n\ncode\nsummarise_to_parcel <- function(x){\n  p <- x %>% group_by(parcel)%>% summarise(\n    PerHits=sum(Cover),\n    ShrubHits=sum(Shrub),\n    HerbHits=sum(Herb),\n    GrassHits=sum(Grass),\n    Cover=mean(Cover),\n    Shrub=mean(Shrub),\n    Herb=mean(Herb),\n    Grass=mean(Grass),\n    TLC=mean(tot.live.cover),\n\n    pShrub=mean(pShrubTran),\n    pGrass=mean(pGrassTran),\n    pHerb=mean(pHerbTran),\n    n.transects = n())\n\nreturn(p)\n}\n\nparcel_sum <- summarise_to_parcel(full)\n\n\n\n\ncode\nparcel_sum %>% select(parcel,Cover,Shrub,Herb,Grass,n.transects) %>% gt()\n\n\n\n\n\n\n  \n  \n    \n      parcel\n      Cover\n      Shrub\n      Herb\n      Grass\n      n.transects\n    \n  \n  \n    LAW090\n15.725\n15.300\n0.075\n0.225\n20\n    LAW094\n10.650\n9.925\n0.000\n0.725\n20\n    LAW095\n12.200\n11.000\n0.000\n1.200\n20\n    LAW129\n16.625\n16.225\n0.325\n0.075\n20"
  },
  {
    "objectID": "laws_reveg.html#law090",
    "href": "laws_reveg.html#law090",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "LAW090",
    "text": "LAW090\n\n\ncode\nr2 %>%  \n  filter(parcel == \"LAW090\") %>% \n  group_by(Lifecycle,CommonName) %>% \n  summarise(Percent_Cover = sum(cover)*.5/20) %>% \n  gt(groupname_col = \"Lifecycle\") %>%\n  summary_rows(\n    groups = TRUE,\n    columns = Percent_Cover,\n    fns = list(\n      total = \"sum\"),\n    decimals = 1\n  )\n\n\n\n\n\n\n\nTable 1:  Laws 90 species cover average grouped and totaled by lifeform (annual, perennial). \n  \n  \n    \n      \n      CommonName\n      Percent_Cover\n    \n  \n  \n    \n      Annual\n    \n    \nbassia, Fivehook\n0.050\n    \nTumbleweed /thistle, Russian\n4.125\n    total\n—\n4.2\n    \n      Perennial\n    \n    \naster, Shrubby alkali\n0.025\n    \ncottonwood, Fremont's /Alamo\n0.125\n    \nGreasewood\n0.200\n    \nheliotrope, Salt\n0.075\n    \nindigo bush, Northern Mojave\n0.025\n    \nrabbitbrush, Common\n2.075\n    \nricegrass, Indian\n0.050\n    \nsacaton, Alkali\n0.175\n    \nsagebrush, Big\n0.100\n    \nsaltbush, Allscale\n6.150\n    \nsaltbush, Fourwing\n4.175\n    \nsaltbush, Nevada/Torrey's\n2.300\n    \nWinterfat\n0.250\n    total\n—\n15.7\n  \n  \n  \n\n\n\n\ncode\n# select(Lifecycle,Lifeform, transect,Species, CommonName,cover) %>% gt(groupname_col = c(\"Lifecycle\",\"Lifeform\"))\n\n\n\n\ncode\nggplot()+\n  geom_sf(data=rlaw90, aes(size=percent_cover,colour = 'red'))+\n   \n  # coord_sf()+\n  facet_wrap(Provenance~Veg_Type+CommonName+Species)\n\n\n\n\n\nFigure 1: Laws 90 transect locations, symbol size is scaled to species % cover and the overall map is faceted by species to view the spatial distribution of each species detected in the revegetation project."
  },
  {
    "objectID": "laws_reveg.html#law095",
    "href": "laws_reveg.html#law095",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "LAW095",
    "text": "LAW095\n\n\ncode\nr2 %>%  filter(parcel == \"LAW095\") %>% group_by(Lifecycle,CommonName) %>% summarise(Percent_Cover = sum(cover)*.5/20) %>% gt(groupname_col = \"Lifecycle\") %>%\n  summary_rows(\n    groups = TRUE,\n    columns = Percent_Cover,\n    fns = list(\n      total = \"sum\"),\n    decimals = 1\n  )\n\n\n\n\n\n\n\nTable 2:  Laws 95 species cover average grouped and totaled by lifeform (annual, perennial). \n  \n  \n    \n      \n      CommonName\n      Percent_Cover\n    \n  \n  \n    \n      Annual\n    \n    \nTumbleweed /thistle, Russian\n2.800\n    total\n—\n2.8\n    \n      Perennial\n    \n    \nalyssum, Desert\n0.025\n    \nBurrow-bush\n0.125\n    \nrabbitbrush, Common\n2.075\n    \nsacaton, Alkali\n0.625\n    \nsaltbush, Allscale\n4.025\n    \nsaltbush, Fourwing\n3.450\n    \nsaltbush, Nevada/Torrey's\n1.300\n    \nSaltgrass\n0.425\n    \nwildrye, Beardless/Creeping\n0.125\n    \nwildrye, Great Basin\n0.025\n    total\n—\n12.2\n    \n      NA\n    \n    \nNA\n0.025\n    total\n—\n0.0\n  \n  \n  \n\n\n\n\n\n\ncode\nggplot()+\n  geom_sf(data=rlaw95, aes(size=percent_cover,colour = 'red'))+\n  coord_sf()+\n  facet_wrap(Provenance~Veg_Type+CommonName+Species)\n\n\n\n\n\nFigure 2: Laws 95 transect locations, symbol size is scaled to species % cover and the overall map is faceted by species to view the spatial distribution of each species detected in the revegetation project.\n\n\n\n\nAtriplex polycarpa, canescans, torreyi and Ericameria make up primary canopy cover. Two transects recorded Alkali Sacaton and one recorded Indian Ricegrass. The six species having at least 3 hits out of 4000 possible hits are satisfied. from 2022, perennial cover averaged 15.7."
  },
  {
    "objectID": "laws_reveg.html#law094",
    "href": "laws_reveg.html#law094",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "LAW094",
    "text": "LAW094\n\n\ncode\nr2 %>%  filter(parcel == \"LAW094\") %>% group_by(Lifecycle,CommonName) %>% summarise(Percent_Cover = sum(cover)*.5/20) %>% gt(groupname_col = \"Lifecycle\") %>%\n  summary_rows(\n    groups = TRUE,\n    columns = Percent_Cover,\n    fns = list(\n      total = \"sum\"),\n    decimals = 1\n  )\n\n\n\n\n\n\n\nTable 3:  Laws 94 species cover average grouped and totaled by lifeform (annual, perennial). \n  \n  \n    \n      \n      CommonName\n      Percent_Cover\n    \n  \n  \n    \n      Annual\n    \n    \nTumbleweed /thistle, Russian\n5.950\n    total\n—\n6.0\n    \n      Perennial\n    \n    \nindigo bush, Northern Mojave\n0.250\n    \nrabbitbrush, Common\n1.600\n    \nsacaton, Alkali\n0.600\n    \nsaltbush, Allscale\n2.625\n    \nsaltbush, Fourwing\n4.525\n    \nsaltbush, Nevada/Torrey's\n0.525\n    \nSaltgrass\n0.050\n    \nwildrye, Beardless/Creeping\n0.075\n    \nWinterfat\n0.400\n    total\n—\n10.7\n    \n      NA\n    \n    \nNA\n0.175\n    total\n—\n0.2\n  \n  \n  \n\n\n\n\n\n\ncode\nggplot()+\n  geom_sf(data=rlaw94, aes(size=percent_cover,colour = 'red'))+\n  coord_sf()+\n  facet_wrap(Provenance~Veg_Type+CommonName+Species)\n\n\n\n\n\nFigure 3: Laws 94 transect locations, symbol size is scaled to species % cover and the overall map is faceted by species to view the spatial distribution of each species detected in the revegetation project."
  },
  {
    "objectID": "laws_reveg.html#law118-and-law129",
    "href": "laws_reveg.html#law118-and-law129",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "LAW118 and LAW129",
    "text": "LAW118 and LAW129\n\n\ncode\nr2 %>%  filter(parcel == \"LAW129\") %>% group_by(Lifecycle,CommonName) %>% summarise(Percent_Cover = sum(cover)*.5/20) %>% gt(groupname_col = \"Lifecycle\") %>%\n  summary_rows(\n    groups = TRUE,\n    columns = Percent_Cover,\n    fns = list(\n      total = \"sum\"),\n    decimals = 1\n  )\n\n\n\n\n\n\n\nTable 4:  Laws 129 species cover average grouped and totaled by lifeform (annual, perennial). \n  \n  \n    \n      \n      CommonName\n      Percent_Cover\n    \n  \n  \n    \n      Annual\n    \n    \nbee plant, Yellow\n0.050\n    \nhorseweed, Canada\n0.150\n    \nTumbleweed /thistle, Russian\n2.225\n    total\n—\n2.4\n    \n      Annual/Biennial\n    \n    \nsweetclover, Yellow\n0.025\n    total\n—\n0.0\n    \n      Perennial\n    \n    \nbindweed, Field\n0.250\n    \nrabbitbrush, Common\n11.250\n    \nsacaton, Alkali\n0.050\n    \nsaltbush, Allscale\n2.025\n    \nsaltbush, Fourwing\n2.800\n    \nsaltbush, Nevada/Torrey's\n0.050\n    \nSaltgrass\n0.025\n    \nweed, Poverty\n0.075\n    \nWinterfat\n0.100\n    total\n—\n16.6\n  \n  \n  \n\n\n\n\n\n\ncode\nggplot()+\n  geom_sf(data=rlaw118_129, aes(size=percent_cover,colour = 'red'))+\n  coord_sf()+\n  facet_wrap(Provenance~Veg_Type+CommonName+Species)\n\n\n\n\n\nFigure 4: Laws 129 and one transect from 118, symbol size is scaled to species % cover and the overall map is faceted by species to view the spatial distribution of each species detected in the revegetation project."
  },
  {
    "objectID": "posts/lpt-stats/index.html#sec-gb-box",
    "href": "posts/lpt-stats/index.html#sec-gb-box",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n2.1 Green Book Box I.C.1.a.ii",
    "text": "2.1 Green Book Box I.C.1.a.ii\nTRANSECTS FOR MONITORING VEGETATION RESPONSE TO PUMPING\nVegetation transects are included within the Green Book to serve two purposes: 1) to estimate transpiration from a monitoring site, and 2) for use in determining whether vegetation has decreased or changed significantly from the previous cover.\n\nDetailed measurements of leaf area index shall be made at each of the monitoring sites using the techniques described in Section III.C. These measurements will be used to estimate evapotranspiration from the vegetation at the monitoring site for comparison to available soil water and, ultimately, to project plant-soil water balance and the need for water table recovery. Vegetation transects shall also be used in cases of suspected vegetation changes due to groundwater pumping. However, rather than using the intensive sampling technique of Section III.D for calculating evapotranspiration, plant cover shall be measured by the line-point technique described below.\nDuring the 1984-87 inventory, most parcels were sampled with line-point transects of 100 feet in length, with sampling points at one-foot intervals, providing a two-dimensional representation of vegetation within the parcel. At each one-foot marker, the first contact with the uppermost layer of live plant cover was recorded. Cover and species composition were calculated from all sampling points along the transect.\n\nThe 1984-87 inventory shall be used as a “baseline” to determine whether vegetation cover and/or species composition has changed. This inventory is the only one of sufficient accuracy to permit comparison of species composition and cover.\nA subset of the vegetation parcels mapped during the 1984-87 baseline inventory shall be annually monitored to accommodate statistical comparison with data collected during the baseline inventory. Such monitoring may rely on repeat measurement of georeferenced locations using the line-point-intercept method to track live cover and species composition over time. The baseline inventory was summarized at the parcel scale, thus for statistical comparison, transect locations derived from a set of random locations and azimuths provide a valid statistical comparison.\nParcels to be monitored were initially selected based on meeting one or more of the following criteria: (1) parcel contained a permanent monitoring site; (2) baseline inventory data were collected for the parcel; (3) parcel was in close proximity to a pumping well; (4) information of past and current land use for parcel was available; (5) parcel was representative of one of the groundwater-dependent plant communities originally mapped during the baseline inventory; (6) soil characterization was available for the parcel; (7) characterization of the landscape position was available for the parcel. In 2015, Inyo County and Los Angeles began a joint monitoring program utilizing a combination of parcels and transects evaluated and agreed upon by the staffs of both parties. As of 2016, 1,688 transects across 141 parcels are jointly monitored by both parties.\nApproximately 100 of the 141 parcels monitored in 2016 will be jointly selected and monitored each year by Inyo County and Los Angeles. Prior to the field season, staff from both parties will determine which parcels of the 141 will be monitored. Existing permanent transects will be used for those parcels selected unless the staffs of both parties agree that a change in transect location is justified and necessary. Transects will be evenly split between ICWD and LADWP. Either party may independently conduct monitoring of additional parcels or transects; however, any data so collected shall be provided to the other party.\nThe field protocol and calibration for field observations for the joint line-point monitoring program largely follows Herrick et al.(2016). At the onset of the monitoring season, staff from both parties shall meet in the field to discuss methods and to calibrate all field personnel. In summary the field protocol is as follows:\n\nnavigate to the transect start point with a handheld GPS device;\nverify presence of an aluminum tag which has been previously attached to a nearby object (i.e. shrub, debris, etc.);\nuse a photo taken from the previous year to precisely locate the transect start point and to examine the accuracy of the azimuth used during the previous year;\nif the start point on the photo is off by more than 6 meters from the point indicated by a GPS reading, or a start point cannot be positively identified, a start point will be placed at the point indicated by the GPS device;\nif the designated transect azimuth is off by more than ±5 degrees from the azimuth depicted within the previous year’s transect photo, the designated transect azimuth will be used. If not, the azimuth depicted within the previous year’s photo will be upheld;\nstretch a tape measure to the direction of the pre-established azimuth;\nfor each transect, notes shall be taken on whether an aluminum tag is present, and whether or not the current year’s start point and compass azimuth matches those depicted within the previous year’s transect photo;\nrecord species identity at each half meter starting at 0.5 m and ending at 50 m yielding 100 possible hits;\nplace a dry erase board with the parcel name, transect number, azimuth and date at the base on the transect line and take a picture from the start point toward the end point that captures the entire transect.\n\nAll live cover is tallied for each species for each transect. Data are exchanged at the end of the field season after each party digitally enters and proofs field data.\nThe field technique and sampling design may be modified to permit detailed statistical comparison if deemed necessary in the future. Statistical analysis will be used to determine the measurability (statistical significance) of vegetation changes from the 1984-87 baseline inventory maps. Such an analysis may include, but is not limited to, Welch’s test (t-test with unequal variance), Wilcox test (Mann-Whitney test), Analysis of Variance (ANOVA) and Generalized Linear Model (GLM) for vegetation cover and permutational Multivariate Analysis of Variance (PERMANOVA) and Nonmetric Multidimensional Scaling (NMDS) for vegetation composition. For parcels with small baseline inventory sample sizes (e.g. 1-4 transects), a one-sample t-test may be performed using the baseline inventory sample mean as the null hypothesis for the test. Determination of measurability will be made by the Technical Group on case by case basis in accordance with Water Agreement IV.B and Green Book Section I.C.\nBox I.C.1.a.ii shall be modified as necessary in the future to incorporate new or modified field techniques, technology, and/or analytical methods. Such changes will be jointly developed by the staffs from both Inyo County and Los Angeles and will be presented to the Technical Group for consideration."
  },
  {
    "objectID": "posts/lpt-stats/index.html#sec-gov-docs",
    "href": "posts/lpt-stats/index.html#sec-gov-docs",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n1.1 Governing Document Links",
    "text": "1.1 Governing Document Links\nGoverning documents are currently hosted at inyowater.org as of 2023-02-02.\n\nInyo/LA Long Term Water Agreement (LTWA)\nLTWA Technical Appendix (Green Book)\n[Green Book Box I.C.1.a.ii.(https://www.inyowater.org/wp-content/uploads/2017/09/GBMemo_SCfeb2017.pdf)"
  },
  {
    "objectID": "posts/lpt-stats/index.html#cover-and-grass-change-from-baseline-all-years",
    "href": "posts/lpt-stats/index.html#cover-and-grass-change-from-baseline-all-years",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n5.1 Cover and Grass Change from baseline all years",
    "text": "5.1 Cover and Grass Change from baseline all years\nStatistical test results comparing baseline to current year perennial cover and total perennial cover. Two rows for each parcel are included, one summarizing perennial grass change from baseline and one for total perennial cover. Filtering, sorting, search and export of the filtered table is available.\n\none row each for total perennial cover change and grass cover change.\nstatistical significance ‘significant’ or not significant ‘ns’\neffect size (estimate) in units of cover (0-100) current cover\n2022 (estimate1) and baseline cover (estimate2)\nstatistical method (method - Welch Two Sample t-test or One Sample t-test\ndepending on the baseline sample size following Box I.C.1.a.ii)\ncurrent year sample size (n.x)\nbaseline sample size (n.y)\ntest statistic (statistic)\np-value (p.value).\n\n\ncodeparcel_year_meta_combined_results %>% \n  filter(Year.x == cYear) %>% \n  select(Parcel,cover_type,significance,  estimate, estimate1, estimate2, method,n.x, n.y, statistic, p.value) %>%  \n  mutate(across(estimate:estimate2, round, 0)) %>%\n  mutate(across(statistic:p.value, round, 3)) %>% \n  datatable(extensions = c('Buttons','FixedColumns'),\n            filter = c(\"top\"),\n            options = list(\n              dom = 'Blfrtip',\n              buttons = c('copy', 'csv', 'excel', 'pdf', 'print'),\n              scrollX = TRUE,\n              fixedColumns = list(leftColumns = 2, rightColumns = 0),\n              pageLength = 5, \n              autoWidth = TRUE)\n            )\n\n\n\n\n\n\nThe table below includes parcel summaries averaged over the transect samples for all years in which the parcel was sampled. Each parcel for each year sampled has a row. As of cYear 3,796 parcel-years have been recorded.\n\ncodeparcels_deltas %>% \n  select(Parcel, Year,Cover, Cover.Delta, Grass, Grass.Delta, Shrub, Shrub.Delta) %>% \n  mutate(across(Cover:Shrub.Delta, round, 1)) %>% \n  datatable(extensions = c('Buttons','FixedColumns'),\n            filter = c(\"top\"),\n            options = list(\n              dom = 'Blfrtip',\n              buttons = c('copy', 'csv', 'excel', 'pdf', 'print'),\n              scrollX = TRUE,\n              fixedColumns = list(leftColumns = 2, rightColumns = 0),\n              pageLength = 5, \n              autoWidth = TRUE)\n            )"
  },
  {
    "objectID": "posts/ndvi-stats/index.html",
    "href": "posts/ndvi-stats/index.html",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "",
    "text": "note: this post documents the empirical cumulative density function for a time series, one row per year, seasonally averaged, allowing each year labeled by it’s percentile within the context of the 37-year time series (1985-2022).\nTo demonstrate the function, I’ve pulled in the list of parcels sampled by the Inyo/LA vegetation monitoring program that were statistically below baseline in 2022, based on simple comparison of baseline (1984-1987) parcel means to 2022 parcel means. If either the mean perennial grass cover or the total perennial cover were below baseline, the parcel was flagged and pulled in here. In that report, there are also parcels that were flagged as being below baseline for an extended period of time - for example they didn’t recover to baseline levels in 2017-2019 above-average runoff years1. Those will be looked at in more detail but the entire list is brought in for now.\nThough not part of the Green Book measurability analysis, the NDVI time series allows for comparisons of the line point data to an independent proxy of vegetation cover - conveniently spanning the baseline period to the present when including all Landsat satellites 5, 7, 8 and now 9.\nI’ve output these figures to google drive, used the googledrive R package to create a url for the figures, joined to parcel id and then joined to the hosted feature class parcel layer on ArcGIS Online in a publicly accessible webmap.\ninsert link\ntodo: bin out multiple seasonal aggregations - late summer for reduction in early summer annual near-infrared reflectance, mid-summer for peak growth etc.\nAnother idea - determine the relationship between May NDVI and line point sampling June-July. Is the may NDVI magnitude correlated to a degree to which predictive accuracy for the following month’s cover is within the bounds of the error in the repeatability of the line point method itself?"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#sec-gb-box",
    "href": "posts/ndvi-stats/index.html#sec-gb-box",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n2.1 Green Book Box I.C.1.a.ii",
    "text": "2.1 Green Book Box I.C.1.a.ii\nTRANSECTS FOR MONITORING VEGETATION RESPONSE TO PUMPING\nVegetation transects are included within the Green Book to serve two purposes: 1) to estimate transpiration from a monitoring site, and 2) for use in determining whether vegetation has decreased or changed significantly from the previous cover.\n\nDetailed measurements of leaf area index shall be made at each of the monitoring sites using the techniques described in Section III.C. These measurements will be used to estimate evapotranspiration from the vegetation at the monitoring site for comparison to available soil water and, ultimately, to project plant-soil water balance and the need for water table recovery. Vegetation transects shall also be used in cases of suspected vegetation changes due to groundwater pumping. However, rather than using the intensive sampling technique of Section III.D for calculating evapotranspiration, plant cover shall be measured by the line-point technique described below.\nDuring the 1984-87 inventory, most parcels were sampled with line-point transects of 100 feet in length, with sampling points at one-foot intervals, providing a two-dimensional representation of vegetation within the parcel. At each one-foot marker, the first contact with the uppermost layer of live plant cover was recorded. Cover and species composition were calculated from all sampling points along the transect.\n\nThe 1984-87 inventory shall be used as a “baseline” to determine whether vegetation cover and/or species composition has changed. This inventory is the only one of sufficient accuracy to permit comparison of species composition and cover.\nA subset of the vegetation parcels mapped during the 1984-87 baseline inventory shall be annually monitored to accommodate statistical comparison with data collected during the baseline inventory. Such monitoring may rely on repeat measurement of georeferenced locations using the line-point-intercept method to track live cover and species composition over time. The baseline inventory was summarized at the parcel scale, thus for statistical comparison, transect locations derived from a set of random locations and azimuths provide a valid statistical comparison.\nParcels to be monitored were initially selected based on meeting one or more of the following criteria: (1) parcel contained a permanent monitoring site; (2) baseline inventory data were collected for the parcel; (3) parcel was in close proximity to a pumping well; (4) information of past and current land use for parcel was available; (5) parcel was representative of one of the groundwater-dependent plant communities originally mapped during the baseline inventory; (6) soil characterization was available for the parcel; (7) characterization of the landscape position was available for the parcel. In 2015, Inyo County and Los Angeles began a joint monitoring program utilizing a combination of parcels and transects evaluated and agreed upon by the staffs of both parties. As of 2016, 1,688 transects across 141 parcels are jointly monitored by both parties.\nApproximately 100 of the 141 parcels monitored in 2016 will be jointly selected and monitored each year by Inyo County and Los Angeles. Prior to the field season, staff from both parties will determine which parcels of the 141 will be monitored. Existing permanent transects will be used for those parcels selected unless the staffs of both parties agree that a change in transect location is justified and necessary. Transects will be evenly split between ICWD and LADWP. Either party may independently conduct monitoring of additional parcels or transects; however, any data so collected shall be provided to the other party.\nThe field protocol and calibration for field observations for the joint line-point monitoring program largely follows Herrick et al.(2016). At the onset of the monitoring season, staff from both parties shall meet in the field to discuss methods and to calibrate all field personnel. In summary the field protocol is as follows:\n\nnavigate to the transect start point with a handheld GPS device;\nverify presence of an aluminum tag which has been previously attached to a nearby object (i.e. shrub, debris, etc.);\nuse a photo taken from the previous year to precisely locate the transect start point and to examine the accuracy of the azimuth used during the previous year;\nif the start point on the photo is off by more than 6 meters from the point indicated by a GPS reading, or a start point cannot be positively identified, a start point will be placed at the point indicated by the GPS device;\nif the designated transect azimuth is off by more than ±5 degrees from the azimuth depicted within the previous year’s transect photo, the designated transect azimuth will be used. If not, the azimuth depicted within the previous year’s photo will be upheld;\nstretch a tape measure to the direction of the pre-established azimuth;\nfor each transect, notes shall be taken on whether an aluminum tag is present, and whether or not the current year’s start point and compass azimuth matches those depicted within the previous year’s transect photo;\nrecord species identity at each half meter starting at 0.5 m and ending at 50 m yielding 100 possible hits;\nplace a dry erase board with the parcel name, transect number, azimuth and date at the base on the transect line and take a picture from the start point toward the end point that captures the entire transect.\n\nAll live cover is tallied for each species for each transect. Data are exchanged at the end of the field season after each party digitally enters and proofs field data.\nThe field technique and sampling design may be modified to permit detailed statistical comparison if deemed necessary in the future. Statistical analysis will be used to determine the measurability (statistical significance) of vegetation changes from the 1984-87 baseline inventory maps. Such an analysis may include, but is not limited to, Welch’s test (t-test with unequal variance), Wilcox test (Mann-Whitney test), Analysis of Variance (ANOVA) and Generalized Linear Model (GLM) for vegetation cover and permutational Multivariate Analysis of Variance (PERMANOVA) and Nonmetric Multidimensional Scaling (NMDS) for vegetation composition. For parcels with small baseline inventory sample sizes (e.g. 1-4 transects), a one-sample t-test may be performed using the baseline inventory sample mean as the null hypothesis for the test. Determination of measurability will be made by the Technical Group on case by case basis in accordance with Water Agreement IV.B and Green Book Section I.C.\nBox I.C.1.a.ii shall be modified as necessary in the future to incorporate new or modified field techniques, technology, and/or analytical methods. Such changes will be jointly developed by the staffs from both Inyo County and Los Angeles and will be presented to the Technical Group for consideration."
  },
  {
    "objectID": "posts/ndvi-stats/index.html#baseline",
    "href": "posts/ndvi-stats/index.html#baseline",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n2.2 Baseline",
    "text": "2.2 Baseline\nFrom September 1984 to Nov 1987, LADWP inventoried and mapped vegetation on LA-owned lands in Owens Valley into 2126 polygons of similar vegetation type (223,168 acres). The Green Book vegetation monitoring program focuses on a subset of these groundwater-dependent parcels (Green Book types B, C, D and some E) that are affected by groundwater pumping within the unconfined shallow aquifer when pumping causes water table and it’s capillary fringe to decline below the reach of obligate groundwater-dependent species within Owens Valley.\nParcels were initially selected based on meeting one or more of the following criteria: (1) the parcel contained a permanent monitoring site where soil/vegetation water balance is calculated; (2) baseline data was collected for the parcel; (3) the parcel was in close proximity to a pumping well; (4) information of past and current land use for the parcel was available.\nThe number of parcels sampled has varied over the years in response to staffing availability but has ranged from 30-150 with a total number of parcels sampled at least one year after baseline at 192."
  },
  {
    "objectID": "posts/ndvi-stats/index.html#sec-gov-docs",
    "href": "posts/ndvi-stats/index.html#sec-gov-docs",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n3.1 Governing Document Links",
    "text": "3.1 Governing Document Links\nGoverning documents are currently hosted at inyowater.org) as of 2023-02-02.\n\nInyo/LA Long Term Water Agreement(LTWA)\nLTWA Technical Appendix (Green Book)\nGreen Book Box I.C.1.a.ii.TRANSECTS FOR MONITORING VEGETATION RESPONSE TO PUMPING"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#wellfield-control-group-comparison",
    "href": "posts/ndvi-stats/index.html#wellfield-control-group-comparison",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n3.2 Wellfield Control Group Comparison",
    "text": "3.2 Wellfield Control Group Comparison\nFor an overview of the pumping effect on GDEs in Owens Valley, parcels were classified in the early 1990s as either within a wellfield group potentially affected by pumping or a control group where the pumping effect was determined to be negligible on water table drawdown. In the 2000s, a rarefield subset of these parcels that had been sampled every year since 1992 was selected and this set has continued to be sampled each year to 2022. This particular set is small with 13 control and 31 wellfield parcels. For this rarefied subset, averages are plotted below for comparison of the groups over time and linear trends are reported for total cover, perennial herbaceous cover and woody shrub cover separately. In 2022, 41 control and 91 wellfield parcels were sampled, so this rarefield set represents only 34% of wellfield parcels and 32% of control parcels in the current year sample."
  },
  {
    "objectID": "posts/ndvi-stats/index.html#control-wellfield-designation",
    "href": "posts/ndvi-stats/index.html#control-wellfield-designation",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n3.3 Control Wellfield Designation",
    "text": "3.3 Control Wellfield Designation\nParcels were classified as either belonging to a wellfield group or control group based on criteria derived from groundwater drawdown during the period of maximum pumping rate that occurred between 1987 and 1993. Parcels were assigned to the wellfield group if (1) kriged DTW estimates exceeded 1-m water-table drawdown during 1987-1993 or (2) they were located at sites corresponding to modeled drawdown contours greater than 10 ft. Parcels were assigned to the control group if (1) kriged DTW estimates were less than 1 m and (2) they were located at sites corresponding to modeled drawdown contours less than 10 ft. If the kriged DTW estimates were not reliable owing an inadequate test-well network near the vegetation parcel, then the groundwater-flow model estimate of the 10-ft drawdown contour was used as the sole criteria to designate parcels as either wellfield or control.\nAn exception to the above criteria was applied to parcels associated with drawdown contours greater than 10-ft yet located near a surface water source (specifically, a canal, sewer pond, creek, river, or a ground water seepage source) that would lessen local drawdown effects—these parcels were classified as control.\nSome parcels currently in the wellfield group have higher water tables than during the 1987 to 1993 period, but remain in the wellfield group because of their close proximity to pumping wells and potential for pumping-induced drawdown. Each parcel is also classified by its Green Book management type, Holland plant community type and by its status as either wellfield or control."
  },
  {
    "objectID": "posts/ndvi-stats/index.html#targets",
    "href": "posts/ndvi-stats/index.html#targets",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n3.4 targets",
    "text": "3.4 targets\n\nThe targets R package is a Make-like pipeline toolkit for statistics and data science in R. With targets, you can maintain a reproducible workflow without repeating yourself. targets skips costly runtime for tasks that are already up to date, runs the necessary computation with implicit parallel computing, and abstracts files as R objects. A fully up-to-date targets pipeline is tangible evidence that the output aligns with the code and data, which substantiates trust in the results. targets github\n\nA single _targets.R script was constructed to pipe in datasets through a chain of functions to determine where monitoring data suggests vegetation goals of the water agreement are possibly not being met.\nFunctions are located in code/R/functions.R and the _targets.R script is located in the root directory with the .Rproj file.\nThe targets package tar_visnetwork() function output shows the data pipeline in an interactive format. Links are dependencies between functions and targets (input files, intermediate data transformations, model objects, plots and tables etc) specifying which targets are upstream from others and which are out of date and which downstream dependencies need to be rerun for the output to stay current. In the interactive viewer, functions are shown as triangles and targets are shown as circles. Fill color indicates whether or not upstream dependencies are ‘Up to date’ (green) or ‘Outdated’ (blue). Only the downstream dependencies of updated targets or functions will be re-evaluated when the pipeline is rerun using tar_make().\n\ncodewithr::with_dir(rprojroot::find_root('_targets.R'),tar_visnetwork())\n\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.0      ✔ purrr   0.3.5 \n✔ tibble  3.1.8      ✔ dplyr   1.0.10\n✔ tidyr   1.2.1      ✔ stringr 1.5.0 \n✔ readr   2.1.3      ✔ forcats 0.5.2 \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nhere() starts at /Users/zac/Documents/projects/open-science-notebook\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\nLoading required package: ggpp\n\nAttaching package: ‘ggpp’\n\nThe following object is masked from ‘package:ggplot2’:\n\n    annotate\n\n\n\nFigure 1: Dependency-aware data pipeline created with the Targets R package."
  },
  {
    "objectID": "posts/ndvi-stats/index.html#wellfield-control-linear-trend",
    "href": "posts/ndvi-stats/index.html#wellfield-control-linear-trend",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n4.1 Wellfield Control Linear Trend",
    "text": "4.1 Wellfield Control Linear Trend\n\ncodetrends.w.c\n\n\n\nFigure 3: Mean total perennial cover (Cover), perennial grass (Grass), shrub (Shrub) aggregated to parcel groups (wellfield and control) and plotted over the baseline and reinventory period. The baseline year is plotted at the nominal year 1986 for brevity. P-values less than 0.05 denote slopes statistically different from zero."
  },
  {
    "objectID": "posts/ndvi-stats/index.html#wellfield-control-baseline-vs-current-year",
    "href": "posts/ndvi-stats/index.html#wellfield-control-baseline-vs-current-year",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n4.2 Wellfield Control Baseline vs Current Year",
    "text": "4.2 Wellfield Control Baseline vs Current Year\nBaseline vs 2022 in wellfield and control groups.\n\ncode# move this to functions file\n\n\nboxplot_wc_pft_year_statcompare1 <- function(attributes, parcels, comparison_year, reference_year){\n\na <- attributes %>% select(Parcel,Type) %>% unique()\n\nparcels2 <- parcels %>% unique() %>% left_join(a, by = \"Parcel\")\n\n# parcels %>% write_csv('parcels2022.csv')\n# get the parcels with both baseline and current year data\n# spreading separate years into columns provides NA in parcel rows without data\n# in that year.\n\n# select columns and filter to comparison years\nparcels.select.compare <- parcels2 %>%\n  select(Parcel,NominalYear,Cover) %>%\n  filter(NominalYear %in% c(reference_year,comparison_year))\n\n# pivot wide with years as columns so we can keep rows with data in both current year and baseline.\nparcels.spread <- parcels.select.compare %>%\n  pivot_wider(names_from = NominalYear,\n              values_from = Cover,\n              names_prefix = \"y\")\n\n# select only rows with baseline and current year data\nPairwise <- parcels.spread %>%\n  rowwise()%>%\n  filter(!any(is.na(c_across(starts_with(\"y\")))))\n\n# select parcel attributes to join\natt <- attributes %>% select(Parcel, Type, wellfield, GB_TYPE, Holland)\n\n# join attributes\npa <- Pairwise %>% left_join(att, by = \"Parcel\")\n\n# split into wellfield and control dataframes\n# in 2022, 132 total, 91 wellfield, 41 control\nwpa <- pa %>% filter(Type == 'W') %>% nrow()# 91\ncpa <- pa %>% filter(Type == 'C') %>% nrow()# 41\n# write to disk for excel users\n# pa %>% write_csv(\"output/wellfield_control_cover_2022_c41_w91.csv\")\n#-------------------------------------------------------------\n#-------------------------------------------------------------\n# now filter the data\ntitle.construct <- paste0(\"Control (n=\", cpa,\") and Wellfield (n=\", wpa,\") Parcels sampled in both \",\n      reference_year,\" and \",comparison_year)\n\np <-  parcels2 %>% unique() %>%\n  filter(Parcel %in% Pairwise$Parcel,NominalYear %in% c(reference_year,comparison_year)) %>%\n  select(Parcel,NominalYear,Year,Type,Cover,Shrub,Grass) %>%\n  gather(Cover.Type,Cover,Cover:Grass)%>%\n  filter(!is.na(Type)) %>% mutate(NomYear = as.factor(NominalYear))\n\nggpaired_component <-ggpaired(p,\n                              x = \"NomYear\",\n                              y = \"Cover\",\n                              id = 'Parcel',\n                              color = \"Type\",\n                              notch = TRUE,\n                              label = \"Parcel\",\n                              label.select = list(top.up = 2),\n                              # label.select = list(criteria = \"`y` > 2 & `y` < 5 & `x` %in% c('A', 'B')\")\n                              repel = TRUE,\n                              font.label = list(size = 9, face = \"plain\"),\n                              palette = \"jco\",\n                              line.color = \"lightgray\",\n                              line.size = 0.1,\n                              # add = \"jitter\",\n                              facet.by = c('Type','Cover.Type'),\n                              # short.panel.labs = FALSE,\n                              title = title.construct,\n                              ylab = \"Perennial Cover\",\n                              xlab = \"Time Period Statistical Comparison\",\n                              panel.labs = list(Type = c(\"Control\", \"Wellfield\"))\n               )\n\nggpaired_stat_compare_plot <- ggpaired_component +\n  stat_compare_means(method='t.test',\n                     paired = TRUE,\n                     label = \"p.signif\"\n                     # label = \"p.format\"\n                     )\n# ggpaired_stat_compare_plot %>%\n  # ggsave(paste0(\"output/wc-plots/wc_\",reference_year,\"v\",comparison_year,\".pdf\"))\n# default is wilcoxon signed rank test\n# statcompare+ stat_compare_means(\n#                    paired = TRUE\n#     )\n# plot\nreturn(ggpaired_stat_compare_plot)\n}\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = cYear - 1)\n\n\n\nFigure 4: Year over year group comparison between control and wellfield parcels.\n\n\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = \"2015\")\n\n\n\nFigure 5: Group comparison between control and wellfield parcels between 2015 drought year and the current year.\n\n\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = \"1992\")\n\n\n\nFigure 6: Group comparison between control and wellfield parcels between baseline and 1992 after overpumping and drought effects.\n\n\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = \"1992\",\n                                reference_year = \"1986\")\n\n\n\nFigure 7: Group comparison between control and wellfield parcels between baseline and 1992 after overpumping and drought effects.\n\n\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = \"1986\")\n\n\n\nFigure 8: Group comparison between control and wellfield parcels between baseline and current year.\n\n\n\n\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = \"1993\")\n\n\n\nFigure 9: Group comparison between control and wellfield parcels between 1993 drought year and the current year."
  },
  {
    "objectID": "posts/ndvi-stats/index.html#effect-size-and-persistence",
    "href": "posts/ndvi-stats/index.html#effect-size-and-persistence",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n4.3 Effect size and persistence",
    "text": "4.3 Effect size and persistence\nStatistical deviation from baseline - effect size vegetation change since baseline (Cover.Delta, Grass.Delta, Shrub.Delta) through 2022, and 2022 parcel-average perennial grass (pGrass) and shrub (pShrub) as a proportion of the total perennial cover\n2022 parcel average total perennial cover (Cover) subtypes perennial Grass and Shrub cover.\nThe number of years in a row, counting back from the current year, a given parcel has been statistically (measurably) below baseline is indicated by Cover_sig.counter and Grass_sig.counter.\nColumn Descriptions\n\n\nCover.Delta and Grass.Delta is the difference from baseline compared to the current year.\n\nCover_sig.counter and Grass_sig.counter number of years the parcel has been below baseline in a row counting back from current year.\n\nn total number of years sampled out of 30 since 1992.\n\nCover_prop.sig and Grass_prop.sig is the number of total years significantly below baseline out of n years sampled\n\nGB_TYPE greenbook vegetation management type (A,B,C,D,E).\n\nHolland vegetation classification greenbook assignment.\n\npGrass parcel-average perennial grass proportion of total perennial cover.\n\npShrub parcel-average shrub proportion of total perennial cover.\n\nCover total perennial cover in 2022.\n\nGrass total perennial grass cover in 2022.\n\nShrub total perennial shrub cover in 2022.\n\n\ncodedeltas_ttest_att %>%\n      filter(Cover_sig.counter > 5 | Grass_sig.counter > 5,  Type == 'W') %>%\n      # mutate(p.value = round(p.value,3)) %>%\n      # filter(!Parcel %in% c(\"FSL044\")) %>%\n      select(Parcel,wellfield,GB_TYPE, Holland,Cover.Delta, Grass.Delta,Cover_sig.counter,Grass_sig.counter, n, \n             Cover,Grass,Shrub) %>% \n  gt(groupname_col = \"wellfield\") %>%\n  summary_rows(\n    groups = TRUE,\n    columns = Cover.Delta,\n    fns = list(\n      total = \"sum\"),\n    decimals = 1\n  )\n\n\n\n\n\n\nTable 1:  Wellfield parcels statistically below baseline for the past five years or more. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nBig Pine\n    \n\n\nBGP154\nC\nNevada Saltbush Meadow\n-1.6\n-4.8\n0\n11\n32\n22.6\n3.6\n18.8\n\n\n\nFSP006\nAC\nAlkali Meadow\n-8.0\n-19.5\n1\n32\n32\n15.8\n1.8\n14.0\n\n\ntotal\n—\n—\n—\n−9.6\n—\n—\n—\n—\n—\n—\n—\n\n\nTaboose-Aberdeen\n    \n\n\nBLK021\nB\nNevada Saltbush Scrub\n-15.1\n-9.8\n2\n24\n28\n15.5\n0.7\n14.8\n\n\n\nBLK142\nC\nAlkali Meadow\n-7.8\n-12.4\n2\n12\n29\n18.2\n4.8\n13.4\n\n\n\nTIN050\nC\nAlkali Meadow\n-6.6\n-25.4\n0\n14\n24\n29.7\n8.9\n20.8\n\n\n\nTIN053\nA\nAlkali Meadow\n-4.8\n-18.8\n0\n11\n20\n30.2\n11.4\n18.9\n\n\n\nTIN064\nC\nAlkali Meadow\n-18.1\n-17.8\n3\n25\n25\n13.1\n3.0\n10.1\n\n\ntotal\n—\n—\n—\n−52.4\n—\n—\n—\n—\n—\n—\n—\n\n\nThibaut-Sawmill\n    \n\n\nBLK094\nC\nAlkali Meadow\n-20.8\n-22.5\n22\n22\n32\n20.0\n6.5\n12.3\n\n\n\nBLK099\nC\nAlkali Meadow\n-16.4\n-21.0\n1\n6\n32\n31.6\n19.1\n7.8\n\n\n\nIND026\nC\nAlkali Meadow\n-30.4\n-47.6\n18\n18\n18\n18.6\n1.4\n16.2\n\n\n\nIND029\nC\nAlkali Meadow\n-3.6\n-14.0\n0\n22\n22\n18.4\n0.0\n17.9\n\n\ntotal\n—\n—\n—\n−71.2\n—\n—\n—\n—\n—\n—\n—\n\n\nLaws\n    \n\n\nFSL044\nC\nAlkali Meadow\n-41.5\n-48.8\n11\n12\n19\n27.7\n19.5\n4.3\n\n\n\nFSL054\nD\nModoc Gr Basin Riparian Scrub\n-59.7\n11.9\n17\n0\n17\n30.3\n21.8\n3.2\n\n\n\nLAW035\nC\nAlkali Meadow\n-30.2\n-25.7\n20\n3\n20\n3.0\n1.6\n0.9\n\n\n\nLAW043\nE\nRush Sedge Meadow\n-51.7\n-59.4\n20\n20\n20\n9.4\n0.6\n8.1\n\n\n\nLAW052\nC\nAlkali Meadow\n-20.8\n-22.3\n27\n27\n27\n7.0\n0.0\n7.0\n\n\n\nLAW062\nC\nRabbitbrush Meadow\n-12.0\n-5.6\n5\n14\n29\n9.4\n2.3\n5.3\n\n\n\nLAW065\nA\nAlkali Meadow\n-1.3\n-7.6\n0\n14\n31\n8.4\n0.8\n7.5\n\n\n\nLAW072\nC\nAlkali Meadow\n-36.9\n-51.2\n2\n16\n16\n27.3\n13.0\n11.8\n\n\n\nLAW082\nC\nRabbitbrush Meadow\n-8.7\n-5.7\n2\n27\n27\n7.6\n0.0\n7.5\n\n\n\nLAW085\nC\nAlkali Meadow\n-12.2\n-17.7\n3\n32\n32\n17.9\n12.4\n5.5\n\n\n\nLAW137\nC\nRabbitbrush Meadow\n-3.0\n-8.4\n0\n16\n29\n18.6\n2.6\n15.7\n\n\ntotal\n—\n—\n—\n−278.0\n—\n—\n—\n—\n—\n—\n—\n\n\nIndependence-Oak\n    \n\n\nIND019\nC\nAlkali Meadow\n-48.0\n-33.4\n13\n4\n30\n27.0\n13.6\n9.2\n\n\n\nIND021\nC\nRabbitbrush Meadow\n-39.6\n-21.9\n11\n9\n13\n28.4\n6.1\n21.7\n\n\ntotal\n—\n—\n—\n−87.6\n—\n—\n—\n—\n—\n—\n—\n\n\nSymmes-Shepherd\n    \n\n\nIND139\nC\nNevada Saltbush Meadow\n-27.4\n-13.4\n5\n32\n32\n21.1\n4.6\n16.3\n\n\ntotal\n—\n—\n—\n−27.4\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n\n\ncode# parcel_datatable_chronic"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#wellfield-maps",
    "href": "posts/ndvi-stats/index.html#wellfield-maps",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n4.4 Wellfield Maps",
    "text": "4.4 Wellfield Maps\n\n4.4.1 Laws\n\ncodepanel_map_lw\n\n\n\nFigure 10: Laws wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table <- function(data, wf){\ndata %>%\n    filter(Cover_sig.counter > 0 | Grass_sig.counter > 0,  Type == 'W') %>% \n    filter(wellfield == wf) %>%\n      # mutate(p.value = round(p.value,3)) %>%\n      # filter(!Parcel %in% c(\"FSL044\")) %>%\n      select(Parcel,wellfield,GB_TYPE, Holland,Cover.Delta, Grass.Delta,Cover_sig.counter,Grass_sig.counter, n, \n             Cover,Grass,Shrub) %>% \n  gt(groupname_col = \"wellfield\") %>%\n  summary_rows(\n    groups = TRUE,\n    columns = Cover.Delta,\n    fns = list(\n      Average = \"mean\"),\n    decimals = 1\n  )%>%\n  tab_footnote(\n    footnote = \"Perennial grass cover below baseline for five years or more.\",\n    locations = cells_body(\n      columns = Grass_sig.counter,\n      rows = Grass_sig.counter > 5\n    )\n  )%>%\n  tab_footnote(\n    footnote = \"Total perennial cover below baseline for five years or more.\",\n    locations = cells_body(\n      columns = Cover_sig.counter,\n      rows = Cover_sig.counter > 5\n    )\n  )\n}\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Laws')\n\n\n\n\n\n\nTable 2:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nLaws\n    \n\n\nFSL044\nC\nAlkali Meadow\n-41.5\n-48.8\n\n1 11\n\n2 12\n19\n27.7\n19.5\n4.3\n\n\n\nFSL051\nC\nAlkali Meadow\n-24.0\n-22.7\n2\n2\n25\n34.1\n27.1\n5.6\n\n\n\nFSL053\nC\nAlkali Meadow\n-25.3\n-21.5\n2\n1\n19\n35.4\n30.5\n3.2\n\n\n\nFSL054\nD\nModoc Gr Basin Riparian Scrub\n-59.7\n11.9\n\n1 17\n0\n17\n30.3\n21.8\n3.2\n\n\n\nLAW035\nC\nAlkali Meadow\n-30.2\n-25.7\n\n1 20\n3\n20\n3.0\n1.6\n0.9\n\n\n\nLAW043\nE\nRush Sedge Meadow\n-51.7\n-59.4\n\n1 20\n\n2 20\n20\n9.4\n0.6\n8.1\n\n\n\nLAW052\nC\nAlkali Meadow\n-20.8\n-22.3\n\n1 27\n\n2 27\n27\n7.0\n0.0\n7.0\n\n\n\nLAW062\nC\nRabbitbrush Meadow\n-12.0\n-5.6\n5\n\n2 14\n29\n9.4\n2.3\n5.3\n\n\n\nLAW065\nA\nAlkali Meadow\n-1.3\n-7.6\n0\n\n2 14\n31\n8.4\n0.8\n7.5\n\n\n\nLAW070\nE\nRush Sedge Meadow\n-52.3\n-58.0\n3\n3\n20\n7.0\n0.0\n4.4\n\n\n\nLAW072\nC\nAlkali Meadow\n-36.9\n-51.2\n2\n\n2 16\n16\n27.3\n13.0\n11.8\n\n\n\nLAW078\nC\nAlkali Meadow\n-23.2\n-23.2\n2\n2\n27\n28.5\n17.8\n5.6\n\n\n\nLAW082\nC\nRabbitbrush Meadow\n-8.7\n-5.7\n2\n\n2 27\n27\n7.6\n0.0\n7.5\n\n\n\nLAW085\nC\nAlkali Meadow\n-12.2\n-17.7\n3\n\n2 32\n32\n17.9\n12.4\n5.5\n\n\n\nLAW105\nC\nAlkali Meadow\n-5.3\n-7.3\n0\n1\n19\n21.1\n9.7\n9.9\n\n\n\nLAW108\nC\nAlkali Meadow\n-19.9\n-30.4\n2\n2\n19\n33.6\n21.9\n5.7\n\n\n\nLAW122\nC\nAlkali Meadow\n-26.4\n-30.4\n1\n2\n31\n33.2\n26.9\n3.8\n\n\n\nLAW137\nC\nRabbitbrush Meadow\n-3.0\n-8.4\n0\n\n2 16\n29\n18.6\n2.6\n15.7\n\n\nAverage\n—\n—\n—\n−25.2\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n\n1 Total perennial cover below baseline for five years or more.\n    \n\n\n2 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n\n4.4.2 Big Pine\n\ncodepanel_map_bp\n\n\n\nFigure 11: Big Pine wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Big Pine')\n\n\n\n\n\n\nTable 3:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nBig Pine\n    \n\n\nBGP088\nB\nNevada Saltbush Scrub\n-1.8\n-3.4\n0\n1\n23\n16.8\n2.1\n14.3\n\n\n\nBGP154\nC\nNevada Saltbush Meadow\n-1.6\n-4.8\n0\n\n1 11\n32\n22.6\n3.6\n18.8\n\n\n\nBGP162\nB\nNevada Saltbush Scrub\n-15.8\n-3.8\n3\n0\n32\n14.6\n1.4\n13.1\n\n\n\nFSP006\nAC\nAlkali Meadow\n-8.0\n-19.5\n1\n\n1 32\n32\n15.8\n1.8\n14.0\n\n\n\nFSP015\nC\nAlkali Meadow\n-15.5\n-9.7\n3\n3\n9\n8.3\n2.8\n5.5\n\n\n\nFSP020\nB\nNevada Saltbush Scrub\n-11.4\n-2.5\n3\n0\n9\n5.6\n0.0\n5.6\n\n\nAverage\n—\n—\n—\n−9.0\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n1 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n4.4.3 Taboose-Aberdeen\n\ncodepanel_map_ta\n\n\n\nFigure 12: Taboose-Aberdeen wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Taboose-Aberdeen')\n\n\n\n\n\n\nTable 4:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nTaboose-Aberdeen\n    \n\n\nBLK006\nA\nDesert Sink Scrub\n-2.7\n-2.5\n0\n1\n6\n13.8\n4.5\n8.9\n\n\n\nBLK008\nC\nAlkali Meadow\n-17.9\n-19.8\n2\n2\n5\n31.7\n12.9\n2.3\n\n\n\nBLK009\nC\nAlkali Meadow\n-13.6\n-11.3\n2\n4\n32\n15.2\n6.7\n8.3\n\n\n\nBLK021\nB\nNevada Saltbush Scrub\n-15.1\n-9.8\n2\n\n1 24\n28\n15.5\n0.7\n14.8\n\n\n\nBLK033\nC\nAlkali Meadow\n1.2\n-5.5\n0\n2\n31\n14.9\n2.5\n11.1\n\n\n\nBLK039\nC\nAlkali Meadow\n-5.0\n-7.7\n0\n2\n31\n16.7\n8.1\n7.8\n\n\n\nBLK044\nC\nRabbitbrush Meadow\n0.8\n-6.1\n0\n2\n32\n23.2\n2.6\n19.1\n\n\n\nBLK142\nC\nAlkali Meadow\n-7.8\n-12.4\n2\n\n1 12\n29\n18.2\n4.8\n13.4\n\n\n\nTIN050\nC\nAlkali Meadow\n-6.6\n-25.4\n0\n\n1 14\n24\n29.7\n8.9\n20.8\n\n\n\nTIN053\nA\nAlkali Meadow\n-4.8\n-18.8\n0\n\n1 11\n20\n30.2\n11.4\n18.9\n\n\n\nTIN064\nC\nAlkali Meadow\n-18.1\n-17.8\n3\n\n1 25\n25\n13.1\n3.0\n10.1\n\n\n\nTIN068\nA\nAlkali Meadow\n-4.1\n-7.7\n0\n5\n31\n9.2\n1.4\n7.8\n\n\nAverage\n—\n—\n—\n−7.8\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n1 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n4.4.4 Thibaut-Sawmill\n\ncodepanel_map_ts\n\n\n\nFigure 13: Thibaut-Sawmill wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Thibaut-Sawmill')\n\n\n\n\n\n\nTable 5:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nThibaut-Sawmill\n    \n\n\nBLK069\nA\nDesert Sink Scrub\n-4.3\n-2.7\n1\n0\n32\n14.1\n7.7\n6.0\n\n\n\nBLK074\nB\nNevada Saltbush Scrub\n-7.9\n1.8\n2\n0\n31\n23.4\n13.6\n9.5\n\n\n\nBLK075\nC\nAlkali Meadow\n-3.7\n-25.6\n0\n4\n31\n35.1\n10.2\n21.7\n\n\n\nBLK094\nC\nAlkali Meadow\n-20.8\n-22.5\n\n1 22\n\n2 22\n32\n20.0\n6.5\n12.3\n\n\n\nBLK095\nA\nAlkali Meadow\n-3.7\n-7.3\n0\n1\n20\n12.8\n7.0\n5.8\n\n\n\nBLK096\nA\nDesert Sink Scrub\n-11.7\n-3.7\n5\n0\n19\n9.1\n5.3\n3.9\n\n\n\nBLK099\nC\nAlkali Meadow\n-16.4\n-21.0\n1\n\n2 6\n32\n31.6\n19.1\n7.8\n\n\n\nIND026\nC\nAlkali Meadow\n-30.4\n-47.6\n\n1 18\n\n2 18\n18\n18.6\n1.4\n16.2\n\n\n\nIND029\nC\nAlkali Meadow\n-3.6\n-14.0\n0\n\n2 22\n22\n18.4\n0.0\n17.9\n\n\nAverage\n—\n—\n—\n−11.4\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n\n1 Total perennial cover below baseline for five years or more.\n    \n\n\n2 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n\n4.4.5 Independence-Oak\n\ncodepanel_map_io\n\n\n\nFigure 14: Independence-Oak wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Independence-Oak')\n\n\n\n\n\n\nTable 6:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nIndependence-Oak\n    \n\n\nIND011\nC\nAlkali Meadow\n-2.7\n-13.5\n0\n3\n31\n27.7\n14.5\n11.0\n\n\n\nIND019\nC\nAlkali Meadow\n-48.0\n-33.4\n\n1 13\n4\n30\n27.0\n13.6\n9.2\n\n\n\nIND021\nC\nRabbitbrush Meadow\n-39.6\n-21.9\n\n1 11\n\n2 9\n13\n28.4\n6.1\n21.7\n\n\n\nIND035\nC\nAlkali Meadow\n-13.9\n-22.2\n2\n2\n31\n35.6\n23.8\n7.1\n\n\n\nIND111\nC\nNevada Saltbush Meadow\n-17.7\n0.4\n2\n0\n32\n23.5\n10.5\n11.8\n\n\n\nIND132\nB\nNevada Saltbush Scrub\n-18.8\n-0.3\n2\n3\n32\n14.1\n0.0\n14.1\n\n\n\nIND133\nA\nNevada Saltbush Scrub\n-6.5\n0.0\n1\nNA\n23\n7.0\n0.0\n7.0\n\n\nAverage\n—\n—\n—\n−21.0\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n\n1 Total perennial cover below baseline for five years or more.\n    \n\n\n2 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n\n4.4.6 Symmes-Shepherd\n\ncodepanel_map_ss\n\n\n\nFigure 15: Symmes-Shepherd wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Symmes-Shepherd')\n\n\n\n\n\n\nTable 7:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nSymmes-Shepherd\n    \n\n\nIND124\nB\nNevada Saltbush Scrub\n-22.6\n2.8\n2\n0\n19\n18.4\n2.8\n15.5\n\n\n\nIND139\nC\nNevada Saltbush Meadow\n-27.4\n-13.4\n5\n\n1 32\n32\n21.1\n4.6\n16.3\n\n\n\nMAN006\nC\nAlkali Meadow\n-7.8\n-5.5\n2\n2\n31\n14.9\n9.7\n5.0\n\n\n\nMAN007\nB\nNevada Saltbush Scrub\n-13.0\n2.0\n2\n0\n32\n15.0\n3.0\n11.0\n\n\nAverage\n—\n—\n—\n−17.7\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n1 Perennial grass cover below baseline for five years or more.\n    \n\n\n\n\n\n\n4.4.7 Bairs-George\n\ncodepanel_map_bg\n\n\n\nFigure 16: Symmes-Shepherd wellfield parcels sampled in the most recent year showing perennial grass cover and total perennial cover on the left and the differnce from baseline values on the right.\n\n\n\n\n\ncodemake_wellfield_table(deltas_ttest_att, 'Bairs-George')\n\n\n\n\n\n\nTable 8:  Wellfield parcels statistically below baseline in at least the current year. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nBairs-George\n    \n\n\nMAN034\nA\nDesert Sink Scrub\n-6.7\n-3.8\n2\n0\n20\n8.7\n5.6\n3.1\n\n\n\nMAN037\nB\nNevada Saltbush Scrub\n-25.1\n-2.8\n2\n2\n32\n16.9\n0.9\n13.5\n\n\n\nMAN038\nC\nNevada Saltbush Meadow\n-23.5\n-15.0\n1\n1\n5\n25.7\n12.5\n12.1\n\n\n\nMAN042\nA\nRabbitbrush Scrub\n-3.4\n-1.0\n0\n1\n21\n14.6\n0.5\n12.6\n\n\nAverage\n—\n—\n—\n−14.7\n—\n—\n—\n—\n—\n—\n—"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#cover-and-grass-change-from-baseline-all-years",
    "href": "posts/ndvi-stats/index.html#cover-and-grass-change-from-baseline-all-years",
    "title": "Inyo/LA Long-Term Water Agreement Vegetation Monitoring Program - Green Book Box I.C.1.a.ii.",
    "section": "\n6.1 Cover and Grass Change from baseline all years",
    "text": "6.1 Cover and Grass Change from baseline all years\nFor each parcel, - one row each for total perennial cover change and grass cover change. - statistical significance ‘significant’ or not significant ‘ns’ - effect size (estimate) in units of cover (0-100) current cover - 2022 (estimate1) and baseline cover (estimate2) - statistical method (method - Welch Two Sample t-test or One Sample t-test - depending on the baseline sample size following Box I.C.1.a.ii) - current year sample size (n.x) - baseline sample size (n.y) - test statistic (statistic) - p-value (p.value).\n\ncodeparcel_year_meta_combined_results %>% \n  filter(Year.x == cYear) %>% \n  select(Parcel,cover_type,significance,  estimate, estimate1, estimate2, method,n.x, n.y, statistic, p.value) %>%  \n  mutate(across(estimate:estimate2, round, 0)) %>%\n  mutate(across(statistic:p.value, round, 3)) %>% \n  datatable(extensions = c('Buttons','FixedColumns'),\n            filter = c(\"top\"),\n            options = list(\n              dom = 'Blfrtip',\n              buttons = c('copy', 'csv', 'excel', 'pdf', 'print'),\n              scrollX = TRUE,\n              fixedColumns = list(leftColumns = 2, rightColumns = 0),\n              pageLength = 5, \n              autoWidth = TRUE)\n            )\n\n\n\n\n\n\nThe table below includes parcel summaries averaged over the transect samples for all years in which the parcel was sampled.\n\ncodeparcels_deltas %>% \n  select(Parcel, Year,Cover, Cover.Delta, Grass, Grass.Delta, Shrub, Shrub.Delta) %>% \n  mutate(across(Cover:Shrub.Delta, round, 1)) %>% \n  datatable(extensions = c('Buttons','FixedColumns'),\n            filter = c(\"top\"),\n            options = list(\n              dom = 'Blfrtip',\n              buttons = c('copy', 'csv', 'excel', 'pdf', 'print'),\n              scrollX = TRUE,\n              fixedColumns = list(leftColumns = 2, rightColumns = 0),\n              pageLength = 5, \n              autoWidth = TRUE)\n            )"
  },
  {
    "objectID": "posts/lpt-stats/index.html#background",
    "href": "posts/lpt-stats/index.html#background",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n1.1 Background",
    "text": "1.1 Background\nPertinent sections in Green Book I.C.1 Determination of Significant Impacts is included below for background.\nGreen Book Section I.C Impact Determination and Mitigation\n\n“Among the primary goals of the Agreement are to manage groundwater pumping and surface water management practices as follows: 1) to avoid causing significant decreases in live vegetation cover; 2) to avoid changing a significant amount of vegetation from one classification to a lower (alphabetically) classification; 3) to avoid causing other significant effects on the environment; and 4) in a manner consistent with State and Federal laws pertaining to rare and endangered species. If any of these goals are not achieved, feasible mitigation of the affected area will be implemented. However, mitigation is not considered a primary management tool, but rather a secondary tool that will be employed should impacts occur that are inconsistent with the goals of the Agreement.”\n\n\n“This section outlines a procedure for determining whether decreases and/or changes in vegetation or other significant effects on the environment have occurred or are occurring in a given management area. It describes the process the Technical Group will follow to ascertain whether a change is significant, and thus, whether it requires mitigation. It also describes how the Technical Group will develop and implement a mitigation plan and monitoring and reporting program.”\n\nSection I.C.1 Determination of Significant Impacts\n\n“A significant decrease or change or other significant effect on the environment will be mitigated if it is measurable, attributable to groundwater pumping or surface water management practices, and significant. The Agreement provides that the determination of significance of an impact, and thus, whether it must be mitigated, will be made on a case by case basis. The steps in the case by case analysis are described below.”\n\nSection I.C.1.a Determining Measurability\n\nIn determining whether a change in vegetation cover or composition is measurable, the Technical Group will consider all relevant factors, including:\n\n\ncomparison of current vegetation cover and composition in the affected area with similar data taken during other time periods, including the 1984-87 vegetation inventory data;\nComparison of vegetation cover and composition at the affected area with vegetation data from one or more control sites located in areas which have similar vegetation, soil, and precipitation conditions;\ncomparison of the ratio of recently deceased vegetation to live vegetation in the affected area with other areas not affected by pumping and with similar vegetation cover and composition, soil, and precipitation conditions;\nuse of air photo and remote sensing techniques to assist in making comparisons of conditions during different time periods and in mapping the affected area;\ncomparison of data from randomly selected transects with similar data taken during other time periods, including the 1984-87 vegetation inventory data. This method will be employed in areas where monitoring site data does not exist, or where data covers an insufficient time period. Such transects will be performed as described in Box I.C.1.a.ii.”\n\nIn reference to these ‘relevant factors’ listed above, Section I.C.1 explains:\n\n“A determination of measurability will be made if any of the relevant factors considered indicate even a small documentable change in vegetation cover or composition has occurred.”"
  },
  {
    "objectID": "posts/lpt-stats/index.html#monitoring-sample-size",
    "href": "posts/lpt-stats/index.html#monitoring-sample-size",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n2.3 Monitoring Sample Size",
    "text": "2.3 Monitoring Sample Size\nParcels were initially selected based on meeting one or more of the following criteria: (1) the parcel contained a permanent monitoring site where soil/vegetation water balance is calculated; (2) baseline data was collected for the parcel; (3) the parcel was in close proximity to a pumping well; (4) information of past and current land use for the parcel was available. The number of parcels sampled has varied over the years in response to staffing availability but has ranged from 30-150 with a total number of parcels sampled at least one year after baseline at 192.\nMost parcels were sampled in 1984-1987 using line-point-intercept sampling. Some parcels were not directly sampled but rather assigned cover and composition values from parcels with similar vegetation conditions. Welch’s t-test for unequal variance was used to evaluate in which parcels and in which year(s) total perennial cover and perennial grass cover has significantly differed from baseline. Since the sample standard deviation is used to construct 95% confidence interval, this method can be used for parcels in which baseline data contained more than one transect or nonzero sample variance. Where unmeasured parcels during baseline subsequently inherited a single baseline value from nearby parcels, a one-sample t-test is used to determine significance from baseline. For parcels with low baseline sample sizes, procedures in Green Book Box I.C.1.a.ii were followed: “For parcels with small baseline inventory sample sizes (e.g. 1-4 transects), a one-sample t-test may be performed using the baseline inventory sample mean as the null hypothesis for the test”."
  },
  {
    "objectID": "posts/lpt-stats/index.html#wellfield-vs-control-group---rarefied-subset-1992-current",
    "href": "posts/lpt-stats/index.html#wellfield-vs-control-group---rarefied-subset-1992-current",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n3.1 Wellfield vs Control Group - Rarefied Subset (1992-current)",
    "text": "3.1 Wellfield vs Control Group - Rarefied Subset (1992-current)\n\ncodeplot_wellcontrol\n\n\n\nFigure 2: Mean perennial vegetation cover in rarefied (sampled every year) wellfield (n=32) and control parcels (n=13). Grass cover and woody shrub cover are shown separately. LADWP data 2004-2014 was combined with ICWD 2004-2014 for those years in which parcels were sampled by both agencies.\n\n\n\n\n\n3.1.1 Linear Trend\n\ncodetrends.w.c\n\n\n\nFigure 3: Mean total perennial cover (Cover), perennial grass (Grass), shrub (Shrub) aggregated to parcel groups (wellfield and control) and plotted over the baseline and reinventory period. The baseline year is plotted at the nominal year 1986 for brevity. P-values less than 0.05 denote slopes statistically different from zero."
  },
  {
    "objectID": "posts/lpt-stats/index.html#wellfield-control-two-year-comparisons---rarefied-same-parcels-sampled-in-both-specified-years",
    "href": "posts/lpt-stats/index.html#wellfield-control-two-year-comparisons---rarefied-same-parcels-sampled-in-both-specified-years",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n3.2 Wellfield Control Two-Year Comparisons - Rarefied (same parcels sampled in both specified years)",
    "text": "3.2 Wellfield Control Two-Year Comparisons - Rarefied (same parcels sampled in both specified years)\n\ncodeboxplot_wc_pft_year_statcompare1 <- function(attributes, parcels, comparison_year, reference_year){\n\na <- attributes %>% select(Parcel,Type) %>% unique()\n\nparcels2 <- parcels %>% unique() %>% left_join(a, by = \"Parcel\")\n\n# identify two years and return parcels sampled in both years\n# create boxplots and compute paired ttests.\n# spreading separate years into columns provides NA in parcel rows without data\n# in that year.\n\n# select columns and filter to comparison years\nparcels.select.compare <- parcels2 %>%\n  select(Parcel,NominalYear,Cover) %>%\n  filter(NominalYear %in% c(reference_year,comparison_year))\n\n# pivot wide with years as columns so we can keep rows with data in both current year and baseline.\nparcels.spread <- parcels.select.compare %>%\n  pivot_wider(names_from = NominalYear,\n              values_from = Cover,\n              names_prefix = \"y\")\n\n# select only rows with baseline and current year data\nPairwise <- parcels.spread %>%\n  rowwise()%>%\n  filter(!any(is.na(c_across(starts_with(\"y\")))))\n\n# select parcel attributes to join\natt <- attributes %>% select(Parcel, Type, wellfield, GB_TYPE, Holland)\n\n# join attributes\npa <- Pairwise %>% left_join(att, by = \"Parcel\")\n\n# split into wellfield and control dataframes\n# in 2022, 132 total, 91 wellfield, 41 control\nwpa <- pa %>% filter(Type == 'W') %>% nrow()# 91\ncpa <- pa %>% filter(Type == 'C') %>% nrow()# 41\n# write to disk for excel users\n# pa %>% write_csv(\"output/wellfield_control_cover_2022_c41_w91.csv\")\n#-------------------------------------------------------------\n#-------------------------------------------------------------\n# now filter the data\ntitle.construct <- paste0(\"Group size: Control (n=\", cpa,\") and Wellfield (n=\", wpa,\")\")\n\np <-  parcels2 %>% unique() %>%\n  filter(Parcel %in% Pairwise$Parcel,NominalYear %in% c(reference_year,comparison_year)) %>%\n  select(Parcel,NominalYear,Year,Type,Cover,Shrub,Grass) %>%\n  gather(Cover.Type,Cover,Cover:Grass)%>%\n  filter(!is.na(Type)) %>% mutate(NomYear = as.factor(NominalYear))\n\nggpaired_component <-ggpaired(p,\n                              x = \"NomYear\",\n                              y = \"Cover\",\n                              id = 'Parcel',\n                              color = \"Type\",\n                              notch = TRUE,\n                              # label = \"Parcel\",\n                              # label.select = list(top.up = 2),\n                              # label.select = list(criteria = \"`y` > 2 & `y` < 5 & `x` %in% c('A', 'B')\")\n                              # repel = TRUE,\n                              # font.label = list(size = 9, face = \"plain\"),\n                              palette = \"jco\",\n                              line.color = \"lightgray\",\n                              line.size = 0.1,\n                              # add = \"jitter\",\n                              facet.by = c('Type','Cover.Type'),\n                              # short.panel.labs = FALSE,\n                              title = title.construct,\n                              ylab = \"Perennial Cover\",\n                              xlab = \"Time Period Statistical Comparison\",\n                              panel.labs = list(Type = c(\"Control\", \"Wellfield\"))\n               )\n\nggpaired_stat_compare_plot <- ggpaired_component +\n  stat_compare_means(method='t.test',\n                     paired = TRUE,\n                     label = \"p.signif\"\n                     # label = \"p.format\"\n                     )\n# ggpaired_stat_compare_plot %>%\n  # ggsave(paste0(\"output/wc-plots/wc_\",reference_year,\"v\",comparison_year,\".pdf\"))\n# default is wilcoxon signed rank test\n# statcompare+ stat_compare_means(\n#                    paired = TRUE\n#     )\n# plot\nreturn(ggpaired_stat_compare_plot)\n}\n\n\n\n3.2.1 Year-Over-Year Group Comparison\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = cYear - 1)\n\n\n\nFigure 4: Year over year group comparison between control and wellfield parcels.\n\n\n\n\n\n3.2.2 Drought-Year 2015 vs Current Year Group Comparison\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = \"2015\")\n\n\n\nFigure 5: Group comparison between control and wellfield parcels between 2015 drought year and the current year.\n\n\n\n\n\n3.2.3 Drought-Year 1994 vs Current Year Group Comparison\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = \"1994\")\n\n\n\nFigure 6: Group comparison between control and wellfield parcels between 1994 after overpumping and drought effects and the current year.\n\n\n\n\n\n3.2.4 Baseline (1984-1987) vs 1994 Drought-Year Group Comparison\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = \"1994\",\n                                reference_year = \"1986\")\n\n\n\nFigure 7: Group comparison between control and wellfield parcels from baseline to 1994 after overpumping and drought effects.\n\n\n\n\n\n3.2.5 Baseline (1984-1987) vs Current Year\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = cYear,\n                                reference_year = \"1986\")\n\n\n\nFigure 8: Group comparison between control and wellfield parcels between baseline and current year.\n\n\n\n\n\n3.2.6 Baseline (1984-1987) vs 2017 Wet Year\n\ncodeboxplot_wc_pft_year_statcompare1(attributes = attributes_pfix,\n                                parcels = parcels,\n                                comparison_year = \"2017\",\n                                reference_year = \"1986\")\n\n\n\nFigure 9: Group comparison between control and wellfield parcels between baseline and 2017."
  },
  {
    "objectID": "posts/lpt-stats/index.html#individual-parcel-analysis",
    "href": "posts/lpt-stats/index.html#individual-parcel-analysis",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n3.3 Individual Parcel Analysis",
    "text": "3.3 Individual Parcel Analysis\nTable 1 below includes parcels both below baseline in 2022 and for the past five consecutive years or more.\n?@tbl-parcel-delta-sig-table includes all parcels below baseline in the 2022 but may have recovered to baseline in the recent wet years of 2017 and 2019.\nColumn Descriptions\n\nCover.Delta and Grass.Delta is the difference from baseline compared to the current year.\nCover_sig.counter and Grass_sig.counter number of years the parcel has been below baseline in a row counting back from current year.\nn total number of years sampled out of 32 since baseline and 1991-2022.\nGB_TYPE greenbook vegetation management type (A,B,C,D,E).\nHolland vegetation classification greenbook assignment.\npGrass parcel-average perennial grass proportion of total perennial cover.\npShrub parcel-average shrub proportion of total perennial cover.\nCover total perennial cover in 2022.\nGrass total perennial grass cover in 2022.\nShrub total perennial shrub cover in 2022.\n\n\ncodedeltas_ttest_att %>%\n      filter(Cover_sig.counter > 4 | Grass_sig.counter > 4,  Type == 'W') %>%\n      # mutate(p.value = round(p.value,3)) %>%\n      select(Parcel,wellfield,GB_TYPE, Holland,Cover.Delta, Grass.Delta,Cover_sig.counter,Grass_sig.counter, n, \n             Cover,Grass,Shrub) %>% \n  gt(groupname_col = \"wellfield\") %>%\n  summary_rows(\n    groups = TRUE,\n    columns = Cover.Delta,\n    fns = list(\n      mean = \"mean\"),\n    decimals = 1\n  )\n\n\n\n\n\n\nTable 1:  Wellfield parcels statistically below baseline for the past five years or more. \n  \n  \n\n      Parcel\n      GB_TYPE\n      Holland\n      Cover.Delta\n      Grass.Delta\n      Cover_sig.counter\n      Grass_sig.counter\n      n\n      Cover\n      Grass\n      Shrub\n    \n\n\nBig Pine\n    \n\n\nBGP154\nC\nNevada Saltbush Meadow\n-1.6\n-4.8\n0\n11\n32\n22.6\n3.6\n18.8\n\n\n\nFSP006\nAC\nAlkali Meadow\n-8.0\n-19.5\n1\n32\n32\n15.8\n1.8\n14.0\n\n\nmean\n—\n—\n—\n−4.8\n—\n—\n—\n—\n—\n—\n—\n\n\nTaboose-Aberdeen\n    \n\n\nBLK021\nB\nNevada Saltbush Scrub\n-15.1\n-9.8\n2\n24\n28\n15.5\n0.7\n14.8\n\n\n\nBLK142\nC\nAlkali Meadow\n-7.8\n-12.4\n2\n12\n29\n18.2\n4.8\n13.4\n\n\n\nTIN050\nC\nAlkali Meadow\n-6.6\n-25.4\n0\n14\n24\n29.7\n8.9\n20.8\n\n\n\nTIN053\nA\nAlkali Meadow\n-4.8\n-18.8\n0\n11\n20\n30.2\n11.4\n18.9\n\n\n\nTIN064\nC\nAlkali Meadow\n-18.1\n-17.8\n3\n25\n25\n13.1\n3.0\n10.1\n\n\n\nTIN068\nA\nAlkali Meadow\n-4.1\n-7.7\n0\n5\n31\n9.2\n1.4\n7.8\n\n\nmean\n—\n—\n—\n−9.4\n—\n—\n—\n—\n—\n—\n—\n\n\nThibaut-Sawmill\n    \n\n\nBLK094\nC\nAlkali Meadow\n-20.8\n-22.5\n22\n22\n32\n20.0\n6.5\n12.3\n\n\n\nBLK096\nA\nDesert Sink Scrub\n-11.7\n-3.7\n5\n0\n19\n9.1\n5.3\n3.9\n\n\n\nBLK099\nC\nAlkali Meadow\n-16.4\n-21.0\n1\n6\n32\n31.6\n19.1\n7.8\n\n\n\nIND026\nC\nAlkali Meadow\n-30.4\n-47.6\n18\n18\n18\n18.6\n1.4\n16.2\n\n\n\nIND029\nC\nAlkali Meadow\n-3.6\n-14.0\n0\n22\n22\n18.4\n0.0\n17.9\n\n\nmean\n—\n—\n—\n−16.6\n—\n—\n—\n—\n—\n—\n—\n\n\nLaws\n    \n\n\nFSL044\nC\nAlkali Meadow\n-41.5\n-48.8\n11\n12\n19\n27.7\n19.5\n4.3\n\n\n\nFSL054\nD\nModoc Gr Basin Riparian Scrub\n-59.7\n11.9\n17\n0\n17\n30.3\n21.8\n3.2\n\n\n\nLAW035\nC\nAlkali Meadow\n-30.2\n-25.7\n20\n3\n20\n3.0\n1.6\n0.9\n\n\n\nLAW043\nE\nRush Sedge Meadow\n-51.7\n-59.4\n20\n20\n20\n9.4\n0.6\n8.1\n\n\n\nLAW052\nC\nAlkali Meadow\n-20.8\n-22.3\n27\n27\n27\n7.0\n0.0\n7.0\n\n\n\nLAW062\nC\nRabbitbrush Meadow\n-12.0\n-5.6\n5\n14\n29\n9.4\n2.3\n5.3\n\n\n\nLAW065\nA\nAlkali Meadow\n-1.3\n-7.6\n0\n14\n31\n8.4\n0.8\n7.5\n\n\n\nLAW072\nC\nAlkali Meadow\n-36.9\n-51.2\n2\n16\n16\n27.3\n13.0\n11.8\n\n\n\nLAW082\nC\nRabbitbrush Meadow\n-8.7\n-5.7\n2\n27\n27\n7.6\n0.0\n7.5\n\n\n\nLAW085\nC\nAlkali Meadow\n-12.2\n-17.7\n3\n32\n32\n17.9\n12.4\n5.5\n\n\n\nLAW137\nC\nRabbitbrush Meadow\n-3.0\n-8.4\n0\n16\n29\n18.6\n2.6\n15.7\n\n\nmean\n—\n—\n—\n−25.3\n—\n—\n—\n—\n—\n—\n—\n\n\nIndependence-Oak\n    \n\n\nIND019\nC\nAlkali Meadow\n-48.0\n-33.4\n13\n4\n30\n27.0\n13.6\n9.2\n\n\n\nIND021\nC\nRabbitbrush Meadow\n-39.6\n-21.9\n11\n9\n13\n28.4\n6.1\n21.7\n\n\nmean\n—\n—\n—\n−43.8\n—\n—\n—\n—\n—\n—\n—\n\n\nSymmes-Shepherd\n    \n\n\nIND139\nC\nNevada Saltbush Meadow\n-27.4\n-13.4\n5\n32\n32\n21.1\n4.6\n16.3\n\n\nmean\n—\n—\n—\n−27.4\n—\n—\n—\n—\n—\n—\n—\n\n\n\n\n\n\ncode# parcel_datatable_chronic\n# note -update this function in functions library"
  },
  {
    "objectID": "posts/lpt-stats/index.html#current-year-parcel-summaries",
    "href": "posts/lpt-stats/index.html#current-year-parcel-summaries",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n5.2 Current year parcel summaries",
    "text": "5.2 Current year parcel summaries\nParcels significantly below baseline in 2022.\n\ncodeparcel_datatable_significant"
  },
  {
    "objectID": "posts/lpt-stats/index.html#perennial-cover-and-grass-cover-change-from-baseline---all-years",
    "href": "posts/lpt-stats/index.html#perennial-cover-and-grass-cover-change-from-baseline---all-years",
    "title": "Vegetation Condition in Groundwater-Dependent Ecosystems Affected by Pumping 2022",
    "section": "\n5.1 Perennial Cover and Grass Cover Change from baseline - all years",
    "text": "5.1 Perennial Cover and Grass Cover Change from baseline - all years\nStatistical test results comparing baseline to total perennial plant cover and perennial grass cover as a subset of total perennial cover. Two rows for each parcel are included, one summarizing perennial grass change from baseline and one for total perennial cover. Filtering, sorting, search and export of the filtered table is available.\n\none row each for total perennial cover change and grass cover change.\nstatistical significance ‘significant’ or not significant ‘ns’\neffect size (estimate) in units of cover (0-100) current cover\n2022 (estimate1) and baseline cover (estimate2)\nstatistical method (method - Welch Two Sample t-test or One Sample t-test\ndepending on the baseline sample size following Box I.C.1.a.ii)\ncurrent year sample size (n.x)\nbaseline sample size (n.y)\ntest statistic (statistic)\np-value (p.value).\n\n\ncodeparcel_year_meta_combined_results %>% \n  filter(Year.x == cYear) %>% \n  select(Parcel,cover_type,significance,  estimate, estimate1, estimate2, method,n.x, n.y, statistic, p.value) %>%  \n  mutate(across(estimate:estimate2, round, 0)) %>%\n  mutate(across(statistic:p.value, round, 3)) %>% \n  datatable(extensions = c('Buttons','FixedColumns'),\n            filter = c(\"top\"),\n            options = list(\n              dom = 'Blfrtip',\n              buttons = c('copy', 'csv', 'excel', 'pdf', 'print'),\n              scrollX = TRUE,\n              fixedColumns = list(leftColumns = 2, rightColumns = 0),\n              pageLength = 5, \n              autoWidth = TRUE)\n            )\n\n\n\n\n\n\nThe table below includes parcel summaries averaged over the transect samples for all years in which the parcel was sampled. Each parcel for each year sampled has a row. As of 2022 3,796 parcel-years have been recorded.\n\ncodeparcels_deltas %>% \n  select(Parcel, Year,Cover, Cover.Delta, Grass, Grass.Delta, Shrub, Shrub.Delta) %>% \n  mutate(across(Cover:Shrub.Delta, round, 1)) %>% \n  datatable(extensions = c('Buttons','FixedColumns'),\n            filter = c(\"top\"),\n            options = list(\n              dom = 'Blfrtip',\n              buttons = c('copy', 'csv', 'excel', 'pdf', 'print'),\n              scrollX = TRUE,\n              fixedColumns = list(leftColumns = 2, rightColumns = 0),\n              pageLength = 5, \n              autoWidth = TRUE)\n            )"
  },
  {
    "objectID": "posts/laws-reveg/index.html#findings",
    "href": "posts/laws-reveg/index.html#findings",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Findings",
    "text": "Findings\nAfter examining the data provided to ICWD against the 2003 MND Revegetation Plan revegetation goals, LADWP’s reporting comports with ICWD’s independent data summaries in that cover goals and species richness was satisified in 2022 based on LADWP’s data collection see Table 1 for an overview of cover values for all parcels. Species level tables, charts and spatial maps are located in parcel sections below: Laws 90 (Table 2, Figure 1, Figure 2), Laws 95 (Table 3, Figure 3, Figure 4), Laws 94 (Table 4, Figure 5, Figure 6), and Laws 129 (Table 5, Figure 7, Figure 8 )."
  },
  {
    "objectID": "posts/laws-reveg/index.html#recommendations",
    "href": "posts/laws-reveg/index.html#recommendations",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Recommendations",
    "text": "Recommendations\nICWD requests to take part in the field sampling in 2024. In addition to this, ICWD will acquire annual UAV-aerial imagery to document vegetation changes in 2023, 2024 and 2025. A subset of sampling will be conducted in 2025 by ICWD to verify cover goals have been met after two full growing seasons without irrigation.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTable 1:  Summary of cover from 2022 data. TLC is total live cover including annual weed cover. Cover is total perennial cover with a revegetation goal of 10% cover. Shrub, Herb, and Grass are the functional type components of Cover. goal_above_below indicates the current cover difference from the goal (positive above goal and negative below goal.) \n  \n  \n    \n      parcel\n      TLC\n      Cover\n      Shrub\n      Herb\n      Grass\n      n.transects\n      goal_above_below\n    \n  \n  \n    LAW090\n19.900\n15.725\n15.300\n0.075\n0.225\n20\n5.72\n    LAW094\n16.775\n10.650\n9.925\n0.000\n0.725\n20\n0.65\n    LAW095\n15.025\n12.200\n11.000\n0.000\n1.200\n20\n2.20\n    LAW129\n19.075\n16.625\n16.225\n0.325\n0.075\n20\n6.62"
  },
  {
    "objectID": "posts/laws-reveg/index.html#laws-90-94-95",
    "href": "posts/laws-reveg/index.html#laws-90-94-95",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Laws 90, 94, 95",
    "text": "Laws 90, 94, 95\n\n\n\nLaws 129/118"
  },
  {
    "objectID": "posts/laws-reveg/index.html#laws-129",
    "href": "posts/laws-reveg/index.html#laws-129",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Laws 129",
    "text": "Laws 129\n\n\n\nLaws 129"
  },
  {
    "objectID": "posts/laws-reveg/index.html#laws-90-94-95-1",
    "href": "posts/laws-reveg/index.html#laws-90-94-95-1",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Laws 90, 94, 95",
    "text": "Laws 90, 94, 95\n\n\n\nLaws 90\n\n\n\n\n\nLaws 90"
  },
  {
    "objectID": "posts/laws-reveg/index.html#laws-129-1",
    "href": "posts/laws-reveg/index.html#laws-129-1",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Laws 129",
    "text": "Laws 129\n\n\n\nLaws 129"
  },
  {
    "objectID": "posts/laws-reveg/index.html#reference-parcel-cover-composition",
    "href": "posts/laws-reveg/index.html#reference-parcel-cover-composition",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Reference Parcel Cover Composition",
    "text": "Reference Parcel Cover Composition\nLive cover, number of species hit and detected (trace), number of species in parcel, plant community classification and distance from revegetation site.\n\nLaws 90, 94, 95\n\n\n\nLaws 129"
  },
  {
    "objectID": "posts/laws-reveg/index.html#reference-species",
    "href": "posts/laws-reveg/index.html#reference-species",
    "title": "Evaluation of LADWP’s Revegetation Monitoring Report for Land Removed from Irrigation: Laws Parcels 090, 095,129, and Abandoned Land Parcel 094",
    "section": "Reference Species",
    "text": "Reference Species\nTaxonomic, common name, life form, vegetation parcel containing species, soil compatibility.\n\nLaws 90, 94, 95\n\n\n\n\nLaws 129"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#data-table---request-2022",
    "href": "posts/ndvi-stats/index.html#data-table---request-2022",
    "title": "Historical range of variability across groundwater-dependent ecosystems",
    "section": "\n2.1 data table - request 2022",
    "text": "2.1 data table - request 2022\n\n\n\n\ncodedeltas <- deltas_ttest_att %>%\n  select(Parcel,GB_TYPE,Holland, Type,wellfield,Cover,Grass,Shrub,Cover_significance,Grass_significance,Cover.Delta, Grass.Delta, n,Cover_sig.counter,Grass_sig.counter,\n         pGrass,pShrub) %>% clean_names()\n\n\n\np_tab <-   deltas %>%\ndatatable(\ncaption =\n'Vegetation parcels sampled in 2022\ncompared to baseline (1984-1987).\nTable columns include:\ngreen book vegetation type (gb_type),\nHolland plant community categorization (holland),\nwellfield or control area (type),\nname of (wellfield),\nparcel average cover by functional group (cover, grass, shrub),\nperennial grass significantly below baseline (grass_significance),\ntotal perennial cover below baseline (cover_significance),\ncurrent year compared to baseline grass and shrub cover (grass_delta and shrub_delta),\nyears sampled (n),\nnumber of years in a row statistically different from baseline (cover_sig_counter, grass_sig_counter),\nproportions of perennial grass (p_grass) and shrub (p_shrub).',\n          extensions = 'Buttons',\n          rownames = FALSE,\n          filter = 'top',\n          options = list(\n              dom = 'Bfrtip',\n              # buttons = I('colvis'),\n              buttons = c('copy', 'csv', 'excel', 'pdf', 'print'),\n              scrollX = TRUE,\n              fixedColumns = list(leftColumns = 2, rightColumns = 0),\n              fixedHeader = TRUE,\n              pageLength = 7,\n              autoWidth = TRUE,\n              colReorder = TRUE))\n# %>% formatPercentage('p_grass','p_shrub')\n\np_tab"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#filter-year",
    "href": "posts/ndvi-stats/index.html#filter-year",
    "title": "Historical range of variability across groundwater-dependent ecosystems",
    "section": "\n3.1 filter year",
    "text": "3.1 filter year\n\ncode# Parcel\n# x$Parcel[x$Parcel==\"ABB012\"]<-\"BLK029\"\n\nrj <- rqc2 %>% filter(year == '2022')\n\n\n\ncode# ggdist\n# year %in% c(\"2022\",\"2021\")\n rqc2 %>% filter(gb_type == \"C\",comm_name == \"Alkali Meadow\" ) %>% \n   ggplot()+\n   aes(y=as.factor(year),x=mean_ndvi)+\n  # facet_wrap(~comm_name)+\n   stat_halfeye()\n\n\n\n\n\ncode rqc2 %>% filter(gb_type == \"C\",comm_name == \"Alkali Meadow\" ) %>% distinct(zone_name)\n\n# A tibble: 284 × 1\n# Groups:   zone_name [284]\n   zone_name\n   <chr>    \n 1 BEE014   \n 2 BEE020   \n 3 BGP011   \n 4 BGP017   \n 5 BGP018   \n 6 BGP031   \n 7 BGP032   \n 8 BGP047   \n 9 BGP051   \n10 BGP056   \n# … with 274 more rows\n\ncode# map these using join.\n\n\n\ncode#only 2002 as filtered above\nrspar <- x1 %>% select(parcel,wellfield,type,\n                       holland,\n                       tlc,cover,shrub,grass,\n                       grass_significance,\n                       grass_sig_counter,\n                       cover_significance,\n                       cover_sig_counter,\n                       cover_delta,grass_delta,\n                       p_shrub,p_grass)  %>%\n  left_join(rj, by = c(\"parcel\" = \"zone_name\"))\n\n\n#\n# left_join(rqc2,by = c(\"parcel\" = \"zone_name\")\n\n\n\n# rspar %>% write_csv('output/gis_output_complete.csv')\nrsp <- unique(rj$zone_name)\n\n# futher whittle columns\nrspar2 <- rspar %>% select(parcel,wellfield,type,\n                       holland,\n                       tlc,cover,shrub,grass,\n                       grass_significance,\n                       grass_sig_counter,\n                       cover_significance,\n                       cover_sig_counter,\n                       cover_delta,grass_delta,\n                       p_shrub,p_grass,\n                      mean_ndvi,\n                percentile,\n                sd_ndvi,se\n                ) %>%\n  clean_names() %>%\n  filter(!is.na(mean_ndvi))\n\n\n\ncoderspar2 %>% ggplot(aes(x = mean_ndvi, y = cover, size = grass))+\n  geom_point()+\n  geom_smooth(method = 'lm',se = FALSE)\n\n\n\ncode# +\n  # facet_wrap(~holland)\n\n\n\ncodeggscatterstats(\n  data  = rspar2,\n  x     = mean_ndvi,\n  y     = cover,\n  type  = \"parametric\",\n  xlab  = \"Mean NDVI\",\n  ylab  = \"Perennial Cover\",\n  title = \"Relationship between NDVI and Field Measured Perennial Cover\"\n)\n\n\n\n\n\ncode# par_rs\n\n\n# method\n# A character string indicating which correlation coefficient is to be used for\n# the test. One of \"pearson\" (default), \"kendall\", \"spearman\" (but see also the\n# robust argument), \"biserial\", \"polychoric\", \"tetrachoric\", \"biweight\", \"distance\",\n# \"percentage\" (for percentage bend correlation), \"blomqvist\" (for Blomqvist's\n# coefficient), \"hoeffding\" (for Hoeffding's D), \"gamma\", \"gaussian\" (for Gaussian\n# Rank correlation) or \"shepherd\" (for Shepherd's Pi correlation). Setting\n# \"auto\" will attempt at selecting the most relevant method (polychoric when\n# ordinal factors involved, tetrachoric when dichotomous factors involved,\n# point-biserial if one dichotomous and one continuous and pearson otherwise).\n# See below the details section for a description of these indices.\n# par_rs %>% correlation()\ngrouped_ggscatterstats(\n  data  =  dplyr::filter(par_rs, parcel %in% c('BIS055','BIS060')),\n  # data  =  dplyr::filter(par_rs, parcel %in% c('BLK094','BLK099')),\n  type  = \"parametric\",\n  bayesian = TRUE,\n  # bayesian_prior =\n  x     = mean_ndvi,\n  y     = cover,\n  grouping.var = parcel,\n  xlab  = \"Mean NDVI\",\n  ylab  = \"Perennial Cover\",\n  label.var = year, ## variable to use for labeling data points\n  label.expression = year > 2016 | year < 1990 , ## expression for deciding which points to label\n  # title = \"NDVI late growing season average vs field-measured vegetation cover 1984-2022\",\n  annotation.args = list(\n    title = \"NDVI late growing season average vs field-measured vegetation cover 1984-2022\",\n    caption = \"Source: inyowater.org\"\n  ),\n  plotgrid.args = list(nrow = 1, ncol = 2)\n\n)\n\n\n\n\n\ncode# data <- simulate_simpson(n = 100, groups = 10)\n# \n# summary(data)\n# \n# correlation(data, multilevel = TRUE)\n# correlation(data, multilevel = TRUE, bayesian = TRUE)\n\npar_rs2 <- par_rs %>% mutate(period = case_when(year <= 1990 ~\"1985-1990\",\n                                     year > 1990 & year <= 1995 ~ \"1991-1995\",\n                                     year > 1995 & year <= 2000 ~ \"1996-2000\",\n                                     year > 2000 & year <= 2005 ~ \"2001-2005\",\n                                     year > 2005 & year <= 2010 ~ \"2006-2010\",\n                                     year > 2010 & year <= 2015 ~ \"2011-2015\",\n                                     year > 2015 & year <= 2020 ~ \"2016-2020\",\n                                     year > 2020 & year <= 2022 ~ \"2021-2022\"),\n                             ndvi_class = case_when(mean_ndvi < .1 ~ 1,\n                                                    mean_ndvi >= .1 & mean_ndvi < .2 ~ 2,\n                                                    mean_ndvi >= .2 & mean_ndvi < .3 ~ 3,\n                                                    mean_ndvi >= .3 & mean_ndvi < .4 ~ 4,\n                                                    mean_ndvi >= .4 & mean_ndvi < .5 ~ 5,\n                                                    mean_ndvi >= .5 & mean_ndvi < .6 ~ 6,\n                                                    mean_ndvi >= .6 & mean_ndvi < .7 ~ 7,\n                                                    mean_ndvi >= .7 ~ 8))\n\n\n\ncode# a# C:\\Dropbox\\Rprojects\\wflow-veg\\data\\zdon_springs_2022.csv\n#---ndvi facet lpt\npar_rs2 %>% \n  # filter(!(period %in% c('1996-2000',\"2001-2005\",\n# \"2006-2010\"))) %>% \n  # filter(year > 2015) %>% \n  # filter(parcel == pid) %>%\n  filter(parcel == \"BLK094\") %>%\n  ggplot(aes(x = cover,\n              y = mean_ndvi,\n              # group = gb_type,\n              # color = gb_type,\n             size = grass,\n              # identity = period\n              ))+\n  geom_point(aes(color = period))+\n  geom_smooth(method='lm', se=FALSE, color='turquoise4') \n\n\n\ncode# +\n  # geom_smooth(aes(color = period, stat = 'lm',method = \"lm\"))+\n  # facet_wrap(~period)\n  # geom_smooth(color = 'black', method = \"lm\", se = FALSE)\n\n# +\n  # ggrepel::geom_label_repel()\n\n\n\ncode# correlation(par_rs, multilevel = TRUE, bayesian = TRUE)\npar_rs2 %>% filter(!is.na(ndvi_class) & !is.na(cover) ) %>% \n  # filter(!(period %in% c('1996-2000',\"2001-2005\",\n# \"2006-2010\"))) %>%\n  # filter(year > 2015) %>% \n  # filter(parcel == pid) %>%\n  # filter(parcel == \"BLK094\") %>%\n  ggplot(aes(x = mean_ndvi,\n              y = cover,\n             # size = grass,\n             color = period)\n         )+\n  geom_point()+\n  geom_smooth(method='lm', se=FALSE, color='turquoise4')+\n  facet_wrap(~ndvi_class)\n\n\n\n\n\ncode# correlation(par_rs, multilevel = TRUE, bayesian = TRUE)\npar_rs2 %>% filter(!is.na(ndvi_class) & !is.na(cover) ) %>% \n  # filter(!(period %in% c('1996-2000',\"2001-2005\",\n# \"2006-2010\"))) %>%\n  # filter(year > 2015) %>% \n  # filter(parcel == pid) %>%\n  # filter(parcel == \"BLK094\") %>%\n  ggplot(aes(x = cover,\n              y = mean_ndvi\n             # ,\n             # group = period,\n             # size = grass,\n             # color = ndvi_class\n             )\n         )+\n  geom_point()+\n  # stat_lineribbon()\n  geom_smooth(method='lm')\n\n\n\ncode# +\n  # facet_wrap(~ndvi_class)\n\n\n\ncode#ggdist for ndvi_class - \npar_rs2 %>% filter(!is.na(ndvi_class) & !is.na(cover) ) %>% \n  # filter(!(period %in% c('1996-2000',\"2001-2005\",\n# \"2006-2010\"))) %>%\n  # filter(year > 2015) %>% \n  # filter(parcel == pid) %>%\n  # filter(parcel == \"BLK094\") %>%\n  ggplot(aes(x = ndvi_class,\n              y = cover,\n             fill = after_stat(abs(y) < 25))\n             # ,\n             # group = period,\n             # size = grass,\n             # color = gb_type,\n             # add = 'jitter'\n             )+\n  stat_slab()+\n   # stat_histinterval()+\n  # stat_pointinterval(position = position_dodge(width = .4, preserve = \"single\"))+\n  stat_dotsinterval(quantiles=100)+\n  geom_hline(yintercept = c(25, 50), linetype = \"dashed\") +\n  scale_fill_manual(values = c(\"gray80\", \"skyblue\"))\n\n\n\ncode# +\n  # facet_wrap(~gb_type+comm_name)\n  # d# geom_point()+\n\n\n\ncodeggbetweenstats(par_rs2, ndvi_class, mean_ndvi)\n\n\n\n\n\ncodendvi_cover_function <- function(data, pid){\n\npar_rs %>%\n  filter(parcel == pid) %>%\n  ggplot((aes(x = cover,\n              y = mean_ndvi,\n              group = gb_type,\n              color = gb_type,\n              identity = year)))+\n  geom_point()\n  # +\n    # ggrepel::geom_label_repel()\n  # +\n  # geom_smooth(na.rm = TRUE)\n  # +\n  # facet_wrap(~comm_name)\n\n}\n\n\n\ncodendvi_cover_function(data = par_rs, pid = 'BLK094')\n\n\n\n\n\ncodep <-\n  par_rs2 %>% \n  # filter(parcel == \"BLK094\") %>% \n  ggplot(aes(x = p_grass, y = p_shrub)) +\n  geom_point() +\n  labs(title = 'Year: {frame_time}', x = '% Grass', y = '% Shrub') +\n  # scale_x_log10()+\n  # facet_wrap(~gb_type)+\n  transition_time(year)+\n  ease_aes('linear')\n\n\n\ncode# Notice we added frame = year and saved the plot as p. \n# We then display it as an animation with the gg_animate function:\n# anim_save(\"pgrass-shrub\", animation = last_animation())\nanimate(p, duration = 30, fps = 1, width = 700, height = 700, renderer = gifski_renderer())\n\n\n\ncode# anim_save(\"output.gif\")\n\n\n# print(p)\n# animate(p, renderer = ffmpeg_renderer())\n\n# grouped_ggscatterstats(\n#   data             = dplyr::filter(rspar2, parcel == 'BLK094'))\n#   # data             = dplyr::filter(rspar2, genre %in% c(\"Action\", \"Comedy\")),\n#   x                = mean_ndvi,\n#   y                = cover,\n#   type             = \"robust\",\n#   grouping.var     = gb_type,\n#   label.var        = gb_type,\n#   label.expression = cover_significance == 'significant',\n#   xlab             = \"NDVI Jul 15 - Sep 15 Mean\",\n#   ggtheme          = ggplot2::theme_grey(),\n#   ggplot.component = list(ggplot2::scale_x_continuous(breaks = seq(2, 9, 1), limits = (c(2, 9)))),\n#   plotgrid.args    = list(nrow = 2),\n#   annotation.args  = list(title = \"Relationship between NDVI and Field Measured Perennial Cover\")\n# )"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#function-for-outputting-set-of-figures",
    "href": "posts/ndvi-stats/index.html#function-for-outputting-set-of-figures",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.1 Function for outputting set of figures",
    "text": "1.1 Function for outputting set of figures\ncode# This function outputs through iteration pngs images of time series\nplot_ndvi_ts_with_percentiles <- function(data, parcel_name){\n  \ncat(\"## \", parcel_name, \"\\n\")\n\n  set <- data %>% filter(zone_name == parcel_name)\nc <- set %>% select(zone_name,gb_type,comm_name)\n  d <- c %>% distinct()\nf <- set %>% ggplot(aes(x = year, y = mean_ndvi, ymin = mean_ndvi - se, ymax = mean_ndvi + se, color = percentile, label = round(percentile*100,0)))+\n  # mid<-round(max(filtered$`%50`),2)\n  geom_errorbar(colour = \"gray\", stat = \"identity\", width = 0.4) +\n  # geom_boxplot(colour = \"black\", stat = \"identity\", width = 0.65, fill = \"#ff5555\") +\n  geom_line(data = set, aes(x = set$year, y = set$x10_percent),color = 'red')+\n  geom_line(data = set, aes(x = set$year, y = set$x20_percent),color = 'orange')+\n  geom_line(data = set, aes(x = set$year, y = set$x30_percent),color = 'yellow')+\n  geom_line(data = set, aes(x = set$year, y = set$x40_percent),color = 'gray')+\n  geom_line(data = set, aes(x = set$year, y = set$x50_percent),color = 'black')+\n  geom_line(data = set, aes(x = set$year, y = set$x60_percent),color = 'gray')+\n  geom_line(data = set, aes(x = set$year, y = set$x70_percent),color = 'lightgreen')+\n  geom_line(data = set, aes(x = set$year, y = set$x80_percent),color = 'green')+\n  geom_line(data = set, aes(x = set$year, y = set$x90_percent),color = 'darkgreen')+\n  geom_text_repel()+\n  geom_line(aes(),color = 'gray')+\n  scale_color_gradientn(colours = rainbow(5))+\n  geom_point()+\n  labs(title = paste0(parcel_name,\"_\",d$gb_type[[1]]))+\n  ylab('Mean NDVI (Jul 15 - Sep 15)')+\n  xlab('Year')\n\np <- f %>% ggMarginal(type = \"densigram\", margins = \"y\")\n# p <- f %>% ggMarginal(type = \"densigram\", margins = \"y\")\n# p <-\n#   ggplot(mtcars, aes(mpg, wt)) +\n#   geom_point()\n# file.name <- paste0(\"output/percentile_plots2/\",parcel_name,\"_\",d$gb_type[[1]],\"_\",d$comm_name[[1]],\".png\")\n\n# png(paste0(\"output/percentile_plots2/\",parcel_name,\"_\",d$gb_type[[1]],\".png\"))\ncat(\"\\n\")\nprint(p)\ncat(\"\\n\")\n# print(p)\n# p\n# dev.off()\n\n# print(p)\n# ggsave(paste0(\"output/percentile_plots/\",parcel_name,\".png\")\n# )\n}\n\ncodePIDs <- deltas_ttest_att %>%  filter(Cover_sig.counter > 0 | Grass_sig.counter > 0,  Type == 'W') %>% \n    # filter(wellfield == 'Laws') %>%\n      select(Parcel,wellfield,GB_TYPE, Holland,Cover.Delta, Grass.Delta,Cover_sig.counter,Grass_sig.counter, n, \n             Cover,Grass,Shrub) %>% distinct(Parcel)\n\n\n\ncode# define the list over which iteration is based\n# here just all the unique parcel names\n# PIDs <- unique(rqc2$zone_name)\nlist <- PIDs$Parcel\ndata <- rqc2 %>% filter(zone_name %in% list)\nrp <- data %>% distinct(zone_name)\nrlist <- rp$zone_name\n# start a for loop and watch the output folder populate with hundreds of plots\n# for (PID in rlist) {\n# plot_ndvi_ts_with_percentiles(data = rqc2, parcel_name = PID)\n  \n# }\n\n\ncode# if (!require(devtools)) install.packages(\"devtools\")\n# library(devtools)\n# install_github(\"GegznaV/knitrContainer\")\n\n# lapply(1:length(List), function(i) {\n# lapply(rlist, function(PID){\n  for (PID in rlist) {\ncat(\"## \", PID, \"\\n\")\n\n  set <- rqc2 %>% filter(zone_name == PID)\nc <- set %>% select(zone_name,gb_type,comm_name)\n  d <- c %>% distinct()\nf <- set %>% ggplot(aes(x = year, y = mean_ndvi, ymin = mean_ndvi - se, ymax = mean_ndvi + se, color = percentile, label = round(percentile*100,0)))+\n  # mid<-round(max(filtered$`%50`),2)\n  geom_errorbar(colour = \"gray\", stat = \"identity\", width = 0.4) +\n  # geom_boxplot(colour = \"black\", stat = \"identity\", width = 0.65, fill = \"#ff5555\") +\n  geom_line(data = set, aes(x = set$year, y = set$x10_percent),color = 'red')+\n  geom_line(data = set, aes(x = set$year, y = set$x20_percent),color = 'orange')+\n  geom_line(data = set, aes(x = set$year, y = set$x30_percent),color = 'yellow')+\n  geom_line(data = set, aes(x = set$year, y = set$x40_percent),color = 'gray')+\n  geom_line(data = set, aes(x = set$year, y = set$x50_percent),color = 'black')+\n  geom_line(data = set, aes(x = set$year, y = set$x60_percent),color = 'gray')+\n  geom_line(data = set, aes(x = set$year, y = set$x70_percent),color = 'lightgreen')+\n  geom_line(data = set, aes(x = set$year, y = set$x80_percent),color = 'green')+\n  geom_line(data = set, aes(x = set$year, y = set$x90_percent),color = 'darkgreen')+\n  geom_text_repel()+\n  geom_line(aes(),color = 'gray')+\n  scale_color_gradientn(colours = rainbow(5))+\n  geom_point()+\n  labs(title = paste0(PID,\"_\",d$gb_type[[1]]))+\n  ylab('Mean NDVI (Jul 15 - Sep 15)')+\n  xlab('Year')\n\np <- f %>% ggMarginal(type = \"densigram\", margins = \"y\")\n\n\n# add_as_is()\n# Create\ncontainer <- knitrContainer()\n# Collect\ncontainer <- add_as_is(container, p)\n# Print\n\n# file.name <- paste0(\"output/percentile_plots2/\",parcel_name,\"_\",d$gb_type[[1]],\"_\",d$comm_name[[1]],\".png\")\n\n# png(paste0(\"output/percentile_plots2/\",parcel_name,\"_\",d$gb_type[[1]],\".png\"))\ncat(\"\\n\")\nprint_all(container)\n# print(p)\ncat(\"\\n\")\n}"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#bgp088",
    "href": "posts/ndvi-stats/index.html#bgp088",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.2 BGP088",
    "text": "1.2 BGP088"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#bgp154",
    "href": "posts/ndvi-stats/index.html#bgp154",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.3 BGP154",
    "text": "1.3 BGP154"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#bgp162",
    "href": "posts/ndvi-stats/index.html#bgp162",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.4 BGP162",
    "text": "1.4 BGP162"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk006",
    "href": "posts/ndvi-stats/index.html#blk006",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.5 BLK006",
    "text": "1.5 BLK006"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk008",
    "href": "posts/ndvi-stats/index.html#blk008",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.6 BLK008",
    "text": "1.6 BLK008"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk009",
    "href": "posts/ndvi-stats/index.html#blk009",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.7 BLK009",
    "text": "1.7 BLK009"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk021",
    "href": "posts/ndvi-stats/index.html#blk021",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.8 BLK021",
    "text": "1.8 BLK021"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk033",
    "href": "posts/ndvi-stats/index.html#blk033",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.9 BLK033",
    "text": "1.9 BLK033"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk039",
    "href": "posts/ndvi-stats/index.html#blk039",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.10 BLK039",
    "text": "1.10 BLK039"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk044",
    "href": "posts/ndvi-stats/index.html#blk044",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.11 BLK044",
    "text": "1.11 BLK044"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk069",
    "href": "posts/ndvi-stats/index.html#blk069",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.12 BLK069",
    "text": "1.12 BLK069"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk074",
    "href": "posts/ndvi-stats/index.html#blk074",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.13 BLK074",
    "text": "1.13 BLK074"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk075",
    "href": "posts/ndvi-stats/index.html#blk075",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.14 BLK075",
    "text": "1.14 BLK075"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk094",
    "href": "posts/ndvi-stats/index.html#blk094",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.15 BLK094",
    "text": "1.15 BLK094"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk095",
    "href": "posts/ndvi-stats/index.html#blk095",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.16 BLK095",
    "text": "1.16 BLK095"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk096",
    "href": "posts/ndvi-stats/index.html#blk096",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.17 BLK096",
    "text": "1.17 BLK096"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk099",
    "href": "posts/ndvi-stats/index.html#blk099",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.18 BLK099",
    "text": "1.18 BLK099"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#blk142",
    "href": "posts/ndvi-stats/index.html#blk142",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.19 BLK142",
    "text": "1.19 BLK142"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsl044",
    "href": "posts/ndvi-stats/index.html#fsl044",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.20 FSL044",
    "text": "1.20 FSL044"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsl051",
    "href": "posts/ndvi-stats/index.html#fsl051",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.21 FSL051",
    "text": "1.21 FSL051"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsl053",
    "href": "posts/ndvi-stats/index.html#fsl053",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.22 FSL053",
    "text": "1.22 FSL053"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsl054",
    "href": "posts/ndvi-stats/index.html#fsl054",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.23 FSL054",
    "text": "1.23 FSL054"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsl064",
    "href": "posts/ndvi-stats/index.html#fsl064",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.24 FSL064",
    "text": "1.24 FSL064"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsl116",
    "href": "posts/ndvi-stats/index.html#fsl116",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.25 FSL116",
    "text": "1.25 FSL116"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsl120",
    "href": "posts/ndvi-stats/index.html#fsl120",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.26 FSL120",
    "text": "1.26 FSL120"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsl123",
    "href": "posts/ndvi-stats/index.html#fsl123",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.27 FSL123",
    "text": "1.27 FSL123"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsl124",
    "href": "posts/ndvi-stats/index.html#fsl124",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.28 FSL124",
    "text": "1.28 FSL124"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsl130",
    "href": "posts/ndvi-stats/index.html#fsl130",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.29 FSL130",
    "text": "1.29 FSL130"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsp006",
    "href": "posts/ndvi-stats/index.html#fsp006",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.30 FSP006",
    "text": "1.30 FSP006"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsp015",
    "href": "posts/ndvi-stats/index.html#fsp015",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.31 FSP015",
    "text": "1.31 FSP015"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#fsp020",
    "href": "posts/ndvi-stats/index.html#fsp020",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.32 FSP020",
    "text": "1.32 FSP020"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#ind011",
    "href": "posts/ndvi-stats/index.html#ind011",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.33 IND011",
    "text": "1.33 IND011"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#ind019",
    "href": "posts/ndvi-stats/index.html#ind019",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.34 IND019",
    "text": "1.34 IND019"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#ind021",
    "href": "posts/ndvi-stats/index.html#ind021",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.35 IND021",
    "text": "1.35 IND021"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#ind026",
    "href": "posts/ndvi-stats/index.html#ind026",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.36 IND026",
    "text": "1.36 IND026"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#ind029",
    "href": "posts/ndvi-stats/index.html#ind029",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.37 IND029",
    "text": "1.37 IND029"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#ind035",
    "href": "posts/ndvi-stats/index.html#ind035",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.38 IND035",
    "text": "1.38 IND035"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#ind111",
    "href": "posts/ndvi-stats/index.html#ind111",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.39 IND111",
    "text": "1.39 IND111"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#ind124",
    "href": "posts/ndvi-stats/index.html#ind124",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.40 IND124",
    "text": "1.40 IND124"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#ind132",
    "href": "posts/ndvi-stats/index.html#ind132",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.41 IND132",
    "text": "1.41 IND132"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#ind133",
    "href": "posts/ndvi-stats/index.html#ind133",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.42 IND133",
    "text": "1.42 IND133"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#ind139",
    "href": "posts/ndvi-stats/index.html#ind139",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.43 IND139",
    "text": "1.43 IND139"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law035",
    "href": "posts/ndvi-stats/index.html#law035",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.44 LAW035",
    "text": "1.44 LAW035"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law043",
    "href": "posts/ndvi-stats/index.html#law043",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.45 LAW043",
    "text": "1.45 LAW043"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law052",
    "href": "posts/ndvi-stats/index.html#law052",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.46 LAW052",
    "text": "1.46 LAW052"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law062",
    "href": "posts/ndvi-stats/index.html#law062",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.47 LAW062",
    "text": "1.47 LAW062"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law065",
    "href": "posts/ndvi-stats/index.html#law065",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.48 LAW065",
    "text": "1.48 LAW065"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law070",
    "href": "posts/ndvi-stats/index.html#law070",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.49 LAW070",
    "text": "1.49 LAW070"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law072",
    "href": "posts/ndvi-stats/index.html#law072",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.50 LAW072",
    "text": "1.50 LAW072"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law078",
    "href": "posts/ndvi-stats/index.html#law078",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.51 LAW078",
    "text": "1.51 LAW078"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law082",
    "href": "posts/ndvi-stats/index.html#law082",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.52 LAW082",
    "text": "1.52 LAW082"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law085",
    "href": "posts/ndvi-stats/index.html#law085",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.53 LAW085",
    "text": "1.53 LAW085"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law105",
    "href": "posts/ndvi-stats/index.html#law105",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.54 LAW105",
    "text": "1.54 LAW105"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law108",
    "href": "posts/ndvi-stats/index.html#law108",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.55 LAW108",
    "text": "1.55 LAW108"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law122",
    "href": "posts/ndvi-stats/index.html#law122",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.56 LAW122",
    "text": "1.56 LAW122"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#law137",
    "href": "posts/ndvi-stats/index.html#law137",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.57 LAW137",
    "text": "1.57 LAW137"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#lnp045",
    "href": "posts/ndvi-stats/index.html#lnp045",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.58 LNP045",
    "text": "1.58 LNP045"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#man006",
    "href": "posts/ndvi-stats/index.html#man006",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.59 MAN006",
    "text": "1.59 MAN006"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#man007",
    "href": "posts/ndvi-stats/index.html#man007",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.60 MAN007",
    "text": "1.60 MAN007"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#man034",
    "href": "posts/ndvi-stats/index.html#man034",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.61 MAN034",
    "text": "1.61 MAN034"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#man037",
    "href": "posts/ndvi-stats/index.html#man037",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.62 MAN037",
    "text": "1.62 MAN037"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#man038",
    "href": "posts/ndvi-stats/index.html#man038",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.63 MAN038",
    "text": "1.63 MAN038"
  },
  {
    "objectID": "posts/ndvi-stats/index.html#man042",
    "href": "posts/ndvi-stats/index.html#man042",
    "title": "Seasonally-averaged interannual NDVI varibility of groundwater-dependent ecosystems in Owens Valley, CA, computed over the 1985-2022 period covered by Landsat 5/7/8/9",
    "section": "\n1.64 MAN042",
    "text": "1.64 MAN042\n\n\n\ncode# ) -> suppress"
  },
  {
    "objectID": "posts/monitoring-wells/index.html",
    "href": "posts/monitoring-wells/index.html",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "",
    "text": "Data from LADWP monitoring well reads, surface water gauging station reads, precipitation reads and aggregated totals and means of these data are typically provided to ICWD in January of each year. This document describes how to process the monitoring wells data and append it to the master database used internally by ICWD and also distributed to other agencies upon request (e.g. Cal Fish and Widlife, Big Pine Environmental Dept, US Fish and Widlife Service, Cal Dept. Water Resources to name a few). The data is also uploaded to the Owens Valley Groundwater Authority (OVGA) data management system and webmap.\nData is provided to ICWD in the ZRXP format - an ASCII data exchange file format of WISKI. I’ve investigated if tools exist to convert ZRXP format into something resembling human readable long format (aka tidy data), but I have not found anything as of 2022. Therefore I use some clunky yet clever excel tricks to tidy this data in a few minutes using the steps described below. After excel processing, I read this tidied data into R for minimal processing which is then appended to the master database with records from 1924 to present and then the special requirements for the OVGA upload is tackled.\nThe land surface corrected depth to water reads measured from the reference point (RP) and corrected for RP above ground elevation are included in the file labeled with DepthGE. The measurement from the RP are named DepthRP and water surface elevation included in the DepthWSE."
  },
  {
    "objectID": "posts/monitoring-wells/index.html#laws",
    "href": "posts/monitoring-wells/index.html#laws",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.1 Laws",
    "text": "7.1 Laws\n\ncodemo.dtws <- testwells.combined\n\n# Laws set\nstaid.set <- c(\n'T107',\n'T434',\n'T436',\n'T438',\n'T490',\n'T492',\n'T795',\n'V001G',\n'T574')\n\nmo.dtws %>% filter(staid %in% staid.set) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the Laws wellfield. Well T492 is dry if DTW is below 60 ft, and well T107 is dry if DTW is below 37 feet.\n\n\n\n\n\ncodemo.dtws %>% filter(staid %in% staid.set, dtw.bgs <40, year >1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of selected monitoring wells in the Laws area 1990 onward.\n\n\n\ncode# xlim()\n\n\n\ncodemo.dtws %>% filter(staid %in% staid.set, year > 2000)%>% ggplot(aes(x = date, y = dtw.bgs,color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of selected monitoring wells in the Laws area 2000 onward.\n\n\n\n\n\ncodemo.dtws %>% filter(staid %in% staid.set, year > 1985)%>% ggplot(aes(x = date, y = dtw.bgs,color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')+\n  facet_wrap(~staid)\n\n\n\nHydrographs of selected monitoring wells in the Laws area 1985 onward faceted by test well.\n\n\n\n\n\ncode# west bishop\nstaid.set <- c(\n'T387',\n'T389',\n'T390',\n'T391')\n\nmo.dtws %>% filter(dtw.bgs<40,staid %in% staid.set,year>1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the western Bishop wellfield."
  },
  {
    "objectID": "posts/monitoring-wells/index.html#bishop",
    "href": "posts/monitoring-wells/index.html#bishop",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.2 Bishop",
    "text": "7.2 Bishop\n\ncode# northern bishop\nstaid.set <- c(\n'T108',\n'T384',\n'T498')\n\nmo.dtws %>% filter(dtw.bgs<40,staid %in% staid.set,year>1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the northern Bishop wellfield.\n\n\n\n\n\ncode# east bishop\nstaid.set <- c(\n'T485',\n'T497',\n'T501')\n\n\nmo.dtws %>% filter(dtw.bgs<40,staid %in% staid.set,year>1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the eastern Bishop wellfield.\n\n\n\n\n\ncode# western bishop\nstaid.set <- c(\n'T391',\n'T108',\n'T390',\n'T387',\n'T389')\n\nmo.dtws %>% filter(dtw.bgs<40,staid %in% staid.set,year>2009) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nRecent hydrographs of indicator wells in the western Bishop wellfield."
  },
  {
    "objectID": "posts/monitoring-wells/index.html#big-pine",
    "href": "posts/monitoring-wells/index.html#big-pine",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.3 Big Pine",
    "text": "7.3 Big Pine\n\ncode# BP set\nstaid.set <- c(\n'T425',\n'T426',\n'T469',\n'T572',\n'T798',\n'T799',\n'T567',\n'T800')\n\n# T572\n\n\nmo.dtws %>% filter(staid %in% staid.set, dtw.bgs <40, year >1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the Big Pine wellfield. Periods of missing data for T572 occurred when the well was plugged and in need of repair..\n\n\n\n\n\ncode# BP set\nstaid.set <- c(\n'T565',\n'V017GC')\n\n\nmo.dtws %>% filter(staid %in% staid.set, dtw.bgs <40, year >1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of monitoring wells in the southern Big Pine wellfield near pumping wells W218 and W219.."
  },
  {
    "objectID": "posts/monitoring-wells/index.html#taboose-aberdeen",
    "href": "posts/monitoring-wells/index.html#taboose-aberdeen",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.4 Taboose Aberdeen",
    "text": "7.4 Taboose Aberdeen\n\ncode# ta set\nstaid.set <- c(\n'T417',\n'T418',\n'T419',\n'T421')\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the Taboose-Aberdeen wellfield. Periods of missing data or flat horizontal line denote when the test well was dry.\n\n\n\n\n\ncodestaid.set <- c(\n'T502',\n'T504',\n'T505',\n'T586',\n'T587')# adjacent to groundwater dependent vegetation near W118 and is used to assess the impacts of recent pumping\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the Taboose-Aberdeen wellfield. Periods of missing data or flat horizontal line denote when the test well was dry.Data from well T587 (a non-indicator well) is included because it is located adjacent to groundwater dependent vegetation near W118 and is used to assess the impacts of recent pumping."
  },
  {
    "objectID": "posts/monitoring-wells/index.html#thibaut-sawmill",
    "href": "posts/monitoring-wells/index.html#thibaut-sawmill",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.5 Thibaut Sawmill",
    "text": "7.5 Thibaut Sawmill\n\ncode# BP set\n\nstaid.set <- c(\n'T413',\n'T414',\n'T415',\n'T507',\n'T587')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells."
  },
  {
    "objectID": "posts/monitoring-wells/index.html#independence-oak",
    "href": "posts/monitoring-wells/index.html#independence-oak",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.6 Independence Oak",
    "text": "7.6 Independence Oak\n\ncode# IO set\nstaid.set <- c(\n'T406',\n'T407',\n'T408',\n'T409')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the center of the wellfield.\n\n\n\n\nThe other indicator wells located east and north of Independence (T546 and T809)\n\ncode# IO set\nstaid.set <- c(\n'T412',\n'T453',\n'T546',\n'T809')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells."
  },
  {
    "objectID": "posts/monitoring-wells/index.html#symmes-shepherd",
    "href": "posts/monitoring-wells/index.html#symmes-shepherd",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.7 Symmes Shepherd",
    "text": "7.7 Symmes Shepherd\n\ncode# ss set\nstaid.set <- c(\n'T402',\n'T403',\n'T404',\n'T447')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells.\n\n\n\n\n\ncode# IO set\nstaid.set <- c(\n'T402',\n'T403',\n'T404',\n'T510',\n'T511')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells.\n\n\n\n\n\ncode# IO set\nstaid.set <- c(\n'T447',\n'V009G')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells."
  },
  {
    "objectID": "posts/monitoring-wells/index.html#bg",
    "href": "posts/monitoring-wells/index.html#bg",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n8.8 BG",
    "text": "8.8 BG\n\ncode# IO set\nstaid.set <- c(\n'T398',#near aq\n'T400',#east of aq\n'T597')#near aq\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970,dtw.bgs<60) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells.\n\n\n\n\n\ncode# IO set\nstaid.set <- c(\n'T598',#near pumping\n'T596')#near near pumping\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells."
  },
  {
    "objectID": "posts/monitoring-wells/index.html#read-data-into-r",
    "href": "posts/monitoring-wells/index.html#read-data-into-r",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n3.1 Read data into R",
    "text": "3.1 Read data into R\n\ncode# read historical db that was updated the previous year\nhist <- read_csv(here('data','hydro','Monitoring_Wells_Master_2021.csv'))\n# convert date column to date format\nhist$date <- ymd(hist$date)\n\ndepthGE <- read_csv(here('data','hydro','DepthGE_2021_2022.csv'))\ndepthRP <- read_csv(here('data','hydro','DepthRP_2021_2022.csv'))\ndepthWSE <- read_csv(here('data','hydro','DepthWSE_2021_2022.csv'))\n\n\nseparate data column ‘dateread’ into date and dtw read for depthGE, depthRP, depthWSE separate datasets\n\ncode#separate the data column and assign numeric class to dtw\ndepthGE <- depthGE %>% separate(dateread, c(\"date\", \"dtw.bgs\"),sep = \" \") \ndepthGE$dtw.bgs <- as.numeric(depthGE$dtw.bgs)\n\n\n\ncodedepthRP <- depthRP %>% separate(dateread, c(\"date\", \"dtw.rp\"),sep = \" \") \ndepthRP$dtw.rp<- as.numeric(depthRP$dtw.rp)\n\n\n\ncodedepthWSE <- depthWSE %>% separate(dateread, c(\"date\", \"wse\"),sep = \" \") \ndepthWSE$wse <- as.numeric(depthWSE$wse)\n\n\nbind these three together using a full join so that records are not dropped\n\ncode#bind columns from rp, ge, and wse. use full join to maintain all records if some dates don't have one or the other.\n\ntry <- depthRP %>% full_join(depthWSE, by = c('staid','date')) %>% full_join(depthGE, by = c('staid','date'))"
  },
  {
    "objectID": "posts/monitoring-wells/index.html#bairs-george",
    "href": "posts/monitoring-wells/index.html#bairs-george",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.8 Bairs George",
    "text": "7.8 Bairs George\n\ncode# IO set\nstaid.set <- c(\n'T398',#near aq\n'T400',#east of aq\n'T597')#near aq\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970,dtw.bgs<60) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells.\n\n\n\n\n\ncode# IO set\nstaid.set <- c(\n'T598',#near pumping\n'T596')#near near pumping\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells."
  },
  {
    "objectID": "posts/monitoring-wells/index.html#rp-elevations",
    "href": "posts/monitoring-wells/index.html#rp-elevations",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n8.1 RP elevations",
    "text": "8.1 RP elevations\nFrom ICWD Access database 2017 I exported the RP elevations, found the latest RP elevation measurement for each staid and joined this table to the RP DTW updates. For the OVGA update, this table will be joined each year until the RP elevations are updated.\n\ncode# rpelev <- read_csv('data/rp_elev.csv') %>% \n#   mutate(date = lubridate::mdy(date_c)) %>% \n#   group_by(staid) %>%\n#   summarise(date = max(date))%>% \n#   left_join(rpelev_2, by = c(\"staid\",\"date\")) %>% \n#   mutate(latest_rp_date = date) %>% \n#   select(-date,-date_c)\n\n# break up function to make it clear\n\n\nrpelev <- read_csv(here('data','hydro','rp_elev.csv'))\n\n# date conversion\nrpelev_2 <- rpelev %>% \n  mutate(date = lubridate::mdy(date_c))\n\n# pull the most recent date when rp elevations reported\nrpelev_3 <- rpelev_2 %>% \n  group_by(staid) %>%\n  summarise(date = max(date))\n\nrpelev_4 <- rpelev_3 %>% \n  left_join(rpelev_2, by = c(\"staid\",\"date\")) %>% \n  mutate(latest_rp_date = date) %>% \n  select(-date,-date_c)\n\nrpelev_4\n\n# A tibble: 1,178 × 3\n   staid rp_elev     latest_rp_date\n   <chr> <chr>       <date>        \n 1 F001  3808.699951 2017-09-12    \n 2 F002  3810.600098 2017-09-14    \n 3 F007  3808.199951 2017-08-07    \n 4 F009  3804.389893 2016-09-06    \n 5 F015  3835.929932 1996-12-12    \n 6 F016  3818.439941 1993-01-08    \n 7 F018  3805.899902 2017-06-20    \n 8 F022  3806.699951 2017-08-07    \n 9 F023  3824.899902 2017-08-07    \n10 F024  3805.199951 2016-08-01    \n# … with 1,168 more rows\n\n\n\ncodegse_staids <- read_csv(here('data','hydro','gse_staids.csv'))\n\n\nread in processed data through the most recent water year updates\n\ncodem <- testwells.combined\n\n\nfilter the master data table to the years needed for OVGA updates. Now that it is updated through the 2022 water year, follow instruction by changing the filter date to pluck off the update year.\n\ncodem1 <- m  %>% filter(date > \"2021-09-30\") %>% select(staid,date,dtw.rp)\n#1261 records\n# note: In Dec 2023 when the 2023 water year data is provided, change filter above to \"2022-09-30\"\nm1\n\n# A tibble: 133,891 × 3\n   staid date       dtw.rp\n   <chr> <date>      <dbl>\n 1 T455  2021-10-25   7.5 \n 2 T455  2022-01-13   7.27\n 3 T455  2022-04-29   7.15\n 4 T455  2022-07-18   7.71\n 5 T508  2021-10-29  13.8 \n 6 T508  2022-01-14  13.6 \n 7 T508  2022-04-14  13.3 \n 8 T508  2022-07-19  13.6 \n 9 T549  2022-04-29  17.6 \n10 T630  2021-10-25   6.3 \n# … with 133,881 more rows\n\n\njoin the rp elevations to the annual updates\n\ncode# join latest rp elevation measurements provided by LA\ndtwrp.rpelev <- m1 %>% left_join(rpelev_4, by = 'staid')\n\ndtwrp.rpelev\n\n# A tibble: 133,891 × 5\n   staid date       dtw.rp rp_elev     latest_rp_date\n   <chr> <date>      <dbl> <chr>       <date>        \n 1 T455  2021-10-25   7.5  3823.4      2018-03-30    \n 2 T455  2022-01-13   7.27 3823.4      2018-03-30    \n 3 T455  2022-04-29   7.15 3823.4      2018-03-30    \n 4 T455  2022-07-18   7.71 3823.4      2018-03-30    \n 5 T508  2021-10-29  13.8  3787.1      2018-03-27    \n 6 T508  2022-01-14  13.6  3787.1      2018-03-27    \n 7 T508  2022-04-14  13.3  3787.1      2018-03-27    \n 8 T508  2022-07-19  13.6  3787.1      2018-03-27    \n 9 T549  2022-04-29  17.6  3858.800049 2017-04-17    \n10 T630  2021-10-25   6.3  3813.100098 2017-07-26    \n# … with 133,881 more rows\n\n\n\ncodedtwrpavg.rpelev <- dtwrp.rpelev %>% group_by(staid, date, rp_elev) %>% summarise(dtw.rp =  round(mean(dtw.rp),2))\n\n\nhow many staids in LA database received and how many are missing from the ovga database\nread in ovga points here\n\ncodeovga_points <- read_csv(here(\"data\",\"hydro\",\"Owens_Monitoring_Points.csv\"))\novga_points\n\n# A tibble: 6,048 × 8\n   mon_pt_id site_id mon_pt_name   mon_pt_lat mon_pt_long coord…¹ county hide_…²\n       <dbl>   <dbl> <chr>              <dbl>       <dbl> <chr>   <chr>    <dbl>\n 1         1       1 01S32E29D001M       37.8       -118. NAD83   Mono         0\n 2         2       1 01S32E31J002M       37.8       -118. NAD83   Mono         0\n 3         3       1 01S32E32E001M       37.8       -118. NAD83   Mono         0\n 4         4       1 04S33E08M001M       37.6       -118. NAD83   Mono         0\n 5         5       1 05S33E09X001M       37.5       -118. NAD83   Mono         0\n 6         6       1 05S33E18D001M       37.5       -118. NAD83   Mono         0\n 7         7       1 06S31E05H001M       37.5       -119. NAD83   Inyo         0\n 8         8       1 06S31E17B001M       37.4       -119. NAD83   Inyo         0\n 9         9       1 06S31E19G001M       37.4       -119. NAD83   Inyo         0\n10        10       1 06S31E20H001M       37.4       -119. NAD83   Inyo         0\n# … with 6,038 more rows, and abbreviated variable names ¹​coord_sys,\n#   ²​hide_from_public\n\n\n\ncodeLA.staids <- dtwrpavg.rpelev %>% group_by(staid) %>% summarise(records = n())\n\nLA.staids.in.ovga <- LA.staids %>% semi_join(ovga_points, by = c(\"staid\"=\"mon_pt_name\"))\n\nLA.staids.notin.ovga <- LA.staids %>% anti_join(ovga_points, by = c(\"staid\"=\"mon_pt_name\"))\n#1045 staids provided by LA and 822 of these staids present in ovga database. 223 not in ovga database.\n\n# in 2022, 71 staids not in ovga db\n\nLA.staids\n\n# A tibble: 804 × 2\n   staid records\n   <chr>   <int>\n 1 F033        9\n 2 F035        9\n 3 F037        1\n 4 F052       12\n 5 F077       13\n 6 F082       10\n 7 F085       12\n 8 F122        1\n 9 F124       11\n10 F380        1\n# … with 794 more rows\n\n\n\ncode# LA provided depth data for `r LA.staids` staids in the annual data transfer. \n# The ovga database matches `r LA.staids.in.ovga` staids and is missing `r LA.staids.notin.ovga` staids.\nLA.staids.in.ovga\n\n# A tibble: 733 × 2\n   staid records\n   <chr>   <int>\n 1 F033        9\n 2 F035        9\n 3 F037        1\n 4 F052       12\n 5 F077       13\n 6 F082       10\n 7 F085       12\n 8 F122        1\n 9 F124       11\n10 T001        2\n# … with 723 more rows\n\n\n\ncodeLA.staids.notin.ovga\n\n# A tibble: 71 × 2\n   staid records\n   <chr>   <int>\n 1 F380        1\n 2 FS3D      365\n 3 FS3S      365\n 4 S001        4\n 5 S002        4\n 6 S004        4\n 7 S005        4\n 8 S006        4\n 9 S007        4\n10 T313B      12\n# … with 61 more rows\n\n\nmonitoring points missing rp elevations after join\n\ncode# LA.staids.in.ovga\n# find how many staids are missing rp elevation\nna.rp.elev <- dtwrpavg.rpelev %>% \n  semi_join(LA.staids.in.ovga, by = 'staid') %>% \n  filter(is.na(rp_elev)) %>% \n  group_by(staid) %>% \n  summarise(count.na = n())\n\n# in 2022, 97 with NA, missing rp elevations\n\n#278 staids with NA missing rp elevations. \nna.rp.elev\n\n# A tibble: 18 × 2\n   staid count.na\n   <chr>    <int>\n 1 T013U       11\n 2 TT02         6\n 3 TT04         6\n 4 TT05         6\n 5 TT07         6\n 6 TT08         6\n 7 TT09         6\n 8 TT10         6\n 9 TT17         6\n10 TT18         6\n11 TT37         6\n12 W059        12\n13 W103         9\n14 W104         1\n15 W371         8\n16 W381         2\n17 W382        11\n18 W389         3\n\n\n278 out of 1045 staids LA provided no rpe\nfind staids without GSEs and RPEs in the county data\n\ncodeneed.gse <- na.rp.elev %>% anti_join(gse_staids, by = 'staid')\nneed.gse\n\n# A tibble: 0 × 2\n# … with 2 variables: staid <chr>, count.na <int>\n\ncode# need.gse %>% write_csv(\"staids_missingRPEandGSE.csv\")\n\n\nupdate 2022 - out of 97 staids without RPE, 15 without rpe, leaving 82 with GSE\nout of 278 staids without RPE in the upload set, 168 staids without rpe or gse in the old access db leaving 110 that can be uploaded with a gse join once i do that. out of this 110, only 26 are currently in the ovga meaning we need to add some points to ovga database.\n\ncodehave.gse <- na.rp.elev %>% semi_join(gse_staids, by = 'staid')\nhave.gse\n\n# A tibble: 18 × 2\n   staid count.na\n   <chr>    <int>\n 1 T013U       11\n 2 TT02         6\n 3 TT04         6\n 4 TT05         6\n 5 TT07         6\n 6 TT08         6\n 7 TT09         6\n 8 TT10         6\n 9 TT17         6\n10 TT18         6\n11 TT37         6\n12 W059        12\n13 W103         9\n14 W104         1\n15 W371         8\n16 W381         2\n17 W382        11\n18 W389         3\n\n\n110 staids with gse that can be joined\n\ncodenot_in_ovga <- need.gse %>% anti_join(ovga_points, by = c(\"staid\"=\"mon_pt_name\"))\nnot_in_ovga\n\n# A tibble: 0 × 2\n# … with 2 variables: staid <chr>, count.na <int>\n\n\nout of 168 staids 142 of these not in ovga\n\ncodein_ovga_gse <- need.gse %>% semi_join(ovga_points, by = c(\"staid\"=\"mon_pt_name\"))\n\nin_ovga_gse\n\n# A tibble: 0 × 2\n# … with 2 variables: staid <chr>, count.na <int>\n\n\n26 in ovga that need gse joins\ntotal records from monitoring points missing rp elevations\n\ncode# total records\nna.rp.elev.tot <- na.rp.elev %>% \n  summarise(count.na = sum(count.na))\n\n# 453,119 records without rp.elev. with pt data\n# 36517 aggregated to daily\nna.rp.elev.tot\n\n# A tibble: 1 × 1\n  count.na\n     <int>\n1      117\n\n\nfilter records in the set corresponding to monitoring points without rp elevation\n\ncoderpcheck <- dtwrpavg.rpelev %>% semi_join(na.rp.elev, by = \"staid\")\nrpcheck\n\n# A tibble: 117 × 4\n# Groups:   staid, date [117]\n   staid date       rp_elev dtw.rp\n   <chr> <date>     <chr>    <dbl>\n 1 T013U 2021-10-29 <NA>      5.1 \n 2 T013U 2021-11-18 <NA>      4.74\n 3 T013U 2021-12-19 <NA>      4.26\n 4 T013U 2022-01-20 <NA>      3.58\n 5 T013U 2022-02-14 <NA>      3.1 \n 6 T013U 2022-03-28 <NA>      3.01\n 7 T013U 2022-05-25 <NA>      3.4 \n 8 T013U 2022-06-09 <NA>      3.97\n 9 T013U 2022-07-18 <NA>      4.9 \n10 T013U 2022-08-15 <NA>      4.97\n# … with 107 more rows\n\ncode# 453,119 from 278 staids have no rp elevations\n# 36,517 aggregated to daily\n\n# we can filter out these staids for now, save the list and when rp elevations are updated we can add\n# the wells within OVGA area. 278 \n\n# which wells are etape or pressure transducer measured\n# infer based on number of measurements\n\n\nNumber of records from staids with rp elevations\n\ncode# classify method by frequency of measurements. This count only valid for this 4-year set. annual updates would need a daily analysis. per kr, less than \n# record.number <- dtwrp.rpelev %>% \n#   filter(!is.na(rp_elev)) %>% \n#   group_by(staid) %>% \n#   summarise(count.with.rpe = n()) %>% \n#   mutate(MMethod = case_when(count.with.rpe >1000 ~ \"TR\",\n#                             count.with.rpe <200~ \"ES\"))\n\nrecord.number <- dtwrp.rpelev %>% \n  filter(!is.na(rp_elev)) %>% \n  group_by(staid) %>% \n  summarise(count.with.rpe = n()) %>% \n  mutate(MMethod = case_when(count.with.rpe >= 48 ~ \"TR\",\n                            count.with.rpe < 48~ \"ES\"))\n\n\nrecord.number %>% arrange(-count.with.rpe)\n\n# A tibble: 756 × 3\n   staid count.with.rpe MMethod\n   <chr>          <int> <chr>  \n 1 T752            8737 TR     \n 2 T753            8737 TR     \n 3 T754            8737 TR     \n 4 T755            8737 TR     \n 5 T756            8737 TR     \n 6 T757            8737 TR     \n 7 T759            8737 TR     \n 8 T758            8036 TR     \n 9 T733            4950 TR     \n10 V251            4117 TR     \n# … with 746 more rows\n\n\nselect only data with rp elevations\n\ncode# d <- dtwrp.rpelev %>% left_join(dtwrpavg.rpelev, by = 'staid')\n# anti_join returns all records in x that don't have a match in y\nrpselect <- dtwrpavg.rpelev %>% anti_join(na.rp.elev, by = \"staid\")\n# 204,487 records with rp elevations for upload\n\n# names(rpselect)\n\n\nuse a semi_join filter to retain only monitoring points in the OVGA database.\n6,048 points including monitoring wells, pumping wells, surface water gauging stations.\n\ncode# semi_join returns records in x with a match in y\nrpselect2 <- rpselect %>% semi_join(ovga_points, by = c(\"staid\"=\"mon_pt_name\"))\n\n\n\ncode# methodinfer %>% distinct()\nmethodinfer <- record.number %>% select(-count.with.rpe)\n# %>% distinct(staid)\n\nupload <- rpselect2 %>% \n  left_join(methodinfer, by = \"staid\") %>% \n  # select(-latest_rp_date) %>% \n  select(WellName = staid, \n         DateMeasured = date, \n         DepthToWater = dtw.rp, \n         ReferencePointElevation = rp_elev,\n         MMethod) %>% \n  mutate(ExclusionCondition = \"\" ,\n         QAQCLevel = \"High\",\n         MeasMethod = MMethod,# from join above\n         NoMeasFlag = \"\",\n         QuestMeasFlag = \"\",\n         DataSource = \"LADWP\",\n         Notes = \"\") %>% \n  select(-MMethod)%>% \n  filter(DepthToWater < 500 & !is.na(DepthToWater) & DepthToWater != 'NA' & DepthToWater != -777 & ReferencePointElevation !=0)\n# need to pull out RPE = 0 and add to the set without measured RPE\n\n# \nupload \n\n# A tibble: 15,696 × 11\n# Groups:   WellName, DateMeasured [15,696]\n   WellName DateMeasured Depth…¹ Refer…² Exclu…³ QAQCL…⁴ MeasM…⁵ NoMea…⁶ Quest…⁷\n   <chr>    <date>         <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 F033     2022-01-07      4.55 3833.5  \"\"      High    ES      \"\"      \"\"     \n 2 F033     2022-02-09      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 3 F033     2022-03-09      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 4 F033     2022-04-05      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 5 F033     2022-05-05      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 6 F033     2022-06-01      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 7 F033     2022-07-07      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 8 F033     2022-08-02      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 9 F033     2022-09-07      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n10 F035     2022-01-07     10.4  3834.6… \"\"      High    ES      \"\"      \"\"     \n# … with 15,686 more rows, 2 more variables: DataSource <chr>, Notes <chr>, and\n#   abbreviated variable names ¹​DepthToWater, ²​ReferencePointElevation,\n#   ³​ExclusionCondition, ⁴​QAQCLevel, ⁵​MeasMethod, ⁶​NoMeasFlag, ⁷​QuestMeasFlag\n\n\n\ncode# remove 30 rows of NA and -777\nupload %>% write_csv(\"ovga_uploads_mw_with_rpe_102021_092022_zn.csv\")\n# upload %>% write_csv(\"ovga_uploads_mw_with_rpe_102017_092021_zn4.csv\")\n\n\nF122 has rp of zero. filter out faulty rp data entry errors with 0 for rp zero use GSE, so create elevation bracket filter to exclude erroneous entries and default to using GSE.\nneed to split out electronic pressure transducer (TR) vs electric sounder measurement (ES)"
  },
  {
    "objectID": "posts/flow-monthly/index.html",
    "href": "posts/flow-monthly/index.html",
    "title": "Steps to update ICWD’s monthly volumetric flow (pumping, surface water, valley totals and means) database from LADWP water-year data ransfer",
    "section": "",
    "text": "1 Annual Data Transfer\nData from LADWP monitoring well reads, surface water gauging station reads, precipitation reads and aggregated totals and means of these data are typically provided to ICWD in January of each year. This document describes how to process the monitoring wells data and append it to the master database used internally by ICWD and also distributed to other agencies upon request (e.g. Cal Fish and Widlife, Big Pine Environmental Dept, US Fish and Widlife Service, Cal Dept. Water Resources to name a few). The data is also uploaded to the Owens Valley Groundwater Authority (OVGA) data management system and webmap.\nData is provided to ICWD in the ZRXP format - an ASCII data exchange file format of WISKI. I’ve investigated if tools exist to convert ZRXP format into something resembling human readable long format (aka tidy data), but I have not found anything as of 2022. Therefore I use some clunky yet clever excel tricks to tidy this data in a few minutes using the steps described below. After excel processing, I read this tidied data into R for minimal processing which is then appended to the master database with records from 1924 to present and then the special requirements for the OVGA upload is tackled.\nThe land surface corrected depth to water reads measured from the reference point (RP) and corrected for RP above ground elevation are included in the file labeled with DepthGE. The measurement from the RP are named DepthRP and water surface elevation included in the DepthWSE.\n\n2 Tidy data in Excel\n\nOpen .dat file in excel, in import text wizard, use forward slash ‘/’ as the delimeter.\nLabel the unnamed column containing staids as ‘staid’.\nSelect the ‘staid’ column, Edit>Go To>Special, Check the Blanks option and press Okay. Under the first row below the first staid, Type (=) key, Up arrow (to select the cell above), holding down the Ctrl key, push Enter and this populates the staid id down the entire staid column.\nselect entire sheet, under data>Filter, click the filter dropdown on the data column containing both date and read and use text filter with begins with = ‘20’1. This will exclude the header information leaving only the dtw reads. Name this column dateread.\nSave the staid and data columns into csv and read into R for further processing.\n\nThe tidied data update is saved to the data/hydro subdirectory e.g 'data/hydro/VolumeMonthAF_2021-22.csv'.\nThere is an excel spreadsheet with sequential worksheets demonstrating this process and an accompanying word doc explaining the steps with screen shots (note: add these here). Since this process need only be done once a year, these references should be helpful in the future if the ZRXP output continues to be the sole format provided by LADWP.\n\n3 read data\n\ncoderp_elev <- read_csv(here('data','hydro','rp_elev.csv'))\n\n#historical data\nmonthlies <- read_csv(here('data','hydro','totals_means_thru_sep_2021.csv'))# \n\n# annual update\nann.update <- read_csv(here('data','hydro','VolumeMonthAF_2021-22.csv'))\n# summary_stations <- 'data/summary_stations19-20.csv'\nsum_stations <- read_csv(here('data','hydro','summary_stations21-22.csv'))\n\n# attribute data from wells database  \nstaid <- read_csv(here('data','hydro','staid_current.csv'))\n\n\novga_points <- read_csv(here('data','hydro','Owens_Monitoring_Points.csv'))\n# ovga_points\n\nproduction.meta <- read_csv(here('data','hydro','Production.csv')) %>% \n  select(mon_pt_name, method) %>% unique()\n\n\n\n4 annual update\n\ncode#separate the data column and assign numeric class to value\nann.update2 <- ann.update %>% separate(dateread, c(\"date\", \"read\"),sep = \" \") \nann.update2$read <- as.numeric(ann.update2$read)\n\n\nformat the date column\n\ncode# use lubridate package to format the date\nann.update2$datetime <- ymd_hms(ann.update2$date)\n\n\nann.update3<-ann.update2 %>% mutate(year = year(datetime),\n                            month = month(datetime),\n                            month_abbr = month(datetime, label = TRUE, abbr = TRUE),\n                            day = mday(datetime),\n                            date.y.m.d = make_date(year, month,day))\n\n\n\n\n# rename the columns\n\n# add the long form name for the station\nann.update4<-ann.update3 %>% select(-date)%>% rename(date = date.y.m.d)%>% left_join(staid, by = 'staid') %>% select(staid,description,read,date,year,month,month_abbr) \n\nann.update4\n\n# A tibble: 16,428 × 7\n   staid description                         read date        year month month…¹\n   <chr> <chr>                              <dbl> <date>     <dbl> <dbl> <ord>  \n 1 132   OAK CREEK (NORTH FORK) SPREADING …     0 2021-10-01  2021    10 Oct    \n 2 132   OAK CREEK (NORTH FORK) SPREADING …     0 2021-11-01  2021    11 Nov    \n 3 132   OAK CREEK (NORTH FORK) SPREADING …     0 2021-12-01  2021    12 Dec    \n 4 132   OAK CREEK (NORTH FORK) SPREADING …     0 2022-01-01  2022     1 Jan    \n 5 132   OAK CREEK (NORTH FORK) SPREADING …     0 2022-02-01  2022     2 Feb    \n 6 132   OAK CREEK (NORTH FORK) SPREADING …     0 2022-03-01  2022     3 Mar    \n 7 132   OAK CREEK (NORTH FORK) SPREADING …     0 2022-04-01  2022     4 Apr    \n 8 132   OAK CREEK (NORTH FORK) SPREADING …     0 2022-05-01  2022     5 May    \n 9 132   OAK CREEK (NORTH FORK) SPREADING …     0 2022-06-01  2022     6 Jun    \n10 132   OAK CREEK (NORTH FORK) SPREADING …     0 2022-07-01  2022     7 Jul    \n# … with 16,418 more rows, and abbreviated variable name ¹​month_abbr\n\ncode# depthRP %>% select(STAID,date.y.m.d,dtw,year,month,day) %>% write_csv('depth.RP.2017.2018zn.csv')\n# ann.update3 %>% distinct(STAID)\n\n\n\npumping wells and flowing wells staids stay the same name\nsurface water gauges need an SW prefix before the staid id.\nremove the summary stations\n\n5 summary stations - extra\n\ncodesum_stations\n\n# A tibble: 12 × 17\n   date      FTC  LOLU  LOOU LORPDU LORPRU LORPTU  LOWU   MBR  MTWP  OLTU  OVFG\n   <chr>   <dbl> <dbl> <dbl>  <dbl>  <dbl>  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>\n 1 10/1/21  1160   184    78    585    217   2528  1463  2103  3347  8501  3341\n 2 11/1/21     0    62    69    416    -48   1187   688  2466  3455  4067  3472\n 3 12/1/21  4494    68    59    369   -316    501   320  2890  2294  2347  3887\n 4 1/1/22  15518    76    55    369   -468    344   312  1775  2008  3001  3866\n 5 2/1/22   7054    63    62    333   -302    434   279  1413  1803  4040  3662\n 6 3/1/22   7518    71    55    607    -83    677    27  2412   574  6054  4057\n 7 4/1/22      0    82    56    750    317   1204     0  8275     0  7575  3541\n 8 5/1/22     45   126    70    488    991   1674     0 17544     0  8222  3464\n 9 6/1/22   2682   163    18    186   2342   2933   224 12053     0  6787  3602\n10 7/1/22   4257   176    16    194   3009   3399     4  4707     0  1194  3030\n11 8/1/22   5954   149    25    323   1620   2117     0  3409     0   535  3068\n12 9/1/22  13067   193     2    648   1503   2372    27  1881     0  6488  2935\n# … with 5 more variables: OVGR <dbl>, OVIR <dbl>, OVPW <dbl>, OVR <dbl>,\n#   SHTO <dbl>\n\n\n\ncode# wide to long format using gather()\nsstations <- sum_stations %>% gather(staid,read,-date) %>% left_join(staid, by = 'staid') %>% select(-desc_id)\n\n\nsstations$date <- mdy(sstations$date)\n\nsstations<-sstations %>% mutate(month = month(date),\n                                year = year(date),\n                                month_abbr = month(date, label = TRUE, abbr = TRUE))\n\n\nsstations\n\n# A tibble: 192 × 7\n   date       staid  read description                   month  year month_abbr\n   <date>     <chr> <dbl> <chr>                         <dbl> <dbl> <ord>     \n 1 2021-10-01 FTC    1160 L.A.A. TOTAL FLOW TO THE CITY    10  2021 Oct       \n 2 2021-11-01 FTC       0 L.A.A. TOTAL FLOW TO THE CITY    11  2021 Nov       \n 3 2021-12-01 FTC    4494 L.A.A. TOTAL FLOW TO THE CITY    12  2021 Dec       \n 4 2022-01-01 FTC   15518 L.A.A. TOTAL FLOW TO THE CITY     1  2022 Jan       \n 5 2022-02-01 FTC    7054 L.A.A. TOTAL FLOW TO THE CITY     2  2022 Feb       \n 6 2022-03-01 FTC    7518 L.A.A. TOTAL FLOW TO THE CITY     3  2022 Mar       \n 7 2022-04-01 FTC       0 L.A.A. TOTAL FLOW TO THE CITY     4  2022 Apr       \n 8 2022-05-01 FTC      45 L.A.A. TOTAL FLOW TO THE CITY     5  2022 May       \n 9 2022-06-01 FTC    2682 L.A.A. TOTAL FLOW TO THE CITY     6  2022 Jun       \n10 2022-07-01 FTC    4257 L.A.A. TOTAL FLOW TO THE CITY     7  2022 Jul       \n# … with 182 more rows\n\n\n\n6 merge all\n\ncodeupdate.merged <- bind_rows(sstations,ann.update4)\n# tm_all_merged\n\n\n\n7 roy, wy, irrag year functions\n\ncode#tm master\nupdate.merged2 <- update.merged %>% mutate(wy = case_when(month >= 10 ~ year + 1,\n                                          month <= 9 ~ year),\n                           roy = case_when(month <= 3 ~ year - 1,\n                                           month >= 4 ~ year),\n                           irrag = case_when(month %in% c(4,5,6,7,8,9) ~ year))\n\n# tmm\n\n\n\n8 Merge old and new\n\ncodeupdate.merged3 <- bind_rows(update.merged2, monthlies)\n# tm_all_merged\n\nupdate.merged3 \n\n# A tibble: 798,857 × 10\n   date       staid  read description      month  year month…¹    wy   roy irrag\n   <date>     <chr> <dbl> <chr>            <dbl> <dbl> <chr>   <dbl> <dbl> <dbl>\n 1 2021-10-01 FTC    1160 L.A.A. TOTAL FL…    10  2021 Oct      2022  2021    NA\n 2 2021-11-01 FTC       0 L.A.A. TOTAL FL…    11  2021 Nov      2022  2021    NA\n 3 2021-12-01 FTC    4494 L.A.A. TOTAL FL…    12  2021 Dec      2022  2021    NA\n 4 2022-01-01 FTC   15518 L.A.A. TOTAL FL…     1  2022 Jan      2022  2021    NA\n 5 2022-02-01 FTC    7054 L.A.A. TOTAL FL…     2  2022 Feb      2022  2021    NA\n 6 2022-03-01 FTC    7518 L.A.A. TOTAL FL…     3  2022 Mar      2022  2021    NA\n 7 2022-04-01 FTC       0 L.A.A. TOTAL FL…     4  2022 Apr      2022  2022  2022\n 8 2022-05-01 FTC      45 L.A.A. TOTAL FL…     5  2022 May      2022  2022  2022\n 9 2022-06-01 FTC    2682 L.A.A. TOTAL FL…     6  2022 Jun      2022  2022  2022\n10 2022-07-01 FTC    4257 L.A.A. TOTAL FL…     7  2022 Jul      2022  2022  2022\n# … with 798,847 more rows, and abbreviated variable name ¹​month_abbr\n\n\n\ncode# update.merged3 %>% write_csv('totals_means_thru_sep_2021.csv')\nupdate.merged3 %>% write_csv('output/totals_means_thru_sep_2022.csv')\n\n\n\n9 process for OVGA\n\ncodetm_process_for_ovga <- read_csv(\"output/totals_means_thru_sep_2022.csv\")\n\n\n\ncodetm_process_for_ovga <- update.merged3\n\n\nWellName The WellName column is required and must contain the name of a monitoring point within the basin selected when the file was uploaded.\nFlowDate The FlowDate column is required. The field must be a date.\nFlowRateAcFtPM The FlowRateAcFtPM column is required and must be numeric. Units are in acre-foot per month\n\ncodeflow.meta <- read_csv(here('data','hydro','Flows.csv')) %>%  select(mon_pt_name, LADWP_ID) %>% unique() %>% mutate(staid = as.character(LADWP_ID)) %>% select(-LADWP_ID)\n\n\n\ncodetm22 <- tm_process_for_ovga %>% filter(date > \"2021-09-30\" & read != -777)\ntm22\n\n# A tibble: 8,830 × 10\n   date       staid  read description      month  year month…¹    wy   roy irrag\n   <date>     <chr> <dbl> <chr>            <dbl> <dbl> <chr>   <dbl> <dbl> <dbl>\n 1 2021-10-01 FTC    1160 L.A.A. TOTAL FL…    10  2021 Oct      2022  2021    NA\n 2 2021-11-01 FTC       0 L.A.A. TOTAL FL…    11  2021 Nov      2022  2021    NA\n 3 2021-12-01 FTC    4494 L.A.A. TOTAL FL…    12  2021 Dec      2022  2021    NA\n 4 2022-01-01 FTC   15518 L.A.A. TOTAL FL…     1  2022 Jan      2022  2021    NA\n 5 2022-02-01 FTC    7054 L.A.A. TOTAL FL…     2  2022 Feb      2022  2021    NA\n 6 2022-03-01 FTC    7518 L.A.A. TOTAL FL…     3  2022 Mar      2022  2021    NA\n 7 2022-04-01 FTC       0 L.A.A. TOTAL FL…     4  2022 Apr      2022  2022  2022\n 8 2022-05-01 FTC      45 L.A.A. TOTAL FL…     5  2022 May      2022  2022  2022\n 9 2022-06-01 FTC    2682 L.A.A. TOTAL FL…     6  2022 Jun      2022  2022  2022\n10 2022-07-01 FTC    4257 L.A.A. TOTAL FL…     7  2022 Jul      2022  2022  2022\n# … with 8,820 more rows, and abbreviated variable name ¹​month_abbr\n\n\n\ncodeflow_ovga <- tm22 %>% left_join(flow.meta, by = 'staid') %>% filter(!is.na(mon_pt_name))\n\n\n\ncodesw.flow <- flow_ovga  %>% \n  mutate(WellName = mon_pt_name,\n         FlowDate = date,\n         FlowRateAcFtPM = read,\n         FlowRateCFS = \"\",\n         FlowRateGPM = \"\") \n\n\nsw.flow %>% \n  filter(FlowRateAcFtPM < 600000) %>% \n  select(WellName,FlowDate,FlowRateAcFtPM)\n\n# A tibble: 6,430 × 3\n   WellName FlowDate   FlowRateAcFtPM\n   <chr>    <date>              <dbl>\n 1 SW0132   2021-10-01              0\n 2 SW0132   2021-11-01              0\n 3 SW0132   2021-12-01              0\n 4 SW0132   2022-01-01              0\n 5 SW0132   2022-02-01              0\n 6 SW0132   2022-03-01              0\n 7 SW0132   2022-04-01              0\n 8 SW0132   2022-05-01              0\n 9 SW0132   2022-06-01              0\n10 SW0132   2022-07-01              0\n# … with 6,420 more rows\n\n\n\n10 Flow - OVGA templated data export\n\ncodesw.flow %>% write_csv(\"ovga_swflow_import_wy22.csv\")\n\n\n\ncode# sw_other <- c('T','F','V','W')\n\n \n# filter(read !=-777) %>%\n  \n# TFVW_wellnames <- tm_process_for_ovga$staid %>%  unique() %>% \n#   str_subset(\"^[TFVW].\")\n\n\n\n\ntm_ovga <- tm22 %>% left_join(production.meta, by = c('staid' = 'mon_pt_name'))  \n\n\n\n# tm_ovga <- tm1721 %>% left_join(production.meta, by = c('staid' = 'mon_pt_name'))  \n\n\n# just do anti_join()\ntm.well.flow <- tm_ovga %>% \n  semi_join(production.meta, by = c('staid'='mon_pt_name'))%>% \n  mutate(WellName = staid,\n         StartDate = date,\n         EndDate = ceiling_date(date,'month'),\n         AgUsageAF = '',\n         MIUsageAF = read,\n         TotalUsageAF = read,\n         Method = method,\n         Notes = '') %>% \n  select(WellName,StartDate,EndDate, AgUsageAF, MIUsageAF, TotalUsageAF, Method, Notes)\n\n\n\n11 Production - OVGA templated export\n\ncodetm.well.flow.qa %>% write_csv(\"ovga_production_import_wy18-21.csv\")\n\n\n\ncodebad.values <- \n  c('V874',\n    'F033',\n    'F028')\n\n# tm.well.flow.qa <- tm.well.flow %>% filter(!(WellName %in% bad.values & MIUsageAF > 1000))\n\ntm.well.flow.qa2 <- tm.well.flow %>% filter(!WellName %in% bad.values & !MIUsageAF > 1000)\n\n  # unique() %>% #just get the unique() values to drop duplicates for a vector\n  \n#above pattern = starts with (^) a T F V or W well ([TFVW]), then anything (.) repeated\n#any number of times (*), then a lower case \"a\" at the end ($).\n\n\n\n  # t <- str_which(tm_process_for_ovga$staid, paste(sw_other, collapse=\"|\")) \n \n# sw <- tm_process_for_ovga %>% str_subset(staid, '^T') \n\n# t <- tm_process_for_ovga %>% grepl(\"\\\\d+\",staid)\n  # library(stringr)\n \n# t <- tm_process_for_ovga %>% filter(str_detect(staid, \"\\\\w\"))\n\n  \n  # stringr::str_detect(sw_other, paste(sw, collapse = \"|\"))\n\n\n# (staid %in% c(\"T\",\"V\",\"W\",\"F\"))\n\n # tt <- tm_process_for_ovga %>% semi_join(t)\n\n\n\n12 QA\n\ncode# check ovr\n\nupdate.merged3 %>% filter(staid == 'SHTO') %>% group_by(wy) %>% summarise(n = n())\n\n# A tibble: 87 × 2\n      wy     n\n   <dbl> <int>\n 1  1936    12\n 2  1937    12\n 3  1938    12\n 4  1939    12\n 5  1940    12\n 6  1941    12\n 7  1942    12\n 8  1943    12\n 9  1944    12\n10  1945    12\n# … with 77 more rows\n\n\n\ncodedupes <- update.merged3 %>% get_dupes(staid, date, read) \n#278 duplicates on these columns - half can go away\n# no dulicates found\nnodupes <- update.merged3 %>% distinct(staid, date, read, .keep_all = TRUE) \n\n#798,857\n\n\nmonth.dupes <- nodupes %>% get_dupes(staid, date,read)\n# no.dupes\n\nno.dupes <- dupes %>% distinct()\n# 0 rows\n\nno.dupes %>% get_dupes(staid, roy, month, read)\ndupes.zread <- dupes %>% filter(read == 0)\n\n\n\ncode# can separate out the pumping wells. revisit later\npwells.update <- tmm %>% left_join(pwells, by = 'staid')\n\np <- pwells.update %>% filter(!is.na(WF))\n\n\n\n\nFootnotes\n\nthis should work for the next 977 years until Y3K↩︎\nCitationBibTeX citation:@report{nelson2022,\n  author = {Zach Nelson},\n  publisher = {Inyo County Water Department},\n  title = {Steps to Update {ICWD’s} Monthly Volumetric Flow (Pumping,\n    Surface Water, Valley Totals and Means) Database from {LADWP}\n    Water-Year Data Ransfer},\n  volume = {1},\n  date = {2022-12-09},\n  url = {https://zach-nelson.github.io/open-science-notebook/posts/monitoring-wells/},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nZach Nelson. 2022. “Steps to Update ICWD’s Monthly Volumetric Flow\n(Pumping, Surface Water, Valley Totals and Means) Database from LADWP\nWater-Year Data Ransfer.” Open Science Notebook. Vol. 1.\nInyo County Water Department. https://zach-nelson.github.io/open-science-notebook/posts/monitoring-wells/."
  },
  {
    "objectID": "posts/sentinel2-flood-mapping/index.html",
    "href": "posts/sentinel2-flood-mapping/index.html",
    "title": "Blackrock Waterfowl Management Area Flooded Acreage",
    "section": "",
    "text": "codelibrary(tidyverse)\nlibrary(lubridate)\nlibrary(readxl)\nlibrary(knitr)\nlibrary(here)\nlibrary(magick)\n#> Linking to ImageMagick 6.9.10.23\n#> Enabled features: fontconfig, freetype, fftw, lcms, pango, webp, x11\n#> Disabled features: cairo, ghostscript, heic, raw, rsvg\n#> Using 12 threads\nlibrary(patchwork)\n\n\nOne of the goals of the Blackrock Waterfowl Mangement Area 5-year Interim Plan was to utilize satellite remote sensing mapping to replace some of the manual mapping methods that have been in place since the LORP commenced. Several recommendations will be included in the 2022 LORP Annual Report due out Spring 2023. Here, I’m using remote sensing to compare the 2022 spring flooded acreage (465 acres) to the 2023 spring flooded acreage. On visual assessment, the units are safely over the 500 acres using using 2022 as a reference.\nThe BWMA plan schedules two GPS tracklogs Nov 1 and Mar 1 approximately to assess whether or not the 500 flooded acre goal is obtained.\nIn spring (late Feb, early Mar) 2022, the flooded extent totaled 465 acres. This was quantified by two staff following the wetted extent for three days (approximately six person days not including GIS mangement) recording a tracklog with a GPS device. Since the 465 acres was about 35 acres short (~15 football fields) the 2023 plan was intended to come closer to the target through calibrating the inputs better1.\nAs seen below, the 2023 flooded acreage is greater than the spring 2022 flooded acreage of 465 acres (Figure 1). The 500 acres is met with just the additions of flooded acreage in the southern extent of east Winterton.\nTherefore, the 500 acres has been exceeded in BWMA for spring 2023. Acreage calculations will be presented across the entire annual flooding cycle in the BWMA section of the LORP annual report. For now, ICWD recommends skipping the manual GPS track log for the March 1st date. A more thorough comparison will be provided in the LORP annual report, and the outcome of that will be to switch to mapping flooded acreage with remote sensing in the 2023-2024 workplan.\nOwing to the valley snow fall expected, and slippery conditions, there is extra incentive to use logic and a quick remote sensing analysis rather than brute force to answer the question as to whether acreage has been exceeded at the start of March 2023.\n\ncodeplt1 <- image_read(\"feb152023.png\") %>%\n  image_ggplot()\nplt2 <- image_read(\"feb252022.png\") %>% \n  image_ggplot()\n\nplt1 | plt2\n\n\n\nFigure 1: Flooded extent in Blackrock Waterflowl Management Area Feb 15, 2023 (left) and Feb 25 2022 (right). In spring (late Feb, early Mar) 2022, the flooded extent totaled 465 acres. Just the addition of ponds in both the southern extent of East Winterton and southern extent of Thibaut in Feb 2023 (left) totals more than 110 acres putting the acreage in 2023 safely above the 500 acre goal.\n\n\n\n\n\n\nFootnotes\n\nFortunately, as of February 21, 2023, the Eastern Sierra weighted average of Owens Valley Snow Pillows is at 217% of normal to date and valley floor precipitation is at 187% of normal to date for Independence near BWMA↩︎\nCitationBibTeX citation:@report{nelson2023,\n  author = {Zach Nelson},\n  publisher = {Inyo County Water Department},\n  title = {Blackrock {Waterfowl} {Management} {Area} {Flooded}\n    {Acreage}},\n  volume = {1},\n  date = {2023-02-23},\n  url = {https://zach-nelson.github.io/open-science-notebook/posts/sentinel2-flood-mapping/},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nZach Nelson. 2023. “Blackrock Waterfowl Management Area Flooded\nAcreage.” Open Science Notebook. Vol. 1. Inyo County\nWater Department. https://zach-nelson.github.io/open-science-notebook/posts/sentinel2-flood-mapping/."
  },
  {
    "objectID": "posts/vegetation-water-requirement/index.html",
    "href": "posts/vegetation-water-requirement/index.html",
    "title": "Greenbook section III.A.1. Calculation of Vegetation Water Requirement",
    "section": "",
    "text": "1 Purpose\nThe Water Agreement and Green Book established procedures to determine which LADWP pumping wells can be operated based vegetation water requirements. As part of the monitoring effort for the Agreement, the Water Department regularly measures soil water content and vegetation leaf area index (with LADWP) to estimate vegetation water needs at 22 permanent sites located in wellfields and eight sites in control areas. Soil water monitoring is conducted monthly and vegetation monitoring is conducted annually in June.\nEach monitoring site is linked to one or more LADWP pumping wells.\n\n\nhttps://www.arcgis.com/apps/dashboards/cc4c1795b7f946df832ee4fa2a87d616\nOn July 1 and October 1, if the soil water is insufficient to meet the needs of the vegetation at a site, the linked pumping wells cannot be operated. The wells must remain off until the soil water exceeds the amount required by the vegetation at the time the wells went off. This is referred to as the On/Off management strategy. During much of the period since this management was implemented in 1990, LADWP has not operated numerous wells in On status in accordance with subsequent agreements with the County.\nThis website documents the code used to calculate the vegetation water requirements from the annual vegetation monitoring at on/off permanent vegetation transects.\nThis documentation is written in R Markdown and the analysis is documented using the targets R package (version 0.4.2)[https://docs.ropensci.org/targets/]. The targets package provides tools to construct a dependency aware analysis pipeline allowing automatic tracking of upstream changes to files which informs which processes are out of date and limits updates to only those downstream dependencies. Using targets also has the nice byproduct of forcing a functional programming setup over a potentially redundant imperative style, which should make the code easier to maintain with abstracted functions in a single functions file or declared in the targets file if simple enough.\nBelow is an example of the _targets.R file\n\ncode# load the function libraries\nlibrary(targets)\nlibrary(tidyverse)\nlibrary(tarchetypes)\nlibrary(DT)\n\n# source the custom functions for the pipeline\nsource(\"code/R/functions.R\")\ntar_option_set(\n  packages = c(\n    \"tidyverse\",\n    \"stringr\"\n  )\n\n)\n# Here we string together the pipeline in a list\nlist(\n  # set the year we are working with\n  tar_target(cYear, 2022),\n  \n  # set the file names to watch for changes \n  # point_frame_`cYear`.csv is a dynamic target and will be updated when the cYear is\n  # changed in annual updates\n  \n  # vwr max lookup table\n  tar_target(vwrmax_file, \"data/vwr_max_lookup.csv\", format = \"file\"),\n  \n  # site soil conditions influencing water holding capacity\n  tar_target(sitesoil_file, \"data/vwr_site_soil_designation.csv\", format = \"file\"),\n  \n  # updated with cYear (current year) parameter and dictates which year is calculated.\n  tar_target(pointframe_file, paste0(\"data/point_frame_\",cYear,\".csv\"), format = \"file\"),\n\n  # read the data from files specified above\n  # if the file has changed since the last tar_make(), read in the updated file\n  tar_target(vwrmax_lookt, read.csv(vwrmax_file)),\n  tar_target(sitesoil, read.csv(sitesoil_file)),\n  tar_target(pointframe_wide, read.csv(pointframe_file)),\n\n  # wrangling - tidy point frame data\n  tar_target(pointframe_long, gather(pointframe_wide, species, all.hits, SPAI:OTHER)),\n  \n  # calculate LAI from species cover rows - greenbook formula .5 extinction coefficient\n  tar_target(pointframe_lai, mutate(pointframe_long, lai = all.hits/334 * 2)),\n\n  # Join columns, site soil, lai, vwr max lookup values\n  tar_target(lai_ss, left_join(sitesoil,pointframe_lai, by = \"site\")),\n  tar_target(lai_ss_vwrmax,left_join(lai_ss,vwrmax_lookt, by = c('soil','species'))),\n\n  # calculate vwr of six primary species\n  tar_target(vwr, mutate(lai_ss_vwrmax,vwr = lai*vwr_at_lai_max)),\n  \n  # calculate weighted average of six species VWR/LAI for each site\n  tar_target(weighted.avg., weighted_avg(vwr)),\n\n  # joins the weighted average and calcs vwr for other category\n  # creates new column containing both vwr for each species and the other column\n  # creates new site column as factor with levels corresponding north to south \n  # following VWR excel table.\n  tar_target(vwr.total,vwr_total(vwr,weighted.avg.)),\n\n  # view wider with period (july, oct) as columns following VWR excel table.\n  tar_target(vwr.wide.period, vwr_site_total_period(vwr.total, cYear))\n  )\n\n\n\n2 Functions\n\ncode#' calculate weighted average vwr per lai \n#' for the non-focal species without T rates\n#'\n#' @param vwr\n#'\n#' @return weighted average vwr per leaf area index dataframe\n\nweighted_avg <- function(vwr){\n  vwr %>% filter(species != 'OTHER') %>% filter(all.hits >0) %>%\n    group_by(site,period) %>%\n    summarise(w_avg_vwr_per_lai = sum(vwr)/sum(lai)) %>%\n    mutate(species = 'OTHER')\n}\n\n#' join vwr and weighted avg vwr for 'other species' total and total the two for a \n#'\n#' @param vwr\n#' @param weighted.avg.\n#'\n#' @return vwr totals in dataframe\n#' @export\n#'\n#' @examples\nvwr_total <- function(vwr, weighted.avg.){\n  vwr %>% left_join(weighted.avg., by = c('site', 'species', 'period')) %>%\n    mutate(other.vwr = w_avg_vwr_per_lai * lai,\n           total.vwr = case_when(!is.na(vwr)~vwr,\n                                 !is.na(other.vwr)~other.vwr),\n           site.f = factor(site, levels = c(\"LW1\",\n                                            \"LW2\",\n                                            \"LW3\",\n                                            \"BC1\",\n                                            \"BC2\",\n                                            \"BC3\",\n                                            \"BP1\",\n                                            \"BP2\",\n                                            \"BP3\",\n                                            \"BP4\",\n                                            \"TA3\",\n                                            \"TA4\",\n                                            \"TA5\",\n                                            \"TA6\",\n                                            \"TAC\",\n                                            \"TS1\",\n                                            \"TS2\",\n                                            \"TS3\",\n                                            \"TS4\",\n                                            \"TSC\",\n                                            \"IO1\",\n                                            \"IO2\",\n                                            \"IC1\",\n                                            \"IC2\",\n                                            \"SS1\",\n                                            \"SS2\",\n                                            \"SS3\",\n                                            \"SS4\",\n                                            \"BG2\",\n                                            \"BGC\")\n                           )\n    )\n\n}\n\n\n#' total VWR from species to site level\n#' and for each period\n#' @param vwr.total \n#' @param cYear \n#'\n#' @return wide data frame with period as columns and VWR by site rows\n#' @export\n#'\n#' @examples\nvwr_site_total_period <- function(vwr.total,cYear){\n  vwr.total %>% filter(all.hits > 0) %>%\n  select(site.f,period,species,lai,total.vwr) %>%\n  group_by(site.f,period) %>%\n  summarise(site.vwr = sum(total.vwr)) %>%\n  pivot_wider(names_from = period, values_from = site.vwr)\n}\n\n\n\n3 Data Pipeline\n\n\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.1     ✔ purrr   1.0.1\n✔ tibble  3.1.8     ✔ dplyr   1.1.0\n✔ tidyr   1.3.0     ✔ stringr 1.5.0\n✔ readr   2.1.3     ✔ forcats 0.5.2\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nhere() starts at /Users/zac/Documents/projects/open-science-notebook\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\nLoading required package: ggpp\n\nAttaching package: ‘ggpp’\n\nThe following object is masked from ‘package:ggplot2’:\n\n    annotate\n\n\n\n\n\n\n\nThe ‘Stems’ (circles) represent data file input, intermediate and final data wrangling transformations with computations of LAI and VWR. The functions (triangles) take an input stem and output a new stem shown by linkages in the pipeline. Color green indicates the stems and functions are up to date - grey indicates changes have been made since the last tar_make() call.\nOnce the targets pipeline is made, the targets are stored in _targets/objects of the working directory where _targets.R script file is made - these targets can be read into rmarkdown documents using tar_read().\n\ncodewithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(cYear))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(pointframe_wide))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(pointframe_long))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(sitesoil))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(vwrmax_lookt))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(weighted.avg ))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(vwr))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(vwr.total))\nwithr::with_dir(rprojroot::find_root('_targets.R'),tar_load(vwr.wide.period))\n\n# cYear <- tar_read(cYear)# current year\n\n# for illustrative purposes we can show a step by step evolution in the wrangling and munging.\n\n# pfw <- tar_read(pointframe_wide)# wide point frame data\n# pfl <- tar_read(pointframe_long)# long point frame data\n# ss <- tar_read(sitesoil)# site soil texture -sand/silt\n# vwrmax <- tar_read(vwrmax_lookt)#empirical vwr max at LAI = 1\n# lai <- tar_read(pointframe_lai)# cover data converted to leaf area index (LAI)\n# lai_ss <- tar_read(lai_ss) # LAI joined to site soil texture\n# lai_ss_vwrmax <- tar_read(lai_ss_vwrmax) # LAI-soil text joined to VWR max\n# vwr <- tar_read(vwr)# VWR = LAI*VWR max\n# weighted.avg. <- tar_read(weighted.avg.)# to compute VWR for the 'OTHER' catchall for non-dominant species, total VWR/LAI for six dominant species multiplied by site LAI total for 'OTHER' category\n# vwr.total <- tar_read(vwr.total)# VWR complete for 6 species and OTHER.\n# vwr.wide.period <- tar_read(vwr.wide.period) # pivot wider so that July(half year) and October(full year) VWR are columns.\n\n\n\n4 Incoming Data\nPoint frame data is currently entered onto excel spreadsheets on field tablets, and species level totals are transcribed to this wide format spreadsheet with site as rows and species as columns. The number represents number of hits for each species in 3 dimensions every 30 cm for 334 pin drops.\n\ncodepointframe_wide %>% datatable(caption = paste0('Point frame data entered in wide format in ',cYear,\".\"),filter = c(\"top\"),options = list(\n  pageLength = 5, autoWidth = FALSE)) \n\n\n\n\n\ncode# %>% formatRound(c('july','oct'),2)\n\n\n\n5 Tidy Data\nThe wide data is transformed into long format (tidy data). It should be noted here that the incoming wide format is an unnecessary intermediate format - a byproduct of doing column-wise calculations in the VWR excel calculator. Going forward, programmatically extracting the site-species-count rows into long format from the data entry spreadsheet should be a goal of the end to end data pipeline.\n\ncodepointframe_long %>% arrange(site,species) %>% datatable(caption = paste0('Tidy point-frame data (site-species unique row combos) obtained with pivot_longer() function on wide input data above. Data updated in ',cYear,\".\"),filter = c(\"top\"),options = list(\n  pageLength = 7, autoWidth = FALSE)) \n\n\n\n\n\n\n\ncodesitesoil %>% datatable(caption = paste0(\"Site soil texture designation (silt or sand).\"),filter = c(\"top\"),options = list(\n  pageLength = 5, autoWidth = FALSE))\n\n\n\ncode# lai_ss_vwrmax <- lai_ss %>% left_join(vwrmax, by = c('soil','species'))\n# datatable(lai_ss_vwrmax)\n\nvwrmax_lookt %>% datatable(caption = paste0('Species-level leaf area index (LAI) for July 1, ',cYear,\", and VWR max for each period (July or October), site soil texture designation (silt or sand) affecting plant available water.\"),filter = c(\"top\"),options = list(\n  pageLength = 5, autoWidth = FALSE))%>% formatRound('lai',2)\n\n\n\ncode# vwr <- lai_ss_vwrmax %>% mutate(vwr = lai*vwr_at_lai_max)\n\nvwr %>% filter(lai>0) %>%  datatable(caption = paste0('Species-level VWR at each site computed from multiplying LAI by VWR max for each period (July or October)'),filter = c(\"top\"),options = list(\n  pageLength = 5, autoWidth = FALSE))%>% formatRound(c('lai','vwr_at_lai_max','vwr'),2)\n# datatable(vwr)\n# 420 rows\n\n# 30 sites, 2 periods, 7 species including other\n# rows <- 30*2*7\n\n\n\n6 Weighted average VWR/LAI\nThe sum of vwr for six species divided by sum of lai for six co-ocurring species provides estimates for VWRmax for the OTHER category.\nThis value is multiplied by the LAI of the OTHER column to obtain VWR for OTHER.\n\ncodeweighted.avg %>% datatable(caption = paste0('Site-level weighted average VWR/LAI for ',cYear,\", used as VWR max for OTHER species category for each period ().\"),filter = c(\"top\"),options = list(\n  pageLength = 5, autoWidth = FALSE))%>% formatRound(c('w_avg_vwr_per_lai'),2)\n\n\n\n\n\n\n\n7 Species level VWR\nHere we combine the site VWRs from the six dominant species and from the OTHER column into a single column.\n\ncode# join weighted avg VWR/LAI to vwr by site, species, period, and combined \n\nvwr.total %>% filter(all.hits > 0) %>% select(site,period,species,lai,total.vwr) %>%  datatable(caption = paste0(\"Total VWR for six dominant species and other species combined into one column\"),filter = c(\"top\"),options = list(\n  pageLength = 5, autoWidth = FALSE)) %>% formatRound(c('lai','total.vwr'),2)\n\n\n\n\n\n\n\n8 Site-level VWR\n\ncode# vwr.total <- vwr.total %>% mutate(site.f = factor(site, levels = ns_order))\n\n\n\n\nvwr.wide.period %>% datatable(caption = paste0('Vegetation water requirements (cm) July 1 (half year) and Oct 1 (full year), for ',cYear,', calculated according to Greenbook section III.A.1.'),filter = c(\"top\"),options = list(\n  pageLength = 5, autoWidth = FALSE),colnames = c('Site','July','October')) %>% formatRound(c('july','oct'),2) \n\n\n\n\n\ncode# %>% htmlwidgets::saveWidget(paste0(cYear,'_jul_oct_vwr.html'))\n\n\n\n\nCitationBibTeX citation:@report{nelson2022,\n  author = {Zach Nelson},\n  publisher = {Inyo County Water Department},\n  title = {Greenbook Section {III.A.1.} {Calculation} of {Vegetation}\n    {Water} {Requirement}},\n  volume = {1},\n  date = {2022-12-05},\n  url = {https://zach-nelson.github.io/open-science-notebook/posts/monitoring-wells/},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nZach Nelson. 2022. “Greenbook Section III.A.1. Calculation of\nVegetation Water Requirement.” Open Science Notebook.\nVol. 1. Inyo County Water Department. https://zach-nelson.github.io/open-science-notebook/posts/monitoring-wells/."
  },
  {
    "objectID": "posts/vegetation-water-requirement/index.html#read-data-into-r",
    "href": "posts/vegetation-water-requirement/index.html#read-data-into-r",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n3.1 Read data into R",
    "text": "3.1 Read data into R\n\ncode# read historical db that was updated the previous year\nhist <- read_csv(here('data','hydro','Monitoring_Wells_Master_2021.csv'))\n# convert date column to date format\nhist$date <- ymd(hist$date)\n\ndepthGE <- read_csv(here('data','hydro','DepthGE_2021_2022.csv'))\ndepthRP <- read_csv(here('data','hydro','DepthRP_2021_2022.csv'))\ndepthWSE <- read_csv(here('data','hydro','DepthWSE_2021_2022.csv'))\n\n\nseparate data column ‘dateread’ into date and dtw read for depthGE, depthRP, depthWSE separate datasets\n\ncode#separate the data column and assign numeric class to dtw\ndepthGE <- depthGE %>% separate(dateread, c(\"date\", \"dtw.bgs\"),sep = \" \") \ndepthGE$dtw.bgs <- as.numeric(depthGE$dtw.bgs)\n\n\n\ncodedepthRP <- depthRP %>% separate(dateread, c(\"date\", \"dtw.rp\"),sep = \" \") \ndepthRP$dtw.rp<- as.numeric(depthRP$dtw.rp)\n\n\n\ncodedepthWSE <- depthWSE %>% separate(dateread, c(\"date\", \"wse\"),sep = \" \") \ndepthWSE$wse <- as.numeric(depthWSE$wse)\n\n\nbind these three together using a full join so that records are not dropped\n\ncode#bind columns from rp, ge, and wse. use full join to maintain all records if some dates don't have one or the other.\n\ntry <- depthRP %>% full_join(depthWSE, by = c('staid','date')) %>% full_join(depthGE, by = c('staid','date'))"
  },
  {
    "objectID": "posts/vegetation-water-requirement/index.html#laws",
    "href": "posts/vegetation-water-requirement/index.html#laws",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.1 Laws",
    "text": "7.1 Laws\n\ncodemo.dtws <- testwells.combined\n\n# Laws set\nstaid.set <- c(\n'T107',\n'T434',\n'T436',\n'T438',\n'T490',\n'T492',\n'T795',\n'V001G',\n'T574')\n\nmo.dtws %>% filter(staid %in% staid.set) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the Laws wellfield. Well T492 is dry if DTW is below 60 ft, and well T107 is dry if DTW is below 37 feet.\n\n\n\n\n\ncodemo.dtws %>% filter(staid %in% staid.set, dtw.bgs <40, year >1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of selected monitoring wells in the Laws area 1990 onward.\n\n\n\ncode# xlim()\n\n\n\ncodemo.dtws %>% filter(staid %in% staid.set, year > 2000)%>% ggplot(aes(x = date, y = dtw.bgs,color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of selected monitoring wells in the Laws area 2000 onward.\n\n\n\n\n\ncodemo.dtws %>% filter(staid %in% staid.set, year > 1985)%>% ggplot(aes(x = date, y = dtw.bgs,color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')+\n  facet_wrap(~staid)\n\n\n\nHydrographs of selected monitoring wells in the Laws area 1985 onward faceted by test well.\n\n\n\n\n\ncode# west bishop\nstaid.set <- c(\n'T387',\n'T389',\n'T390',\n'T391')\n\nmo.dtws %>% filter(dtw.bgs<40,staid %in% staid.set,year>1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the western Bishop wellfield."
  },
  {
    "objectID": "posts/vegetation-water-requirement/index.html#bishop",
    "href": "posts/vegetation-water-requirement/index.html#bishop",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.2 Bishop",
    "text": "7.2 Bishop\n\ncode# northern bishop\nstaid.set <- c(\n'T108',\n'T384',\n'T498')\n\nmo.dtws %>% filter(dtw.bgs<40,staid %in% staid.set,year>1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the northern Bishop wellfield.\n\n\n\n\n\ncode# east bishop\nstaid.set <- c(\n'T485',\n'T497',\n'T501')\n\n\nmo.dtws %>% filter(dtw.bgs<40,staid %in% staid.set,year>1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the eastern Bishop wellfield.\n\n\n\n\n\ncode# western bishop\nstaid.set <- c(\n'T391',\n'T108',\n'T390',\n'T387',\n'T389')\n\nmo.dtws %>% filter(dtw.bgs<40,staid %in% staid.set,year>2009) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nRecent hydrographs of indicator wells in the western Bishop wellfield."
  },
  {
    "objectID": "posts/vegetation-water-requirement/index.html#big-pine",
    "href": "posts/vegetation-water-requirement/index.html#big-pine",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.3 Big Pine",
    "text": "7.3 Big Pine\n\ncode# BP set\nstaid.set <- c(\n'T425',\n'T426',\n'T469',\n'T572',\n'T798',\n'T799',\n'T567',\n'T800')\n\n# T572\n\n\nmo.dtws %>% filter(staid %in% staid.set, dtw.bgs <40, year >1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the Big Pine wellfield. Periods of missing data for T572 occurred when the well was plugged and in need of repair..\n\n\n\n\n\ncode# BP set\nstaid.set <- c(\n'T565',\n'V017GC')\n\n\nmo.dtws %>% filter(staid %in% staid.set, dtw.bgs <40, year >1990) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of monitoring wells in the southern Big Pine wellfield near pumping wells W218 and W219.."
  },
  {
    "objectID": "posts/vegetation-water-requirement/index.html#taboose-aberdeen",
    "href": "posts/vegetation-water-requirement/index.html#taboose-aberdeen",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.4 Taboose Aberdeen",
    "text": "7.4 Taboose Aberdeen\n\ncode# ta set\nstaid.set <- c(\n'T417',\n'T418',\n'T419',\n'T421')\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the Taboose-Aberdeen wellfield. Periods of missing data or flat horizontal line denote when the test well was dry.\n\n\n\n\n\ncodestaid.set <- c(\n'T502',\n'T504',\n'T505',\n'T586',\n'T587')# adjacent to groundwater dependent vegetation near W118 and is used to assess the impacts of recent pumping\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the Taboose-Aberdeen wellfield. Periods of missing data or flat horizontal line denote when the test well was dry.Data from well T587 (a non-indicator well) is included because it is located adjacent to groundwater dependent vegetation near W118 and is used to assess the impacts of recent pumping."
  },
  {
    "objectID": "posts/vegetation-water-requirement/index.html#thibaut-sawmill",
    "href": "posts/vegetation-water-requirement/index.html#thibaut-sawmill",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.5 Thibaut Sawmill",
    "text": "7.5 Thibaut Sawmill\n\ncode# BP set\n\nstaid.set <- c(\n'T413',\n'T414',\n'T415',\n'T507',\n'T587')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells."
  },
  {
    "objectID": "posts/vegetation-water-requirement/index.html#independence-oak",
    "href": "posts/vegetation-water-requirement/index.html#independence-oak",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.6 Independence Oak",
    "text": "7.6 Independence Oak\n\ncode# IO set\nstaid.set <- c(\n'T406',\n'T407',\n'T408',\n'T409')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells in the center of the wellfield.\n\n\n\n\nThe other indicator wells located east and north of Independence (T546 and T809)\n\ncode# IO set\nstaid.set <- c(\n'T412',\n'T453',\n'T546',\n'T809')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells."
  },
  {
    "objectID": "posts/vegetation-water-requirement/index.html#symmes-shepherd",
    "href": "posts/vegetation-water-requirement/index.html#symmes-shepherd",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.7 Symmes Shepherd",
    "text": "7.7 Symmes Shepherd\n\ncode# ss set\nstaid.set <- c(\n'T402',\n'T403',\n'T404',\n'T447')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells.\n\n\n\n\n\ncode# IO set\nstaid.set <- c(\n'T402',\n'T403',\n'T404',\n'T510',\n'T511')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells.\n\n\n\n\n\ncode# IO set\nstaid.set <- c(\n'T447',\n'V009G')\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells."
  },
  {
    "objectID": "posts/vegetation-water-requirement/index.html#bairs-george",
    "href": "posts/vegetation-water-requirement/index.html#bairs-george",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n7.8 Bairs George",
    "text": "7.8 Bairs George\n\ncode# IO set\nstaid.set <- c(\n'T398',#near aq\n'T400',#east of aq\n'T597')#near aq\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970,dtw.bgs<60) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells.\n\n\n\n\n\ncode# IO set\nstaid.set <- c(\n'T598',#near pumping\n'T596')#near near pumping\n\n\nmo.dtws %>% filter(staid %in% staid.set, year >1970) %>% ggplot(aes(x = date, y = dtw.bgs, color = staid))+\n  geom_line()+\n  scale_y_reverse()+\n  xlab('Date')+\n  ylab('DTW (feet below ground surface)')\n\n\n\nHydrographs of indicator wells."
  },
  {
    "objectID": "posts/vegetation-water-requirement/index.html#rp-elevations",
    "href": "posts/vegetation-water-requirement/index.html#rp-elevations",
    "title": "Steps to update ICWD’s monitoring well database from LADWP Water Year Data Transfer",
    "section": "\n8.1 RP elevations",
    "text": "8.1 RP elevations\nFrom ICWD Access database 2017 I exported the RP elevations, found the latest RP elevation measurement for each staid and joined this table to the RP DTW updates. For the OVGA update, this table will be joined each year until the RP elevations are updated.\n\ncode# rpelev <- read_csv('data/rp_elev.csv') %>% \n#   mutate(date = lubridate::mdy(date_c)) %>% \n#   group_by(staid) %>%\n#   summarise(date = max(date))%>% \n#   left_join(rpelev_2, by = c(\"staid\",\"date\")) %>% \n#   mutate(latest_rp_date = date) %>% \n#   select(-date,-date_c)\n\n# break up function to make it clear\n\n\nrpelev <- read_csv(here('data','hydro','rp_elev.csv'))\n\n# date conversion\nrpelev_2 <- rpelev %>% \n  mutate(date = lubridate::mdy(date_c))\n\n# pull the most recent date when rp elevations reported\nrpelev_3 <- rpelev_2 %>% \n  group_by(staid) %>%\n  summarise(date = max(date))\n\nrpelev_4 <- rpelev_3 %>% \n  left_join(rpelev_2, by = c(\"staid\",\"date\")) %>% \n  mutate(latest_rp_date = date) %>% \n  select(-date,-date_c)\n\nrpelev_4\n\n# A tibble: 1,178 × 3\n   staid rp_elev     latest_rp_date\n   <chr> <chr>       <date>        \n 1 F001  3808.699951 2017-09-12    \n 2 F002  3810.600098 2017-09-14    \n 3 F007  3808.199951 2017-08-07    \n 4 F009  3804.389893 2016-09-06    \n 5 F015  3835.929932 1996-12-12    \n 6 F016  3818.439941 1993-01-08    \n 7 F018  3805.899902 2017-06-20    \n 8 F022  3806.699951 2017-08-07    \n 9 F023  3824.899902 2017-08-07    \n10 F024  3805.199951 2016-08-01    \n# … with 1,168 more rows\n\n\n\ncodegse_staids <- read_csv(here('data','hydro','gse_staids.csv'))\n\n\nread in processed data through the most recent water year updates\n\ncodem <- testwells.combined\n\n\nfilter the master data table to the years needed for OVGA updates. Now that it is updated through the 2022 water year, follow instruction by changing the filter date to pluck off the update year.\n\ncodem1 <- m  %>% filter(date > \"2021-09-30\") %>% select(staid,date,dtw.rp)\n#1261 records\n# note: In Dec 2023 when the 2023 water year data is provided, change filter above to \"2022-09-30\"\nm1\n\n# A tibble: 133,891 × 3\n   staid date       dtw.rp\n   <chr> <date>      <dbl>\n 1 T455  2021-10-25   7.5 \n 2 T455  2022-01-13   7.27\n 3 T455  2022-04-29   7.15\n 4 T455  2022-07-18   7.71\n 5 T508  2021-10-29  13.8 \n 6 T508  2022-01-14  13.6 \n 7 T508  2022-04-14  13.3 \n 8 T508  2022-07-19  13.6 \n 9 T549  2022-04-29  17.6 \n10 T630  2021-10-25   6.3 \n# … with 133,881 more rows\n\n\njoin the rp elevations to the annual updates\n\ncode# join latest rp elevation measurements provided by LA\ndtwrp.rpelev <- m1 %>% left_join(rpelev_4, by = 'staid')\n\ndtwrp.rpelev\n\n# A tibble: 133,891 × 5\n   staid date       dtw.rp rp_elev     latest_rp_date\n   <chr> <date>      <dbl> <chr>       <date>        \n 1 T455  2021-10-25   7.5  3823.4      2018-03-30    \n 2 T455  2022-01-13   7.27 3823.4      2018-03-30    \n 3 T455  2022-04-29   7.15 3823.4      2018-03-30    \n 4 T455  2022-07-18   7.71 3823.4      2018-03-30    \n 5 T508  2021-10-29  13.8  3787.1      2018-03-27    \n 6 T508  2022-01-14  13.6  3787.1      2018-03-27    \n 7 T508  2022-04-14  13.3  3787.1      2018-03-27    \n 8 T508  2022-07-19  13.6  3787.1      2018-03-27    \n 9 T549  2022-04-29  17.6  3858.800049 2017-04-17    \n10 T630  2021-10-25   6.3  3813.100098 2017-07-26    \n# … with 133,881 more rows\n\n\n\ncodedtwrpavg.rpelev <- dtwrp.rpelev %>% group_by(staid, date, rp_elev) %>% summarise(dtw.rp =  round(mean(dtw.rp),2))\n\n\nhow many staids in LA database received and how many are missing from the ovga database\nread in ovga points here\n\ncodeovga_points <- read_csv(here(\"data\",\"hydro\",\"Owens_Monitoring_Points.csv\"))\novga_points\n\n# A tibble: 6,048 × 8\n   mon_pt_id site_id mon_pt_name   mon_pt_lat mon_pt_long coord…¹ county hide_…²\n       <dbl>   <dbl> <chr>              <dbl>       <dbl> <chr>   <chr>    <dbl>\n 1         1       1 01S32E29D001M       37.8       -118. NAD83   Mono         0\n 2         2       1 01S32E31J002M       37.8       -118. NAD83   Mono         0\n 3         3       1 01S32E32E001M       37.8       -118. NAD83   Mono         0\n 4         4       1 04S33E08M001M       37.6       -118. NAD83   Mono         0\n 5         5       1 05S33E09X001M       37.5       -118. NAD83   Mono         0\n 6         6       1 05S33E18D001M       37.5       -118. NAD83   Mono         0\n 7         7       1 06S31E05H001M       37.5       -119. NAD83   Inyo         0\n 8         8       1 06S31E17B001M       37.4       -119. NAD83   Inyo         0\n 9         9       1 06S31E19G001M       37.4       -119. NAD83   Inyo         0\n10        10       1 06S31E20H001M       37.4       -119. NAD83   Inyo         0\n# … with 6,038 more rows, and abbreviated variable names ¹​coord_sys,\n#   ²​hide_from_public\n\n\n\ncodeLA.staids <- dtwrpavg.rpelev %>% group_by(staid) %>% summarise(records = n())\n\nLA.staids.in.ovga <- LA.staids %>% semi_join(ovga_points, by = c(\"staid\"=\"mon_pt_name\"))\n\nLA.staids.notin.ovga <- LA.staids %>% anti_join(ovga_points, by = c(\"staid\"=\"mon_pt_name\"))\n#1045 staids provided by LA and 822 of these staids present in ovga database. 223 not in ovga database.\n\n# in 2022, 71 staids not in ovga db\n\nLA.staids\n\n# A tibble: 804 × 2\n   staid records\n   <chr>   <int>\n 1 F033        9\n 2 F035        9\n 3 F037        1\n 4 F052       12\n 5 F077       13\n 6 F082       10\n 7 F085       12\n 8 F122        1\n 9 F124       11\n10 F380        1\n# … with 794 more rows\n\n\n\ncode# LA provided depth data for `r LA.staids` staids in the annual data transfer. \n# The ovga database matches `r LA.staids.in.ovga` staids and is missing `r LA.staids.notin.ovga` staids.\nLA.staids.in.ovga\n\n# A tibble: 733 × 2\n   staid records\n   <chr>   <int>\n 1 F033        9\n 2 F035        9\n 3 F037        1\n 4 F052       12\n 5 F077       13\n 6 F082       10\n 7 F085       12\n 8 F122        1\n 9 F124       11\n10 T001        2\n# … with 723 more rows\n\n\n\ncodeLA.staids.notin.ovga\n\n# A tibble: 71 × 2\n   staid records\n   <chr>   <int>\n 1 F380        1\n 2 FS3D      365\n 3 FS3S      365\n 4 S001        4\n 5 S002        4\n 6 S004        4\n 7 S005        4\n 8 S006        4\n 9 S007        4\n10 T313B      12\n# … with 61 more rows\n\n\nmonitoring points missing rp elevations after join\n\ncode# LA.staids.in.ovga\n# find how many staids are missing rp elevation\nna.rp.elev <- dtwrpavg.rpelev %>% \n  semi_join(LA.staids.in.ovga, by = 'staid') %>% \n  filter(is.na(rp_elev)) %>% \n  group_by(staid) %>% \n  summarise(count.na = n())\n\n# in 2022, 97 with NA, missing rp elevations\n\n#278 staids with NA missing rp elevations. \nna.rp.elev\n\n# A tibble: 18 × 2\n   staid count.na\n   <chr>    <int>\n 1 T013U       11\n 2 TT02         6\n 3 TT04         6\n 4 TT05         6\n 5 TT07         6\n 6 TT08         6\n 7 TT09         6\n 8 TT10         6\n 9 TT17         6\n10 TT18         6\n11 TT37         6\n12 W059        12\n13 W103         9\n14 W104         1\n15 W371         8\n16 W381         2\n17 W382        11\n18 W389         3\n\n\n278 out of 1045 staids LA provided no rpe\nfind staids without GSEs and RPEs in the county data\n\ncodeneed.gse <- na.rp.elev %>% anti_join(gse_staids, by = 'staid')\nneed.gse\n\n# A tibble: 0 × 2\n# … with 2 variables: staid <chr>, count.na <int>\n\ncode# need.gse %>% write_csv(\"staids_missingRPEandGSE.csv\")\n\n\nupdate 2022 - out of 97 staids without RPE, 15 without rpe, leaving 82 with GSE\nout of 278 staids without RPE in the upload set, 168 staids without rpe or gse in the old access db leaving 110 that can be uploaded with a gse join once i do that. out of this 110, only 26 are currently in the ovga meaning we need to add some points to ovga database.\n\ncodehave.gse <- na.rp.elev %>% semi_join(gse_staids, by = 'staid')\nhave.gse\n\n# A tibble: 18 × 2\n   staid count.na\n   <chr>    <int>\n 1 T013U       11\n 2 TT02         6\n 3 TT04         6\n 4 TT05         6\n 5 TT07         6\n 6 TT08         6\n 7 TT09         6\n 8 TT10         6\n 9 TT17         6\n10 TT18         6\n11 TT37         6\n12 W059        12\n13 W103         9\n14 W104         1\n15 W371         8\n16 W381         2\n17 W382        11\n18 W389         3\n\n\n110 staids with gse that can be joined\n\ncodenot_in_ovga <- need.gse %>% anti_join(ovga_points, by = c(\"staid\"=\"mon_pt_name\"))\nnot_in_ovga\n\n# A tibble: 0 × 2\n# … with 2 variables: staid <chr>, count.na <int>\n\n\nout of 168 staids 142 of these not in ovga\n\ncodein_ovga_gse <- need.gse %>% semi_join(ovga_points, by = c(\"staid\"=\"mon_pt_name\"))\n\nin_ovga_gse\n\n# A tibble: 0 × 2\n# … with 2 variables: staid <chr>, count.na <int>\n\n\n26 in ovga that need gse joins\ntotal records from monitoring points missing rp elevations\n\ncode# total records\nna.rp.elev.tot <- na.rp.elev %>% \n  summarise(count.na = sum(count.na))\n\n# 453,119 records without rp.elev. with pt data\n# 36517 aggregated to daily\nna.rp.elev.tot\n\n# A tibble: 1 × 1\n  count.na\n     <int>\n1      117\n\n\nfilter records in the set corresponding to monitoring points without rp elevation\n\ncoderpcheck <- dtwrpavg.rpelev %>% semi_join(na.rp.elev, by = \"staid\")\nrpcheck\n\n# A tibble: 117 × 4\n# Groups:   staid, date [117]\n   staid date       rp_elev dtw.rp\n   <chr> <date>     <chr>    <dbl>\n 1 T013U 2021-10-29 <NA>      5.1 \n 2 T013U 2021-11-18 <NA>      4.74\n 3 T013U 2021-12-19 <NA>      4.26\n 4 T013U 2022-01-20 <NA>      3.58\n 5 T013U 2022-02-14 <NA>      3.1 \n 6 T013U 2022-03-28 <NA>      3.01\n 7 T013U 2022-05-25 <NA>      3.4 \n 8 T013U 2022-06-09 <NA>      3.97\n 9 T013U 2022-07-18 <NA>      4.9 \n10 T013U 2022-08-15 <NA>      4.97\n# … with 107 more rows\n\ncode# 453,119 from 278 staids have no rp elevations\n# 36,517 aggregated to daily\n\n# we can filter out these staids for now, save the list and when rp elevations are updated we can add\n# the wells within OVGA area. 278 \n\n# which wells are etape or pressure transducer measured\n# infer based on number of measurements\n\n\nNumber of records from staids with rp elevations\n\ncode# classify method by frequency of measurements. This count only valid for this 4-year set. annual updates would need a daily analysis. per kr, less than \n# record.number <- dtwrp.rpelev %>% \n#   filter(!is.na(rp_elev)) %>% \n#   group_by(staid) %>% \n#   summarise(count.with.rpe = n()) %>% \n#   mutate(MMethod = case_when(count.with.rpe >1000 ~ \"TR\",\n#                             count.with.rpe <200~ \"ES\"))\n\nrecord.number <- dtwrp.rpelev %>% \n  filter(!is.na(rp_elev)) %>% \n  group_by(staid) %>% \n  summarise(count.with.rpe = n()) %>% \n  mutate(MMethod = case_when(count.with.rpe >= 48 ~ \"TR\",\n                            count.with.rpe < 48~ \"ES\"))\n\n\nrecord.number %>% arrange(-count.with.rpe)\n\n# A tibble: 756 × 3\n   staid count.with.rpe MMethod\n   <chr>          <int> <chr>  \n 1 T752            8737 TR     \n 2 T753            8737 TR     \n 3 T754            8737 TR     \n 4 T755            8737 TR     \n 5 T756            8737 TR     \n 6 T757            8737 TR     \n 7 T759            8737 TR     \n 8 T758            8036 TR     \n 9 T733            4950 TR     \n10 V251            4117 TR     \n# … with 746 more rows\n\n\nselect only data with rp elevations\n\ncode# d <- dtwrp.rpelev %>% left_join(dtwrpavg.rpelev, by = 'staid')\n# anti_join returns all records in x that don't have a match in y\nrpselect <- dtwrpavg.rpelev %>% anti_join(na.rp.elev, by = \"staid\")\n# 204,487 records with rp elevations for upload\n\n# names(rpselect)\n\n\nuse a semi_join filter to retain only monitoring points in the OVGA database.\n6,048 points including monitoring wells, pumping wells, surface water gauging stations.\n\ncode# semi_join returns records in x with a match in y\nrpselect2 <- rpselect %>% semi_join(ovga_points, by = c(\"staid\"=\"mon_pt_name\"))\n\n\n\ncode# methodinfer %>% distinct()\nmethodinfer <- record.number %>% select(-count.with.rpe)\n# %>% distinct(staid)\n\nupload <- rpselect2 %>% \n  left_join(methodinfer, by = \"staid\") %>% \n  # select(-latest_rp_date) %>% \n  select(WellName = staid, \n         DateMeasured = date, \n         DepthToWater = dtw.rp, \n         ReferencePointElevation = rp_elev,\n         MMethod) %>% \n  mutate(ExclusionCondition = \"\" ,\n         QAQCLevel = \"High\",\n         MeasMethod = MMethod,# from join above\n         NoMeasFlag = \"\",\n         QuestMeasFlag = \"\",\n         DataSource = \"LADWP\",\n         Notes = \"\") %>% \n  select(-MMethod)%>% \n  filter(DepthToWater < 500 & !is.na(DepthToWater) & DepthToWater != 'NA' & DepthToWater != -777 & ReferencePointElevation !=0)\n# need to pull out RPE = 0 and add to the set without measured RPE\n\n# \nupload \n\n# A tibble: 15,696 × 11\n# Groups:   WellName, DateMeasured [15,696]\n   WellName DateMeasured Depth…¹ Refer…² Exclu…³ QAQCL…⁴ MeasM…⁵ NoMea…⁶ Quest…⁷\n   <chr>    <date>         <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 F033     2022-01-07      4.55 3833.5  \"\"      High    ES      \"\"      \"\"     \n 2 F033     2022-02-09      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 3 F033     2022-03-09      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 4 F033     2022-04-05      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 5 F033     2022-05-05      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 6 F033     2022-06-01      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 7 F033     2022-07-07      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 8 F033     2022-08-02      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n 9 F033     2022-09-07      4.57 3833.5  \"\"      High    ES      \"\"      \"\"     \n10 F035     2022-01-07     10.4  3834.6… \"\"      High    ES      \"\"      \"\"     \n# … with 15,686 more rows, 2 more variables: DataSource <chr>, Notes <chr>, and\n#   abbreviated variable names ¹​DepthToWater, ²​ReferencePointElevation,\n#   ³​ExclusionCondition, ⁴​QAQCLevel, ⁵​MeasMethod, ⁶​NoMeasFlag, ⁷​QuestMeasFlag\n\n\n\ncode# remove 30 rows of NA and -777\nupload %>% write_csv(\"ovga_uploads_mw_with_rpe_102021_092022_zn.csv\")\n# upload %>% write_csv(\"ovga_uploads_mw_with_rpe_102017_092021_zn4.csv\")\n\n\nF122 has rp of zero. filter out faulty rp data entry errors with 0 for rp zero use GSE, so create elevation bracket filter to exclude erroneous entries and default to using GSE.\nneed to split out electronic pressure transducer (TR) vs electric sounder measurement (ES)"
  }
]